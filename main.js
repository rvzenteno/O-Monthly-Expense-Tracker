var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MonthlyExpenseTrackerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  recurringExpenses: [],
  monthlyPayments: [],
  monthlyNotesFolder: "Monthly Expenses",
  monthlyNoteTemplate: "# {{month}} - Monthly Expenses\n\n## Expense Tracker\n\n{{expenses}}\n\n---\n*Generated by Monthly Expense Tracker*",
  autoCreateMonthlyNotes: true,
  showStatusBar: true
};
var VIEW_TYPE_DASHBOARD = "expense-tracker-dashboard";
var MonthlyExpenseTrackerPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_DASHBOARD,
      (leaf) => new DashboardView(leaf, this)
    );
    this.addRibbonIcon("wallet", "Monthly Expense Tracker", () => {
      this.activateDashboardView();
    });
    this.addCommand({
      id: "open-expense-dashboard",
      name: "Open Expense Dashboard",
      callback: () => {
        this.activateDashboardView();
      }
    });
    this.addCommand({
      id: "add-recurring-expense",
      name: "Add Recurring Expense",
      callback: () => {
        new AddExpenseModal(this.app, this, null).open();
      }
    });
    this.addCommand({
      id: "create-current-month-note",
      name: "Create Current Month Note",
      callback: async () => {
        const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
        await this.createMonthlyNote(currentMonth);
      }
    });
    this.addCommand({
      id: "generate-expense-report",
      name: "Generate Expense Report",
      callback: () => {
        new ReportModal(this.app, this).open();
      }
    });
    if (this.settings.showStatusBar) {
      this.statusBarItem = this.addStatusBarItem();
      this.updateStatusBar();
    }
    if (this.settings.autoCreateMonthlyNotes) {
      this.checkAndCreateMonthlyNote();
    }
    this.addSettingTab(new ExpenseTrackerSettingTab(this.app, this));
    console.log("Monthly Expense Tracker plugin loaded");
  }
  async activateDashboardView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_DASHBOARD)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (rightLeaf) {
        await rightLeaf.setViewState({
          type: VIEW_TYPE_DASHBOARD,
          active: true
        });
        leaf = rightLeaf;
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async checkAndCreateMonthlyNote() {
    const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
    const monthlyNote = await this.getMonthlyNoteFile(currentMonth);
    if (!monthlyNote) {
      await this.createMonthlyNote(currentMonth);
    }
  }
  async createMonthlyNote(month) {
    const folderPath = this.settings.monthlyNotesFolder;
    const fileName = `${month}.md`;
    const filePath = `${folderPath}/${fileName}`;
    const folder = this.app.vault.getAbstractFileByPath(folderPath);
    if (!folder) {
      await this.app.vault.createFolder(folderPath);
    }
    let file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian.TFile) {
      new import_obsidian.Notice(`Monthly note for ${month} already exists`);
      return file;
    }
    const expenses = this.getExpensesForMonth(month);
    const prevMonth = (0, import_obsidian.moment)(month, "YYYY-MM").subtract(1, "month").format("YYYY-MM");
    const unpaidFromPrev = this.getUnpaidExpenses(prevMonth);
    let expenseList = "## Current Month Expenses\n\n";
    expenses.forEach((expense) => {
      const payment = this.getPayment(expense.id, month);
      const status = (payment == null ? void 0 : payment.paid) ? "x" : " ";
      const statusIcon = (payment == null ? void 0 : payment.paid) ? "\u2705" : "\u2B1C";
      expenseList += `- [${status}] ${statusIcon} **${expense.name}** - $${expense.amount.toFixed(2)} - Due: ${expense.dueDay} - Method: ${expense.paymentMethod}
`;
      expenseList += `  - ID: \`${expense.id}\`
`;
      if (payment == null ? void 0 : payment.confirmationNumber) {
        expenseList += `  - Confirmation: ${payment.confirmationNumber}
`;
      }
      expenseList += "\n";
    });
    if (unpaidFromPrev.length > 0) {
      expenseList += "\n## Unpaid from Previous Month\n\n";
      unpaidFromPrev.forEach((expense) => {
        expenseList += `- [ ] \u26A0\uFE0F **${expense.name}** - $${expense.amount.toFixed(2)} - OVERDUE
`;
        expenseList += `  - ID: \`${expense.id}\`

`;
      });
    }
    if (expenses.length === 0) {
      expenseList += '\n*No expenses set up for this month yet. Click "**+ Add Expense**" in the dashboard to add recurring expenses.*\n\n';
    }
    const content = this.settings.monthlyNoteTemplate.replace("{{month}}", (0, import_obsidian.moment)(month, "YYYY-MM").format("MMMM YYYY")).replace("{{expenses}}", expenseList);
    file = await this.app.vault.create(filePath, content);
    new import_obsidian.Notice(`Created monthly note for ${month}`);
    return file;
  }
  async getMonthlyNoteFile(month) {
    const filePath = `${this.settings.monthlyNotesFolder}/${month}.md`;
    const file = this.app.vault.getAbstractFileByPath(filePath);
    return file instanceof import_obsidian.TFile ? file : null;
  }
  getExpensesForMonth(month) {
    return this.settings.recurringExpenses.filter((expense) => {
      if (expense.archived) return false;
      const expenseStart = (0, import_obsidian.moment)(expense.startDate, "YYYY-MM");
      const expenseEnd = expense.endDate ? (0, import_obsidian.moment)(expense.endDate, "YYYY-MM") : null;
      const checkMonth = (0, import_obsidian.moment)(month, "YYYY-MM");
      const afterStart = checkMonth.isSameOrAfter(expenseStart);
      const beforeEnd = !expenseEnd || checkMonth.isSameOrBefore(expenseEnd);
      return afterStart && beforeEnd;
    });
  }
  getUnpaidExpenses(month) {
    const expenses = this.getExpensesForMonth(month);
    return expenses.filter((expense) => {
      const payment = this.getPayment(expense.id, month);
      return !payment || !payment.paid;
    });
  }
  getPayment(expenseId, month) {
    return this.settings.monthlyPayments.find(
      (p) => p.expenseId === expenseId && p.month === month
    );
  }
  async markExpensePaid(expenseId, month, paid, confirmationNumber) {
    const existingPayment = this.getPayment(expenseId, month);
    if (existingPayment) {
      existingPayment.paid = paid;
      existingPayment.paidDate = paid ? (0, import_obsidian.moment)().format("YYYY-MM-DD") : void 0;
      existingPayment.confirmationNumber = confirmationNumber;
    } else {
      this.settings.monthlyPayments.push({
        expenseId,
        month,
        paid,
        paidDate: paid ? (0, import_obsidian.moment)().format("YYYY-MM-DD") : void 0,
        confirmationNumber
      });
    }
    await this.saveSettings();
    this.updateStatusBar();
  }
  async addRecurringExpense(expense) {
    this.settings.recurringExpenses.push(expense);
    await this.saveSettings();
    new import_obsidian.Notice(`Added recurring expense: ${expense.name}`);
  }
  async updateRecurringExpense(expense) {
    const index = this.settings.recurringExpenses.findIndex((e) => e.id === expense.id);
    if (index !== -1) {
      this.settings.recurringExpenses[index] = expense;
      await this.saveSettings();
      new import_obsidian.Notice(`Updated expense: ${expense.name}`);
    }
  }
  async archiveExpense(expenseId) {
    const expense = this.settings.recurringExpenses.find((e) => e.id === expenseId);
    if (expense) {
      expense.archived = true;
      await this.saveSettings();
      new import_obsidian.Notice(`Archived expense: ${expense.name}`);
    }
  }
  async deleteExpense(expenseId) {
    this.settings.recurringExpenses = this.settings.recurringExpenses.filter((e) => e.id !== expenseId);
    this.settings.monthlyPayments = this.settings.monthlyPayments.filter((p) => p.expenseId !== expenseId);
    await this.saveSettings();
    new import_obsidian.Notice("Expense deleted");
  }
  updateStatusBar() {
    if (!this.statusBarItem) return;
    const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
    const unpaid = this.getUnpaidExpenses(currentMonth);
    const total = this.getExpensesForMonth(currentMonth).length;
    if (unpaid.length > 0) {
      this.statusBarItem.textContent = `\u{1F4B3} ${unpaid.length}/${total} unpaid`;
      this.statusBarItem.classList.add("expense-tracker-unpaid");
    } else if (total > 0) {
      this.statusBarItem.textContent = `\u{1F4B3} All paid`;
      this.statusBarItem.classList.remove("expense-tracker-unpaid");
    } else {
      this.statusBarItem.textContent = "\u{1F4B3}";
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_DASHBOARD);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof DashboardView) {
        leaf.view.refresh();
      }
    });
  }
  onunload() {
    console.log("Monthly Expense Tracker plugin unloaded");
  }
};
var DashboardView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
  }
  getViewType() {
    return VIEW_TYPE_DASHBOARD;
  }
  getDisplayText() {
    return "Expense Dashboard";
  }
  getIcon() {
    return "wallet";
  }
  async onOpen() {
    this.refresh();
  }
  refresh() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("expense-tracker-dashboard");
    const header = container.createDiv("expense-tracker-header");
    header.createEl("h2", { text: "Monthly Expense Tracker" });
    const monthSelector = container.createDiv("expense-tracker-month-selector");
    const prevBtn = monthSelector.createEl("button", { text: "\u25C0" });
    prevBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").subtract(1, "month").format("YYYY-MM");
      this.refresh();
    };
    const monthDisplay = monthSelector.createEl("span", {
      text: (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").format("MMMM YYYY"),
      cls: "expense-tracker-month-display"
    });
    const nextBtn = monthSelector.createEl("button", { text: "\u25B6" });
    nextBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").add(1, "month").format("YYYY-MM");
      this.refresh();
    };
    const todayBtn = monthSelector.createEl("button", { text: "Today" });
    todayBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
      this.refresh();
    };
    const expenses = this.plugin.getExpensesForMonth(this.currentMonth);
    const unpaid = this.plugin.getUnpaidExpenses(this.currentMonth);
    const totalAmount = expenses.reduce((sum, e) => sum + e.amount, 0);
    const paidAmount = expenses.filter((e) => {
      const payment = this.plugin.getPayment(e.id, this.currentMonth);
      return payment == null ? void 0 : payment.paid;
    }).reduce((sum, e) => sum + e.amount, 0);
    const summary = container.createDiv("expense-tracker-summary");
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Total Expenses:</span>
            <span class="summary-value">${expenses.length}</span>
        `;
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Unpaid:</span>
            <span class="summary-value unpaid">${unpaid.length}</span>
        `;
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Total Amount:</span>
            <span class="summary-value">$${totalAmount.toFixed(2)}</span>
        `;
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Paid:</span>
            <span class="summary-value paid">$${paidAmount.toFixed(2)}</span>
        `;
    const actions = container.createDiv("expense-tracker-actions");
    const addBtn = actions.createEl("button", { text: "+ Add Expense", cls: "mod-cta" });
    addBtn.onclick = () => {
      new AddExpenseModal(this.app, this.plugin, null).open();
    };
    const createNoteBtn = actions.createEl("button", { text: "\u{1F4C4} Create Monthly Note" });
    createNoteBtn.onclick = async () => {
      await this.plugin.createMonthlyNote(this.currentMonth);
    };
    const reportBtn = actions.createEl("button", { text: "\u{1F4CA} Generate Report" });
    reportBtn.onclick = () => {
      new ReportModal(this.app, this.plugin).open();
    };
    const supportBtn = actions.createEl("button", { text: "\u{1F499} Support Plugin" });
    supportBtn.onclick = () => {
      new SupportModal(this.app).open();
    };
    supportBtn.style.background = "var(--interactive-accent)";
    supportBtn.style.color = "var(--text-on-accent)";
    const expenseList = container.createEl("div", { cls: "expense-tracker-list" });
    if (expenses.length === 0) {
      expenseList.createDiv("expense-tracker-empty").setText("No expenses for this month");
    } else {
      const paidExpenses = expenses.filter((e) => {
        const payment = this.plugin.getPayment(e.id, this.currentMonth);
        return payment == null ? void 0 : payment.paid;
      });
      const unpaidExpenses = expenses.filter((e) => {
        const payment = this.plugin.getPayment(e.id, this.currentMonth);
        return !(payment == null ? void 0 : payment.paid);
      });
      if (unpaidExpenses.length > 0) {
        expenseList.createEl("h3", { text: "Unpaid" });
        unpaidExpenses.forEach((expense) => {
          this.renderExpenseItem(expenseList, expense);
        });
      }
      if (paidExpenses.length > 0) {
        expenseList.createEl("h3", { text: "Paid" });
        paidExpenses.forEach((expense) => {
          this.renderExpenseItem(expenseList, expense);
        });
      }
    }
    const archivedExpenses = this.plugin.settings.recurringExpenses.filter((e) => e.archived);
    if (archivedExpenses.length > 0) {
      const archivedSection = container.createDiv("expense-tracker-archived");
      const archivedHeader = archivedSection.createEl("h3", { text: "Archived Expenses" });
      archivedHeader.style.cursor = "pointer";
      const archivedList = archivedSection.createDiv("expense-tracker-archived-list");
      archivedList.style.display = "none";
      archivedHeader.onclick = () => {
        archivedList.style.display = archivedList.style.display === "none" ? "block" : "none";
      };
      archivedExpenses.forEach((expense) => {
        const item = archivedList.createDiv("expense-item archived");
        item.innerHTML = `
                    <div class="expense-name">${expense.name}</div>
                    <div class="expense-details">$${expense.amount.toFixed(2)} - ${expense.paymentMethod}</div>
                `;
        item.onclick = () => {
          const menu = new import_obsidian.Menu();
          menu.addItem((item2) => {
            item2.setTitle("Unarchive").onClick(async () => {
              expense.archived = false;
              await this.plugin.saveSettings();
              this.refresh();
            });
          });
          menu.addItem((item2) => {
            item2.setTitle("Delete").onClick(async () => {
              await this.plugin.deleteExpense(expense.id);
              this.refresh();
            });
          });
          menu.showAtMouseEvent(event);
        };
      });
    }
  }
  renderExpenseItem(container, expense) {
    const payment = this.plugin.getPayment(expense.id, this.currentMonth);
    const isPaid = (payment == null ? void 0 : payment.paid) || false;
    const isOverdue = expense.dueDay < parseInt((0, import_obsidian.moment)().format("D")) && !isPaid && this.currentMonth === (0, import_obsidian.moment)().format("YYYY-MM");
    const item = container.createDiv("expense-item");
    if (isPaid) item.addClass("paid");
    if (isOverdue) item.addClass("overdue");
    const checkbox = item.createEl("input", { type: "checkbox" });
    checkbox.checked = isPaid;
    checkbox.onclick = async (e) => {
      e.stopPropagation();
      if (!isPaid) {
        new MarkPaidModal(this.app, this.plugin, expense, this.currentMonth, () => {
          this.refresh();
        }).open();
      } else {
        await this.plugin.markExpensePaid(expense.id, this.currentMonth, false);
        this.refresh();
      }
    };
    const content = item.createDiv("expense-content");
    const nameDiv = content.createDiv("expense-name");
    nameDiv.setText(expense.name);
    if (isOverdue) {
      nameDiv.createSpan({ text: " \u26A0\uFE0F OVERDUE", cls: "overdue-badge" });
    }
    const details = content.createDiv("expense-details");
    details.innerHTML = `
            $${expense.amount.toFixed(2)} \u2022 Due: ${expense.dueDay} \u2022 ${expense.paymentMethod}
            ${(payment == null ? void 0 : payment.confirmationNumber) ? `<br>Confirmation: ${payment.confirmationNumber}` : ""}
            ${(payment == null ? void 0 : payment.paidDate) ? `<br>Paid: ${payment.paidDate}` : ""}
        `;
    const actions = item.createDiv("expense-actions");
    const menuBtn = actions.createEl("button", { text: "\u22EE" });
    menuBtn.onclick = (e) => {
      e.stopPropagation();
      const menu = new import_obsidian.Menu();
      menu.addItem((item2) => {
        item2.setTitle("Edit").setIcon("pencil").onClick(() => {
          new AddExpenseModal(this.app, this.plugin, expense).open();
        });
      });
      menu.addItem((item2) => {
        item2.setTitle("View History").setIcon("history").onClick(() => {
          new HistoryModal(this.app, this.plugin, expense).open();
        });
      });
      menu.addItem((item2) => {
        item2.setTitle("Archive").setIcon("archive").onClick(async () => {
          await this.plugin.archiveExpense(expense.id);
          this.refresh();
        });
      });
      menu.addItem((item2) => {
        item2.setTitle("Delete").setIcon("trash").onClick(async () => {
          await this.plugin.deleteExpense(expense.id);
          this.refresh();
        });
      });
      menu.showAtMouseEvent(e);
    };
  }
  async onClose() {
  }
};
var AddExpenseModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.expense ? "Edit Expense" : "Add Recurring Expense" });
    const form = contentEl.createDiv("expense-form");
    new import_obsidian.Setting(form).setName("Expense Name").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.name) || "");
      text.inputEl.id = "expense-name";
    });
    new import_obsidian.Setting(form).setName("Amount").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.amount.toString()) || "");
      text.inputEl.type = "number";
      text.inputEl.step = "0.01";
      text.inputEl.id = "expense-amount";
    });
    new import_obsidian.Setting(form).setName("Due Day of Month").setDesc("1-31").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.dueDay.toString()) || "1");
      text.inputEl.type = "number";
      text.inputEl.min = "1";
      text.inputEl.max = "31";
      text.inputEl.id = "expense-due-day";
    });
    new import_obsidian.Setting(form).setName("Payment Method").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.paymentMethod) || "");
      text.inputEl.id = "expense-payment-method";
    });
    new import_obsidian.Setting(form).setName("Start Month").setDesc("YYYY-MM format").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.startDate) || (0, import_obsidian.moment)().format("YYYY-MM"));
      text.inputEl.id = "expense-start-date";
    });
    new import_obsidian.Setting(form).setName("End Month (Optional)").setDesc("YYYY-MM format - leave empty for ongoing").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.endDate) || "");
      text.inputEl.id = "expense-end-date";
    });
    new import_obsidian.Setting(form).setName("Category (Optional)").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.category) || "");
      text.inputEl.id = "expense-category";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const saveBtn = buttonDiv.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      await this.handleSubmit();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  async handleSubmit() {
    var _a, _b;
    const name = document.getElementById("expense-name").value;
    const amount = parseFloat(document.getElementById("expense-amount").value);
    const dueDay = parseInt(document.getElementById("expense-due-day").value);
    const paymentMethod = document.getElementById("expense-payment-method").value;
    const startDate = document.getElementById("expense-start-date").value;
    const endDate = document.getElementById("expense-end-date").value;
    const category = document.getElementById("expense-category").value;
    if (!name || !amount || !dueDay || !paymentMethod || !startDate) {
      new import_obsidian.Notice("Please fill in all required fields");
      return;
    }
    const expense = {
      id: ((_a = this.expense) == null ? void 0 : _a.id) || `exp-${Date.now()}`,
      name,
      amount,
      dueDay,
      paymentMethod,
      startDate,
      endDate: endDate || void 0,
      category: category || void 0,
      archived: ((_b = this.expense) == null ? void 0 : _b.archived) || false
    };
    if (this.expense) {
      await this.plugin.updateRecurringExpense(expense);
    } else {
      await this.plugin.addRecurringExpense(expense);
    }
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var MarkPaidModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense, month, onComplete) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
    this.month = month;
    this.onComplete = onComplete;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Mark as Paid" });
    contentEl.createEl("p", { text: `${this.expense.name} - $${this.expense.amount.toFixed(2)}` });
    const form = contentEl.createDiv();
    new import_obsidian.Setting(form).setName("Confirmation Number (Optional)").addText((text) => {
      text.inputEl.id = "confirmation-number";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const saveBtn = buttonDiv.createEl("button", { text: "Mark Paid", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      const confirmationNumber = document.getElementById("confirmation-number").value;
      await this.plugin.markExpensePaid(this.expense.id, this.month, true, confirmationNumber || void 0);
      this.onComplete();
      this.close();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var HistoryModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: `Payment History: ${this.expense.name}` });
    const history = this.plugin.settings.monthlyPayments.filter((p) => p.expenseId === this.expense.id).sort((a, b) => b.month.localeCompare(a.month));
    if (history.length === 0) {
      contentEl.createEl("p", { text: "No payment history" });
    } else {
      const table = contentEl.createEl("table", { cls: "expense-history-table" });
      const thead = table.createEl("thead");
      const headerRow = thead.createEl("tr");
      headerRow.createEl("th", { text: "Month" });
      headerRow.createEl("th", { text: "Status" });
      headerRow.createEl("th", { text: "Paid Date" });
      headerRow.createEl("th", { text: "Confirmation" });
      const tbody = table.createEl("tbody");
      history.forEach((payment) => {
        const row = tbody.createEl("tr");
        row.createEl("td", { text: (0, import_obsidian.moment)(payment.month, "YYYY-MM").format("MMM YYYY") });
        row.createEl("td", { text: payment.paid ? "\u2705 Paid" : "\u2B1C Unpaid" });
        row.createEl("td", { text: payment.paidDate || "-" });
        row.createEl("td", { text: payment.confirmationNumber || "-" });
      });
    }
    const closeBtn = contentEl.createEl("button", { text: "Close" });
    closeBtn.onclick = () => this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SupportModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("expense-tracker-support-modal");
    const header = contentEl.createEl("h2", { text: "\u{1F499} Support Monthly Expense Tracker" });
    header.style.color = "var(--interactive-accent)";
    contentEl.createEl("p", {
      text: "Thank you for considering supporting this plugin! Your support helps maintain and improve this tool."
    });
    const paypalSection = contentEl.createDiv("support-section");
    paypalSection.createEl("h3", { text: "\u{1F4B3} PayPal" });
    paypalSection.createEl("p", { text: "One-time or recurring donations via PayPal:" });
    const paypalBtn = paypalSection.createEl("a", {
      text: "\u2192 Donate via PayPal",
      href: "https://www.paypal.com/paypalme/VictorZenteno"
    });
    paypalBtn.addClass("support-link");
    const cryptoSection = contentEl.createDiv("support-section");
    cryptoSection.createEl("h3", { text: "\u{1FA99} Cryptocurrency (USDC/USDT)" });
    cryptoSection.createEl("p", { text: "Support with stablecoins on multiple networks:" });
    const cryptoAddresses = cryptoSection.createDiv("crypto-addresses");
    const usdcDiv = cryptoAddresses.createDiv("crypto-address");
    usdcDiv.createEl("strong", { text: "USDC (Base Network - Low Fees):" });
    const usdcAddress = usdcDiv.createEl("code", { text: "0x1023142d0548b63542f2a4803b6724d4c26b8bda" });
    usdcAddress.style.display = "block";
    usdcAddress.style.marginTop = "5px";
    usdcAddress.style.padding = "5px";
    usdcAddress.style.background = "var(--background-secondary)";
    usdcAddress.style.borderRadius = "4px";
    usdcAddress.style.fontSize = "0.85em";
    usdcAddress.style.wordBreak = "break-all";
    const usdcNote = usdcDiv.createEl("small", { text: "Also works on: Ethereum, Polygon, Arbitrum, Optimism" });
    usdcNote.style.display = "block";
    usdcNote.style.marginTop = "3px";
    usdcNote.style.color = "var(--text-muted)";
    const usdtDiv = cryptoAddresses.createDiv("crypto-address");
    usdtDiv.createEl("strong", { text: "USDT (Tron TRC-20 - Ultra Low Fees):" });
    const usdtAddress = usdtDiv.createEl("code", { text: "TAV7qTGgvn8GnYJfXfes73tD2dAPQJ3L2W" });
    usdtAddress.style.display = "block";
    usdtAddress.style.marginTop = "5px";
    usdtAddress.style.padding = "5px";
    usdtAddress.style.background = "var(--background-secondary)";
    usdtAddress.style.borderRadius = "4px";
    usdtAddress.style.fontSize = "0.85em";
    usdtAddress.style.wordBreak = "break-all";
    const cryptoNote = cryptoSection.createEl("p", { text: "\u26A0\uFE0F Important: Double-check the network before sending!" });
    cryptoNote.style.color = "var(--text-error)";
    cryptoNote.style.fontSize = "0.9em";
    cryptoNote.style.marginTop = "10px";
    const cryptoTip = cryptoSection.createEl("p", { text: "\u{1F4A1} Tip: Use Tron for USDT or Base for USDC to minimize fees!" });
    cryptoTip.style.fontSize = "0.9em";
    cryptoTip.style.marginTop = "5px";
    cryptoTip.style.color = "var(--text-muted)";
    const coffeeSection = contentEl.createDiv("support-section");
    coffeeSection.createEl("h3", { text: "\u2615 Buy Me a Coffee" });
    coffeeSection.createEl("p", { text: "Simple, friendly way to support:" });
    const coffeeBtn = coffeeSection.createEl("a", {
      text: "\u2192 Buy Me a Coffee",
      href: "https://buymeacoffee.com/rvzen"
    });
    coffeeBtn.addClass("support-link");
    const otherSection = contentEl.createDiv("support-section");
    otherSection.createEl("h3", { text: "\u{1F31F} Other Ways to Support" });
    const otherList = otherSection.createEl("ul");
    otherList.createEl("li", { text: "\u2B50 Star the GitHub repository" });
    otherList.createEl("li", { text: "\u{1F41B} Report bugs and issues" });
    otherList.createEl("li", { text: "\u{1F4A1} Suggest new features" });
    otherList.createEl("li", { text: "\u{1F4DD} Improve documentation" });
    otherList.createEl("li", { text: "\u{1F5E3}\uFE0F Tell others about the plugin" });
    const footer = contentEl.createDiv("support-footer");
    footer.style.marginTop = "20px";
    footer.style.padding = "15px";
    footer.style.background = "var(--background-secondary)";
    footer.style.borderRadius = "8px";
    footer.style.textAlign = "center";
    footer.createEl("p", { text: "Thank you for your support! \u{1F64F}" });
    footer.createEl("small", { text: "All donations help maintain and improve this plugin" });
    const closeBtn = contentEl.createEl("button", { text: "Close" });
    closeBtn.style.marginTop = "20px";
    closeBtn.style.width = "100%";
    closeBtn.onclick = () => this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ReportModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Expense Report" });
    const form = contentEl.createDiv();
    new import_obsidian.Setting(form).setName("Start Month").setDesc("YYYY-MM format").addText((text) => {
      text.setValue((0, import_obsidian.moment)().subtract(5, "months").format("YYYY-MM"));
      text.inputEl.id = "report-start";
    });
    new import_obsidian.Setting(form).setName("End Month").setDesc("YYYY-MM format").addText((text) => {
      text.setValue((0, import_obsidian.moment)().format("YYYY-MM"));
      text.inputEl.id = "report-end";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const generateBtn = buttonDiv.createEl("button", { text: "Generate", cls: "mod-cta" });
    generateBtn.onclick = () => {
      this.generateReport();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  async generateReport() {
    const startMonth = document.getElementById("report-start").value;
    const endMonth = document.getElementById("report-end").value;
    const report = this.buildReport(startMonth, endMonth);
    const folderPath = `${this.plugin.settings.monthlyNotesFolder}/Expense Reports`;
    const fileName = `Expense Report ${startMonth} to ${endMonth}.md`;
    const filePath = `${folderPath}/${fileName}`;
    try {
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (!folder) {
        await this.app.vault.createFolder(folderPath);
      }
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian.TFile) {
        await this.app.vault.modify(existingFile, report);
        new import_obsidian.Notice("Report updated");
      } else {
        await this.app.vault.create(filePath, report);
        new import_obsidian.Notice("Report generated");
      }
      this.close();
    } catch (error) {
      console.error("Error creating report:", error);
      new import_obsidian.Notice("Error creating report");
    }
  }
  buildReport(startMonth, endMonth) {
    let report = `# Expense Report

`;
    report += `**Period:** ${(0, import_obsidian.moment)(startMonth, "YYYY-MM").format("MMM YYYY")} - ${(0, import_obsidian.moment)(endMonth, "YYYY-MM").format("MMM YYYY")}

`;
    report += `**Generated:** ${(0, import_obsidian.moment)().format("YYYY-MM-DD HH:mm")}

---

`;
    const start = (0, import_obsidian.moment)(startMonth, "YYYY-MM");
    const end = (0, import_obsidian.moment)(endMonth, "YYYY-MM");
    let totalAmount = 0;
    let totalPaid = 0;
    let totalUnpaid = 0;
    report += `## Monthly Breakdown

`;
    let current = start.clone();
    while (current.isSameOrBefore(end)) {
      const month = current.format("YYYY-MM");
      const expenses = this.plugin.getExpensesForMonth(month);
      const unpaid = this.plugin.getUnpaidExpenses(month);
      const monthTotal = expenses.reduce((sum, e) => sum + e.amount, 0);
      const monthPaid = expenses.filter((e) => {
        const payment = this.plugin.getPayment(e.id, month);
        return payment == null ? void 0 : payment.paid;
      }).reduce((sum, e) => sum + e.amount, 0);
      const monthUnpaid = monthTotal - monthPaid;
      totalAmount += monthTotal;
      totalPaid += monthPaid;
      totalUnpaid += monthUnpaid;
      report += `### ${current.format("MMMM YYYY")}

`;
      report += `- Total: $${monthTotal.toFixed(2)}
`;
      report += `- Paid: $${monthPaid.toFixed(2)}
`;
      report += `- Unpaid: $${monthUnpaid.toFixed(2)}
`;
      report += `- Expenses: ${expenses.length} (${unpaid.length} unpaid)

`;
      current.add(1, "month");
    }
    report += `## Summary

`;
    report += `- **Total Amount:** $${totalAmount.toFixed(2)}
`;
    report += `- **Total Paid:** $${totalPaid.toFixed(2)}
`;
    report += `- **Total Unpaid:** $${totalUnpaid.toFixed(2)}
`;
    report += `- **Payment Rate:** ${totalAmount > 0 ? (totalPaid / totalAmount * 100).toFixed(1) : 0}%

`;
    report += `## Expense Breakdown

`;
    const allExpenses = this.plugin.settings.recurringExpenses.filter((e) => !e.archived);
    allExpenses.forEach((expense) => {
      const payments = this.plugin.settings.monthlyPayments.filter(
        (p) => p.expenseId === expense.id && (0, import_obsidian.moment)(p.month, "YYYY-MM").isBetween(start, end, null, "[]")
      );
      const paidCount = payments.filter((p) => p.paid).length;
      const totalCount = payments.length;
      report += `### ${expense.name}

`;
      report += `- Amount: $${expense.amount.toFixed(2)}
`;
      report += `- Payment Method: ${expense.paymentMethod}
`;
      report += `- Paid: ${paidCount}/${totalCount} months
`;
      report += `- Total Paid: $${(paidCount * expense.amount).toFixed(2)}

`;
    });
    return report;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ExpenseTrackerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Monthly Expense Tracker Settings" });
    const supportSection = containerEl.createDiv("expense-tracker-support-section");
    supportSection.style.padding = "20px";
    supportSection.style.marginBottom = "20px";
    supportSection.style.background = "var(--background-secondary)";
    supportSection.style.borderRadius = "8px";
    supportSection.style.border = "2px solid var(--interactive-accent)";
    const supportHeader = supportSection.createEl("h3", { text: "\u{1F499} Support This Plugin" });
    supportHeader.style.marginTop = "0";
    supportHeader.style.color = "var(--interactive-accent)";
    supportSection.createEl("p", {
      text: "If you find this plugin helpful, consider supporting its development!"
    });
    const supportLinks = supportSection.createDiv();
    supportLinks.style.display = "flex";
    supportLinks.style.gap = "10px";
    supportLinks.style.flexWrap = "wrap";
    supportLinks.style.marginTop = "10px";
    const paypalBtn = supportLinks.createEl("a", {
      text: "\u{1F4B3} PayPal",
      href: "https://www.paypal.com/paypalme/VictorZenteno"
    });
    paypalBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600;";
    const cryptoBtn = supportLinks.createEl("button", {
      text: "\u{1FA99} USDC/USDT"
    });
    cryptoBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600; cursor: pointer; border: none;";
    cryptoBtn.onclick = () => {
      new SupportModal(this.app).open();
    };
    const coffeeBtn = supportLinks.createEl("a", {
      text: "\u2615 Coffee",
      href: "https://buymeacoffee.com/rvzen"
    });
    coffeeBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600;";
    const supportNote = supportSection.createEl("p", {
      text: "Your support helps maintain and improve this plugin. Thank you! \u{1F64F}"
    });
    supportNote.style.marginBottom = "0";
    supportNote.style.fontSize = "0.9em";
    supportNote.style.color = "var(--text-muted)";
    supportNote.style.marginTop = "10px";
    containerEl.createEl("hr", { cls: "expense-tracker-divider" });
    containerEl.createEl("h2", { text: "Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Monthly Notes Folder").setDesc("Folder where monthly expense notes will be created").addText((text) => text.setValue(this.plugin.settings.monthlyNotesFolder).onChange(async (value) => {
      this.plugin.settings.monthlyNotesFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Auto-create Monthly Notes").setDesc("Automatically create monthly notes when a new month begins").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoCreateMonthlyNotes).onChange(async (value) => {
      this.plugin.settings.autoCreateMonthlyNotes = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Show Status Bar").setDesc("Display unpaid expense count in status bar").addToggle((toggle) => toggle.setValue(this.plugin.settings.showStatusBar).onChange(async (value) => {
      this.plugin.settings.showStatusBar = value;
      await this.plugin.saveSettings();
      if (value && !this.plugin.statusBarItem) {
        this.plugin.statusBarItem = this.plugin.addStatusBarItem();
        this.plugin.updateStatusBar();
      } else if (!value && this.plugin.statusBarItem) {
        this.plugin.statusBarItem.remove();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Monthly Note Template").setDesc("Template for monthly notes. Use {{month}} and {{expenses}} as placeholders.").addTextArea((text) => {
      text.setValue(this.plugin.settings.monthlyNoteTemplate);
      text.inputEl.rows = 10;
      text.inputEl.cols = 50;
      text.onChange(async (value) => {
        this.plugin.settings.monthlyNoteTemplate = value;
        await this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcbiAgICBBcHAsXG4gICAgUGx1Z2luLFxuICAgIFBsdWdpblNldHRpbmdUYWIsXG4gICAgU2V0dGluZyxcbiAgICBURmlsZSxcbiAgICBXb3Jrc3BhY2VMZWFmLFxuICAgIEl0ZW1WaWV3LFxuICAgIE5vdGljZSxcbiAgICBNb2RhbCxcbiAgICBtb21lbnQsXG4gICAgTWVudVxufSBmcm9tICdvYnNpZGlhbic7XG5cbmludGVyZmFjZSBSZWN1cnJpbmdFeHBlbnNlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBkdWVEYXk6IG51bWJlcjsgLy8gRGF5IG9mIG1vbnRoICgxLTMxKVxuICAgIHBheW1lbnRNZXRob2Q6IHN0cmluZztcbiAgICBzdGFydERhdGU6IHN0cmluZzsgLy8gWVlZWS1NTSBmb3JtYXRcbiAgICBlbmREYXRlPzogc3RyaW5nOyAvLyBZWVlZLU1NIGZvcm1hdCwgb3B0aW9uYWxcbiAgICBhcmNoaXZlZDogYm9vbGVhbjtcbiAgICBjYXRlZ29yeT86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE1vbnRobHlQYXltZW50IHtcbiAgICBleHBlbnNlSWQ6IHN0cmluZztcbiAgICBtb250aDogc3RyaW5nOyAvLyBZWVlZLU1NIGZvcm1hdFxuICAgIHBhaWQ6IGJvb2xlYW47XG4gICAgcGFpZERhdGU/OiBzdHJpbmc7XG4gICAgY29uZmlybWF0aW9uTnVtYmVyPzogc3RyaW5nO1xuICAgIG5vdGVzPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgRXhwZW5zZVRyYWNrZXJTZXR0aW5ncyB7XG4gICAgcmVjdXJyaW5nRXhwZW5zZXM6IFJlY3VycmluZ0V4cGVuc2VbXTtcbiAgICBtb250aGx5UGF5bWVudHM6IE1vbnRobHlQYXltZW50W107XG4gICAgbW9udGhseU5vdGVzRm9sZGVyOiBzdHJpbmc7XG4gICAgbW9udGhseU5vdGVUZW1wbGF0ZTogc3RyaW5nO1xuICAgIGF1dG9DcmVhdGVNb250aGx5Tm90ZXM6IGJvb2xlYW47XG4gICAgc2hvd1N0YXR1c0JhcjogYm9vbGVhbjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRXhwZW5zZVRyYWNrZXJTZXR0aW5ncyA9IHtcbiAgICByZWN1cnJpbmdFeHBlbnNlczogW10sXG4gICAgbW9udGhseVBheW1lbnRzOiBbXSxcbiAgICBtb250aGx5Tm90ZXNGb2xkZXI6ICdNb250aGx5IEV4cGVuc2VzJyxcbiAgICBtb250aGx5Tm90ZVRlbXBsYXRlOiAnIyB7e21vbnRofX0gLSBNb250aGx5IEV4cGVuc2VzXFxuXFxuIyMgRXhwZW5zZSBUcmFja2VyXFxuXFxue3tleHBlbnNlc319XFxuXFxuLS0tXFxuKkdlbmVyYXRlZCBieSBNb250aGx5IEV4cGVuc2UgVHJhY2tlcionLFxuICAgIGF1dG9DcmVhdGVNb250aGx5Tm90ZXM6IHRydWUsXG4gICAgc2hvd1N0YXR1c0JhcjogdHJ1ZVxufTtcblxuY29uc3QgVklFV19UWVBFX0RBU0hCT0FSRCA9ICdleHBlbnNlLXRyYWNrZXItZGFzaGJvYXJkJztcbmNvbnN0IFZJRVdfVFlQRV9DQUxFTkRBUiA9ICdleHBlbnNlLXRyYWNrZXItY2FsZW5kYXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBFeHBlbnNlVHJhY2tlclNldHRpbmdzO1xuICAgIHN0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHZpZXdzXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgICAgICAgVklFV19UWVBFX0RBU0hCT0FSRCxcbiAgICAgICAgICAgIChsZWFmKSA9PiBuZXcgRGFzaGJvYXJkVmlldyhsZWFmLCB0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ3dhbGxldCcsICdNb250aGx5IEV4cGVuc2UgVHJhY2tlcicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVEYXNoYm9hcmRWaWV3KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBjb21tYW5kc1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLWV4cGVuc2UtZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIG5hbWU6ICdPcGVuIEV4cGVuc2UgRGFzaGJvYXJkJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZURhc2hib2FyZFZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWRkLXJlY3VycmluZy1leHBlbnNlJyxcbiAgICAgICAgICAgIG5hbWU6ICdBZGQgUmVjdXJyaW5nIEV4cGVuc2UnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQWRkRXhwZW5zZU1vZGFsKHRoaXMuYXBwLCB0aGlzLCBudWxsKS5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2NyZWF0ZS1jdXJyZW50LW1vbnRoLW5vdGUnLFxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBDdXJyZW50IE1vbnRoIE5vdGUnLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TW9udGggPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU1vbnRobHlOb3RlKGN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2dlbmVyYXRlLWV4cGVuc2UtcmVwb3J0JyxcbiAgICAgICAgICAgIG5hbWU6ICdHZW5lcmF0ZSBFeHBlbnNlIFJlcG9ydCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBSZXBvcnRNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGF0dXMgYmFyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dTdGF0dXNCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF1dG8tY3JlYXRlIG1vbnRobHkgbm90ZSBpZiBuZWVkZWRcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXV0b0NyZWF0ZU1vbnRobHlOb3Rlcykge1xuICAgICAgICAgICAgdGhpcy5jaGVja0FuZENyZWF0ZU1vbnRobHlOb3RlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR0aW5ncyB0YWJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBFeHBlbnNlVHJhY2tlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnTW9udGhseSBFeHBlbnNlIFRyYWNrZXIgcGx1Z2luIGxvYWRlZCcpO1xuICAgIH1cblxuICAgIGFzeW5jIGFjdGl2YXRlRGFzaGJvYXJkVmlldygpIHtcbiAgICAgICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuICAgICAgICBcbiAgICAgICAgbGV0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9EQVNIQk9BUkQpWzBdO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgICBjb25zdCByaWdodExlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCByaWdodExlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0RBU0hCT0FSRCxcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGVhZiA9IHJpZ2h0TGVhZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsZWFmKSB7XG4gICAgICAgICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrQW5kQ3JlYXRlTW9udGhseU5vdGUoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICBjb25zdCBtb250aGx5Tm90ZSA9IGF3YWl0IHRoaXMuZ2V0TW9udGhseU5vdGVGaWxlKGN1cnJlbnRNb250aCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIW1vbnRobHlOb3RlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU1vbnRobHlOb3RlKGN1cnJlbnRNb250aCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVNb250aGx5Tm90ZShtb250aDogc3RyaW5nKTogUHJvbWlzZTxURmlsZT4ge1xuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5zZXR0aW5ncy5tb250aGx5Tm90ZXNGb2xkZXI7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7bW9udGh9Lm1kYDtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWA7XG5cbiAgICAgICAgLy8gRW5zdXJlIGZvbGRlciBleGlzdHNcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuICAgICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYE1vbnRobHkgbm90ZSBmb3IgJHttb250aH0gYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IGV4cGVuc2VzIGZvciB0aGlzIG1vbnRoXG4gICAgICAgIGNvbnN0IGV4cGVuc2VzID0gdGhpcy5nZXRFeHBlbnNlc0Zvck1vbnRoKG1vbnRoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvcHkgdW5wYWlkIGV4cGVuc2VzIGZyb20gcHJldmlvdXMgbW9udGhcbiAgICAgICAgY29uc3QgcHJldk1vbnRoID0gbW9tZW50KG1vbnRoLCAnWVlZWS1NTScpLnN1YnRyYWN0KDEsICdtb250aCcpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICBjb25zdCB1bnBhaWRGcm9tUHJldiA9IHRoaXMuZ2V0VW5wYWlkRXhwZW5zZXMocHJldk1vbnRoKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBleHBlbnNlIGxpc3RcbiAgICAgICAgbGV0IGV4cGVuc2VMaXN0ID0gJyMjIEN1cnJlbnQgTW9udGggRXhwZW5zZXNcXG5cXG4nO1xuICAgICAgICBleHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudCA9IHRoaXMuZ2V0UGF5bWVudChleHBlbnNlLmlkLCBtb250aCk7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBwYXltZW50Py5wYWlkID8gJ3gnIDogJyAnO1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzSWNvbiA9IHBheW1lbnQ/LnBhaWQgPyAnXHUyNzA1JyA6ICdcdTJCMUMnO1xuICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gYC0gWyR7c3RhdHVzfV0gJHtzdGF0dXNJY29ufSAqKiR7ZXhwZW5zZS5uYW1lfSoqIC0gJCR7ZXhwZW5zZS5hbW91bnQudG9GaXhlZCgyKX0gLSBEdWU6ICR7ZXhwZW5zZS5kdWVEYXl9IC0gTWV0aG9kOiAke2V4cGVuc2UucGF5bWVudE1ldGhvZH1cXG5gO1xuICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gYCAgLSBJRDogXFxgJHtleHBlbnNlLmlkfVxcYFxcbmA7XG4gICAgICAgICAgICBpZiAocGF5bWVudD8uY29uZmlybWF0aW9uTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gYCAgLSBDb25maXJtYXRpb246ICR7cGF5bWVudC5jb25maXJtYXRpb25OdW1iZXJ9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV4cGVuc2VMaXN0ICs9ICdcXG4nO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodW5wYWlkRnJvbVByZXYubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gJ1xcbiMjIFVucGFpZCBmcm9tIFByZXZpb3VzIE1vbnRoXFxuXFxuJztcbiAgICAgICAgICAgIHVucGFpZEZyb21QcmV2LmZvckVhY2goZXhwZW5zZSA9PiB7XG4gICAgICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gYC0gWyBdIFx1MjZBMFx1RkUwRiAqKiR7ZXhwZW5zZS5uYW1lfSoqIC0gJCR7ZXhwZW5zZS5hbW91bnQudG9GaXhlZCgyKX0gLSBPVkVSRFVFXFxuYDtcbiAgICAgICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgICAtIElEOiBcXGAke2V4cGVuc2UuaWR9XFxgXFxuXFxuYDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBubyBleHBlbnNlcywgYWRkIGEgaGVscGZ1bCBtZXNzYWdlXG4gICAgICAgIGlmIChleHBlbnNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGV4cGVuc2VMaXN0ICs9ICdcXG4qTm8gZXhwZW5zZXMgc2V0IHVwIGZvciB0aGlzIG1vbnRoIHlldC4gQ2xpY2sgXCIqKisgQWRkIEV4cGVuc2UqKlwiIGluIHRoZSBkYXNoYm9hcmQgdG8gYWRkIHJlY3VycmluZyBleHBlbnNlcy4qXFxuXFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIGNvbnRlbnQgZnJvbSB0ZW1wbGF0ZVxuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5zZXR0aW5ncy5tb250aGx5Tm90ZVRlbXBsYXRlXG4gICAgICAgICAgICAucmVwbGFjZSgne3ttb250aH19JywgbW9tZW50KG1vbnRoLCAnWVlZWS1NTScpLmZvcm1hdCgnTU1NTSBZWVlZJykpXG4gICAgICAgICAgICAucmVwbGFjZSgne3tleHBlbnNlc319JywgZXhwZW5zZUxpc3QpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBmaWxlXG4gICAgICAgIGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBDcmVhdGVkIG1vbnRobHkgbm90ZSBmb3IgJHttb250aH1gKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmaWxlIGFzIFRGaWxlO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE1vbnRobHlOb3RlRmlsZShtb250aDogc3RyaW5nKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0aGlzLnNldHRpbmdzLm1vbnRobHlOb3Rlc0ZvbGRlcn0vJHttb250aH0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgcmV0dXJuIGZpbGUgaW5zdGFuY2VvZiBURmlsZSA/IGZpbGUgOiBudWxsO1xuICAgIH1cblxuICAgIGdldEV4cGVuc2VzRm9yTW9udGgobW9udGg6IHN0cmluZyk6IFJlY3VycmluZ0V4cGVuc2VbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnJlY3VycmluZ0V4cGVuc2VzLmZpbHRlcihleHBlbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChleHBlbnNlLmFyY2hpdmVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2VTdGFydCA9IG1vbWVudChleHBlbnNlLnN0YXJ0RGF0ZSwgJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2VFbmQgPSBleHBlbnNlLmVuZERhdGUgPyBtb21lbnQoZXhwZW5zZS5lbmREYXRlLCAnWVlZWS1NTScpIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrTW9udGggPSBtb21lbnQobW9udGgsICdZWVlZLU1NJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFmdGVyU3RhcnQgPSBjaGVja01vbnRoLmlzU2FtZU9yQWZ0ZXIoZXhwZW5zZVN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUVuZCA9ICFleHBlbnNlRW5kIHx8IGNoZWNrTW9udGguaXNTYW1lT3JCZWZvcmUoZXhwZW5zZUVuZCk7XG5cbiAgICAgICAgICAgIHJldHVybiBhZnRlclN0YXJ0ICYmIGJlZm9yZUVuZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VW5wYWlkRXhwZW5zZXMobW9udGg6IHN0cmluZyk6IFJlY3VycmluZ0V4cGVuc2VbXSB7XG4gICAgICAgIGNvbnN0IGV4cGVuc2VzID0gdGhpcy5nZXRFeHBlbnNlc0Zvck1vbnRoKG1vbnRoKTtcbiAgICAgICAgcmV0dXJuIGV4cGVuc2VzLmZpbHRlcihleHBlbnNlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLmdldFBheW1lbnQoZXhwZW5zZS5pZCwgbW9udGgpO1xuICAgICAgICAgICAgcmV0dXJuICFwYXltZW50IHx8ICFwYXltZW50LnBhaWQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFBheW1lbnQoZXhwZW5zZUlkOiBzdHJpbmcsIG1vbnRoOiBzdHJpbmcpOiBNb250aGx5UGF5bWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLm1vbnRobHlQYXltZW50cy5maW5kKFxuICAgICAgICAgICAgcCA9PiBwLmV4cGVuc2VJZCA9PT0gZXhwZW5zZUlkICYmIHAubW9udGggPT09IG1vbnRoXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgbWFya0V4cGVuc2VQYWlkKGV4cGVuc2VJZDogc3RyaW5nLCBtb250aDogc3RyaW5nLCBwYWlkOiBib29sZWFuLCBjb25maXJtYXRpb25OdW1iZXI/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQYXltZW50ID0gdGhpcy5nZXRQYXltZW50KGV4cGVuc2VJZCwgbW9udGgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGV4aXN0aW5nUGF5bWVudCkge1xuICAgICAgICAgICAgZXhpc3RpbmdQYXltZW50LnBhaWQgPSBwYWlkO1xuICAgICAgICAgICAgZXhpc3RpbmdQYXltZW50LnBhaWREYXRlID0gcGFpZCA/IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgZXhpc3RpbmdQYXltZW50LmNvbmZpcm1hdGlvbk51bWJlciA9IGNvbmZpcm1hdGlvbk51bWJlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MubW9udGhseVBheW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIGV4cGVuc2VJZCxcbiAgICAgICAgICAgICAgICBtb250aCxcbiAgICAgICAgICAgICAgICBwYWlkLFxuICAgICAgICAgICAgICAgIHBhaWREYXRlOiBwYWlkID8gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29uZmlybWF0aW9uTnVtYmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkUmVjdXJyaW5nRXhwZW5zZShleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMucHVzaChleHBlbnNlKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgbmV3IE5vdGljZShgQWRkZWQgcmVjdXJyaW5nIGV4cGVuc2U6ICR7ZXhwZW5zZS5uYW1lfWApO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVJlY3VycmluZ0V4cGVuc2UoZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMuZmluZEluZGV4KGUgPT4gZS5pZCA9PT0gZXhwZW5zZS5pZCk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXNbaW5kZXhdID0gZXhwZW5zZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBVcGRhdGVkIGV4cGVuc2U6ICR7ZXhwZW5zZS5uYW1lfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgYXJjaGl2ZUV4cGVuc2UoZXhwZW5zZUlkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZXhwZW5zZSA9IHRoaXMuc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMuZmluZChlID0+IGUuaWQgPT09IGV4cGVuc2VJZCk7XG4gICAgICAgIGlmIChleHBlbnNlKSB7XG4gICAgICAgICAgICBleHBlbnNlLmFyY2hpdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBBcmNoaXZlZCBleHBlbnNlOiAke2V4cGVuc2UubmFtZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZUV4cGVuc2UoZXhwZW5zZUlkOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcyA9IHRoaXMuc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMuZmlsdGVyKGUgPT4gZS5pZCAhPT0gZXhwZW5zZUlkKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5tb250aGx5UGF5bWVudHMgPSB0aGlzLnNldHRpbmdzLm1vbnRobHlQYXltZW50cy5maWx0ZXIocCA9PiBwLmV4cGVuc2VJZCAhPT0gZXhwZW5zZUlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgbmV3IE5vdGljZSgnRXhwZW5zZSBkZWxldGVkJyk7XG4gICAgfVxuXG4gICAgdXBkYXRlU3RhdHVzQmFyKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdHVzQmFySXRlbSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICBjb25zdCB1bnBhaWQgPSB0aGlzLmdldFVucGFpZEV4cGVuc2VzKGN1cnJlbnRNb250aCk7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5nZXRFeHBlbnNlc0Zvck1vbnRoKGN1cnJlbnRNb250aCkubGVuZ3RoO1xuXG4gICAgICAgIGlmICh1bnBhaWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLnRleHRDb250ZW50ID0gYFx1RDgzRFx1RENCMyAke3VucGFpZC5sZW5ndGh9LyR7dG90YWx9IHVucGFpZGA7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0uY2xhc3NMaXN0LmFkZCgnZXhwZW5zZS10cmFja2VyLXVucGFpZCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRvdGFsID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLnRleHRDb250ZW50ID0gYFx1RDgzRFx1RENCMyBBbGwgcGFpZGA7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnZXhwZW5zZS10cmFja2VyLXVucGFpZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLnRleHRDb250ZW50ID0gJ1x1RDgzRFx1RENCMyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZnJlc2ggZGFzaGJvYXJkIGlmIG9wZW5cbiAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfREFTSEJPQVJEKTtcbiAgICAgICAgbGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgRGFzaGJvYXJkVmlldykge1xuICAgICAgICAgICAgICAgIGxlYWYudmlldy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9udGhseSBFeHBlbnNlIFRyYWNrZXIgcGx1Z2luIHVubG9hZGVkJyk7XG4gICAgfVxufVxuXG4vLyBEYXNoYm9hcmQgVmlld1xuY2xhc3MgRGFzaGJvYXJkVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcbiAgICBjdXJyZW50TW9udGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9udGggPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gVklFV19UWVBFX0RBU0hCT0FSRDtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gJ0V4cGVuc2UgRGFzaGJvYXJkJztcbiAgICB9XG5cbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnd2FsbGV0JztcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cblxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2V4cGVuc2UtdHJhY2tlci1kYXNoYm9hcmQnKTtcblxuICAgICAgICAvLyBIZWFkZXJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdignZXhwZW5zZS10cmFja2VyLWhlYWRlcicpO1xuICAgICAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTW9udGhseSBFeHBlbnNlIFRyYWNrZXInIH0pO1xuXG4gICAgICAgIC8vIE1vbnRoIHNlbGVjdG9yXG4gICAgICAgIGNvbnN0IG1vbnRoU2VsZWN0b3IgPSBjb250YWluZXIuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItbW9udGgtc2VsZWN0b3InKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByZXZCdG4gPSBtb250aFNlbGVjdG9yLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTI1QzAnIH0pO1xuICAgICAgICBwcmV2QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IG1vbWVudCh0aGlzLmN1cnJlbnRNb250aCwgJ1lZWVktTU0nKS5zdWJ0cmFjdCgxLCAnbW9udGgnKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG1vbnRoRGlzcGxheSA9IG1vbnRoU2VsZWN0b3IuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgdGV4dDogbW9tZW50KHRoaXMuY3VycmVudE1vbnRoLCAnWVlZWS1NTScpLmZvcm1hdCgnTU1NTSBZWVlZJyksXG4gICAgICAgICAgICBjbHM6ICdleHBlbnNlLXRyYWNrZXItbW9udGgtZGlzcGxheSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbmV4dEJ0biA9IG1vbnRoU2VsZWN0b3IuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1MjVCNicgfSk7XG4gICAgICAgIG5leHRCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gbW9tZW50KHRoaXMuY3VycmVudE1vbnRoLCAnWVlZWS1NTScpLmFkZCgxLCAnbW9udGgnKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHRvZGF5QnRuID0gbW9udGhTZWxlY3Rvci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnVG9kYXknIH0pO1xuICAgICAgICB0b2RheUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9udGggPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFN1bW1hcnkgc3RhdHNcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSB0aGlzLnBsdWdpbi5nZXRFeHBlbnNlc0Zvck1vbnRoKHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29uc3QgdW5wYWlkID0gdGhpcy5wbHVnaW4uZ2V0VW5wYWlkRXhwZW5zZXModGhpcy5jdXJyZW50TW9udGgpO1xuICAgICAgICBjb25zdCB0b3RhbEFtb3VudCA9IGV4cGVuc2VzLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlLmFtb3VudCwgMCk7XG4gICAgICAgIGNvbnN0IHBhaWRBbW91bnQgPSBleHBlbnNlc1xuICAgICAgICAgICAgLmZpbHRlcihlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50ID0gdGhpcy5wbHVnaW4uZ2V0UGF5bWVudChlLmlkLCB0aGlzLmN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheW1lbnQ/LnBhaWQ7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlLmFtb3VudCwgMCk7XG5cbiAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1zdW1tYXJ5Jyk7XG4gICAgICAgIHN1bW1hcnkuY3JlYXRlRGl2KCdzdW1tYXJ5LWl0ZW0nKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktbGFiZWxcIj5Ub3RhbCBFeHBlbnNlczo8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktdmFsdWVcIj4ke2V4cGVuc2VzLmxlbmd0aH08L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICAgIHN1bW1hcnkuY3JlYXRlRGl2KCdzdW1tYXJ5LWl0ZW0nKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktbGFiZWxcIj5VbnBhaWQ6PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdW1tYXJ5LXZhbHVlIHVucGFpZFwiPiR7dW5wYWlkLmxlbmd0aH08L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICAgIHN1bW1hcnkuY3JlYXRlRGl2KCdzdW1tYXJ5LWl0ZW0nKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktbGFiZWxcIj5Ub3RhbCBBbW91bnQ6PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdW1tYXJ5LXZhbHVlXCI+JCR7dG90YWxBbW91bnQudG9GaXhlZCgyKX08L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICAgIHN1bW1hcnkuY3JlYXRlRGl2KCdzdW1tYXJ5LWl0ZW0nKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktbGFiZWxcIj5QYWlkOjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS12YWx1ZSBwYWlkXCI+JCR7cGFpZEFtb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj5cbiAgICAgICAgYDtcblxuICAgICAgICAvLyBBY3Rpb24gYnV0dG9uc1xuICAgICAgICBjb25zdCBhY3Rpb25zID0gY29udGFpbmVyLmNyZWF0ZURpdignZXhwZW5zZS10cmFja2VyLWFjdGlvbnMnKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFkZEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysgQWRkIEV4cGVuc2UnLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICAgICAgYWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBuZXcgQWRkRXhwZW5zZU1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgbnVsbCkub3BlbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNyZWF0ZU5vdGVCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQ4M0RcdURDQzQgQ3JlYXRlIE1vbnRobHkgTm90ZScgfSk7XG4gICAgICAgIGNyZWF0ZU5vdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmNyZWF0ZU1vbnRobHlOb3RlKHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXBvcnRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQ4M0RcdURDQ0EgR2VuZXJhdGUgUmVwb3J0JyB9KTtcbiAgICAgICAgcmVwb3J0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBuZXcgUmVwb3J0TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc3VwcG9ydEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDgzRFx1REM5OSBTdXBwb3J0IFBsdWdpbicgfSk7XG4gICAgICAgIHN1cHBvcnRCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIG5ldyBTdXBwb3J0TW9kYWwodGhpcy5hcHApLm9wZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgc3VwcG9ydEJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuICAgICAgICBzdXBwb3J0QnRuLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtb24tYWNjZW50KSc7XG5cblxuICAgICAgICAvLyBFeHBlbnNlIGxpc3RcbiAgICAgICAgY29uc3QgZXhwZW5zZUxpc3QgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhwZW5zZS10cmFja2VyLWxpc3QnIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGV4cGVuc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXhwZW5zZUxpc3QuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItZW1wdHknKS5zZXRUZXh0KCdObyBleHBlbnNlcyBmb3IgdGhpcyBtb250aCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gR3JvdXAgYnkgcGFpZCBzdGF0dXNcbiAgICAgICAgICAgIGNvbnN0IHBhaWRFeHBlbnNlcyA9IGV4cGVuc2VzLmZpbHRlcihlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50ID0gdGhpcy5wbHVnaW4uZ2V0UGF5bWVudChlLmlkLCB0aGlzLmN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheW1lbnQ/LnBhaWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVucGFpZEV4cGVuc2VzID0gZXhwZW5zZXMuZmlsdGVyKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLnBsdWdpbi5nZXRQYXltZW50KGUuaWQsIHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXBheW1lbnQ/LnBhaWQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU2hvdyB1bnBhaWQgZmlyc3RcbiAgICAgICAgICAgIGlmICh1bnBhaWRFeHBlbnNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZXhwZW5zZUxpc3QuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVW5wYWlkJyB9KTtcbiAgICAgICAgICAgICAgICB1bnBhaWRFeHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckV4cGVuc2VJdGVtKGV4cGVuc2VMaXN0LCBleHBlbnNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVGhlbiBwYWlkXG4gICAgICAgICAgICBpZiAocGFpZEV4cGVuc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBleHBlbnNlTGlzdC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdQYWlkJyB9KTtcbiAgICAgICAgICAgICAgICBwYWlkRXhwZW5zZXMuZm9yRWFjaChleHBlbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFeHBlbnNlSXRlbShleHBlbnNlTGlzdCwgZXhwZW5zZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcmNoaXZlZCBleHBlbnNlcyBzZWN0aW9uXG4gICAgICAgIGNvbnN0IGFyY2hpdmVkRXhwZW5zZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maWx0ZXIoZSA9PiBlLmFyY2hpdmVkKTtcbiAgICAgICAgaWYgKGFyY2hpdmVkRXhwZW5zZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYXJjaGl2ZWRTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdignZXhwZW5zZS10cmFja2VyLWFyY2hpdmVkJyk7XG4gICAgICAgICAgICBjb25zdCBhcmNoaXZlZEhlYWRlciA9IGFyY2hpdmVkU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBcmNoaXZlZCBFeHBlbnNlcycgfSk7XG4gICAgICAgICAgICBhcmNoaXZlZEhlYWRlci5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGFyY2hpdmVkTGlzdCA9IGFyY2hpdmVkU2VjdGlvbi5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1hcmNoaXZlZC1saXN0Jyk7XG4gICAgICAgICAgICBhcmNoaXZlZExpc3Quc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXJjaGl2ZWRIZWFkZXIub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBhcmNoaXZlZExpc3Quc3R5bGUuZGlzcGxheSA9IGFyY2hpdmVkTGlzdC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXJjaGl2ZWRFeHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBhcmNoaXZlZExpc3QuY3JlYXRlRGl2KCdleHBlbnNlLWl0ZW0gYXJjaGl2ZWQnKTtcbiAgICAgICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImV4cGVuc2UtbmFtZVwiPiR7ZXhwZW5zZS5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXhwZW5zZS1kZXRhaWxzXCI+JCR7ZXhwZW5zZS5hbW91bnQudG9GaXhlZCgyKX0gLSAke2V4cGVuc2UucGF5bWVudE1ldGhvZH08L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGl0ZW0ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ1VuYXJjaGl2ZScpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVuc2UuYXJjaGl2ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnRGVsZXRlJykub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGVsZXRlRXhwZW5zZShleHBlbnNlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50IGFzIE1vdXNlRXZlbnQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckV4cGVuc2VJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UpIHtcbiAgICAgICAgY29uc3QgcGF5bWVudCA9IHRoaXMucGx1Z2luLmdldFBheW1lbnQoZXhwZW5zZS5pZCwgdGhpcy5jdXJyZW50TW9udGgpO1xuICAgICAgICBjb25zdCBpc1BhaWQgPSBwYXltZW50Py5wYWlkIHx8IGZhbHNlO1xuICAgICAgICBjb25zdCBpc092ZXJkdWUgPSBleHBlbnNlLmR1ZURheSA8IHBhcnNlSW50KG1vbWVudCgpLmZvcm1hdCgnRCcpKSAmJiAhaXNQYWlkICYmIHRoaXMuY3VycmVudE1vbnRoID09PSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0nKTtcblxuICAgICAgICBjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdignZXhwZW5zZS1pdGVtJyk7XG4gICAgICAgIGlmIChpc1BhaWQpIGl0ZW0uYWRkQ2xhc3MoJ3BhaWQnKTtcbiAgICAgICAgaWYgKGlzT3ZlcmR1ZSkgaXRlbS5hZGRDbGFzcygnb3ZlcmR1ZScpO1xuXG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gaXRlbS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBpc1BhaWQ7XG4gICAgICAgIGNoZWNrYm94Lm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGlmICghaXNQYWlkKSB7XG4gICAgICAgICAgICAgICAgbmV3IE1hcmtQYWlkTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBleHBlbnNlLCB0aGlzLmN1cnJlbnRNb250aCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLm1hcmtFeHBlbnNlUGFpZChleHBlbnNlLmlkLCB0aGlzLmN1cnJlbnRNb250aCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBpdGVtLmNyZWF0ZURpdignZXhwZW5zZS1jb250ZW50Jyk7XG4gICAgICAgIGNvbnN0IG5hbWVEaXYgPSBjb250ZW50LmNyZWF0ZURpdignZXhwZW5zZS1uYW1lJyk7XG4gICAgICAgIG5hbWVEaXYuc2V0VGV4dChleHBlbnNlLm5hbWUpO1xuICAgICAgICBpZiAoaXNPdmVyZHVlKSB7XG4gICAgICAgICAgICBuYW1lRGl2LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIFx1MjZBMFx1RkUwRiBPVkVSRFVFJywgY2xzOiAnb3ZlcmR1ZS1iYWRnZScgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZXRhaWxzID0gY29udGVudC5jcmVhdGVEaXYoJ2V4cGVuc2UtZGV0YWlscycpO1xuICAgICAgICBkZXRhaWxzLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICQke2V4cGVuc2UuYW1vdW50LnRvRml4ZWQoMil9IFx1MjAyMiBEdWU6ICR7ZXhwZW5zZS5kdWVEYXl9IFx1MjAyMiAke2V4cGVuc2UucGF5bWVudE1ldGhvZH1cbiAgICAgICAgICAgICR7cGF5bWVudD8uY29uZmlybWF0aW9uTnVtYmVyID8gYDxicj5Db25maXJtYXRpb246ICR7cGF5bWVudC5jb25maXJtYXRpb25OdW1iZXJ9YCA6ICcnfVxuICAgICAgICAgICAgJHtwYXltZW50Py5wYWlkRGF0ZSA/IGA8YnI+UGFpZDogJHtwYXltZW50LnBhaWREYXRlfWAgOiAnJ31cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoJ2V4cGVuc2UtYWN0aW9ucycpO1xuICAgICAgICBjb25zdCBtZW51QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHUyMkVFJyB9KTtcbiAgICAgICAgbWVudUJ0bi5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0VkaXQnKS5zZXRJY29uKCdwZW5jaWwnKS5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEFkZEV4cGVuc2VNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIGV4cGVuc2UpLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnVmlldyBIaXN0b3J5Jykuc2V0SWNvbignaGlzdG9yeScpLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXcgSGlzdG9yeU1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgZXhwZW5zZSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdBcmNoaXZlJykuc2V0SWNvbignYXJjaGl2ZScpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcmNoaXZlRXhwZW5zZShleHBlbnNlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpLnNldEljb24oJ3RyYXNoJykub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRlbGV0ZUV4cGVuc2UoZXhwZW5zZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChlIGFzIE1vdXNlRXZlbnQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgICAgIC8vIENsZWFudXBcbiAgICB9XG59XG5cbi8vIEFkZC9FZGl0IEV4cGVuc2UgTW9kYWxcbmNsYXNzIEFkZEV4cGVuc2VNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcbiAgICBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlIHwgbnVsbDtcbiAgICBvblN1Ym1pdDogKGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4sIGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UgfCBudWxsKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmV4cGVuc2UgPSBleHBlbnNlO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMuZXhwZW5zZSA/ICdFZGl0IEV4cGVuc2UnIDogJ0FkZCBSZWN1cnJpbmcgRXhwZW5zZScgfSk7XG5cbiAgICAgICAgY29uc3QgZm9ybSA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2V4cGVuc2UtZm9ybScpO1xuXG4gICAgICAgIC8vIE5hbWVcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdFeHBlbnNlIE5hbWUnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/Lm5hbWUgfHwgJycpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLW5hbWUnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQW1vdW50XG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnQW1vdW50JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5leHBlbnNlPy5hbW91bnQudG9TdHJpbmcoKSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3RlcCA9ICcwLjAxJztcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAnZXhwZW5zZS1hbW91bnQnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRHVlIERheVxuICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0R1ZSBEYXkgb2YgTW9udGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJzEtMzEnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/LmR1ZURheS50b1N0cmluZygpIHx8ICcxJyk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwubWluID0gJzEnO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5tYXggPSAnMzEnO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWR1ZS1kYXknO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUGF5bWVudCBNZXRob2RcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdQYXltZW50IE1ldGhvZCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8ucGF5bWVudE1ldGhvZCB8fCAnJyk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmlkID0gJ2V4cGVuc2UtcGF5bWVudC1tZXRob2QnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU3RhcnQgRGF0ZVxuICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1N0YXJ0IE1vbnRoJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdZWVlZLU1NIGZvcm1hdCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8uc3RhcnREYXRlIHx8IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAnZXhwZW5zZS1zdGFydC1kYXRlJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVuZCBEYXRlXG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5kIE1vbnRoIChPcHRpb25hbCknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0gZm9ybWF0IC0gbGVhdmUgZW1wdHkgZm9yIG9uZ29pbmcnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/LmVuZERhdGUgfHwgJycpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWVuZC1kYXRlJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENhdGVnb3J5XG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2F0ZWdvcnkgKE9wdGlvbmFsKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8uY2F0ZWdvcnkgfHwgJycpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWNhdGVnb3J5JztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJ1dHRvbnNcbiAgICAgICAgY29uc3QgYnV0dG9uRGl2ID0gY29udGVudEVsLmNyZWF0ZURpdignbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU2F2ZScsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgICAgICBzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVN1Ym1pdCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICAgICAgY2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlU3VibWl0KCkge1xuICAgICAgICBjb25zdCBuYW1lID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLW5hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdCgoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2UtYW1vdW50JykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpO1xuICAgICAgICBjb25zdCBkdWVEYXkgPSBwYXJzZUludCgoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2UtZHVlLWRheScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1wYXltZW50LW1ldGhvZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBjb25zdCBzdGFydERhdGUgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2Utc3RhcnQtZGF0ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBjb25zdCBlbmREYXRlID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLWVuZC1kYXRlJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLWNhdGVnb3J5JykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG5cbiAgICAgICAgaWYgKCFuYW1lIHx8ICFhbW91bnQgfHwgIWR1ZURheSB8fCAhcGF5bWVudE1ldGhvZCB8fCAhc3RhcnREYXRlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZmlsbCBpbiBhbGwgcmVxdWlyZWQgZmllbGRzJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlID0ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuZXhwZW5zZT8uaWQgfHwgYGV4cC0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICBkdWVEYXksXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICAgICAgZW5kRGF0ZTogZW5kRGF0ZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnkgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgYXJjaGl2ZWQ6IHRoaXMuZXhwZW5zZT8uYXJjaGl2ZWQgfHwgZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5leHBlbnNlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVSZWN1cnJpbmdFeHBlbnNlKGV4cGVuc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYWRkUmVjdXJyaW5nRXhwZW5zZShleHBlbnNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vLyBNYXJrIFBhaWQgTW9kYWxcbmNsYXNzIE1hcmtQYWlkTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW47XG4gICAgZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZTtcbiAgICBtb250aDogc3RyaW5nO1xuICAgIG9uQ29tcGxldGU6ICgpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4sIGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UsIG1vbnRoOiBzdHJpbmcsIG9uQ29tcGxldGU6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZXhwZW5zZSA9IGV4cGVuc2U7XG4gICAgICAgIHRoaXMubW9udGggPSBtb250aDtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlID0gb25Db21wbGV0ZTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTWFyayBhcyBQYWlkJyB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgJHt0aGlzLmV4cGVuc2UubmFtZX0gLSAkJHt0aGlzLmV4cGVuc2UuYW1vdW50LnRvRml4ZWQoMil9YCB9KTtcblxuICAgICAgICBjb25zdCBmb3JtID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ29uZmlybWF0aW9uIE51bWJlciAoT3B0aW9uYWwpJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdjb25maXJtYXRpb24tbnVtYmVyJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ21vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25EaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ01hcmsgUGFpZCcsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgICAgICBzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25OdW1iZXIgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1hdGlvbi1udW1iZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLm1hcmtFeHBlbnNlUGFpZCh0aGlzLmV4cGVuc2UuaWQsIHRoaXMubW9udGgsIHRydWUsIGNvbmZpcm1hdGlvbk51bWJlciB8fCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgICAgICBjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vLyBIaXN0b3J5IE1vZGFsXG5jbGFzcyBIaXN0b3J5TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW47XG4gICAgZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbiwgZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5leHBlbnNlID0gZXhwZW5zZTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBgUGF5bWVudCBIaXN0b3J5OiAke3RoaXMuZXhwZW5zZS5uYW1lfWAgfSk7XG5cbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRobHlQYXltZW50c1xuICAgICAgICAgICAgLmZpbHRlcihwID0+IHAuZXhwZW5zZUlkID09PSB0aGlzLmV4cGVuc2UuaWQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5tb250aC5sb2NhbGVDb21wYXJlKGEubW9udGgpKTtcblxuICAgICAgICBpZiAoaGlzdG9yeS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05vIHBheW1lbnQgaGlzdG9yeScgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ2V4cGVuc2UtaGlzdG9yeS10YWJsZScgfSk7XG4gICAgICAgICAgICBjb25zdCB0aGVhZCA9IHRhYmxlLmNyZWF0ZUVsKCd0aGVhZCcpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiAnTW9udGgnIH0pO1xuICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogJ1N0YXR1cycgfSk7XG4gICAgICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiAnUGFpZCBEYXRlJyB9KTtcbiAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IHRleHQ6ICdDb25maXJtYXRpb24nIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZUVsKCd0Ym9keScpO1xuICAgICAgICAgICAgaGlzdG9yeS5mb3JFYWNoKHBheW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IG1vbWVudChwYXltZW50Lm1vbnRoLCAnWVlZWS1NTScpLmZvcm1hdCgnTU1NIFlZWVknKSB9KTtcbiAgICAgICAgICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiBwYXltZW50LnBhaWQgPyAnXHUyNzA1IFBhaWQnIDogJ1x1MkIxQyBVbnBhaWQnIH0pO1xuICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHBheW1lbnQucGFpZERhdGUgfHwgJy0nIH0pO1xuICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHBheW1lbnQuY29uZmlybWF0aW9uTnVtYmVyIHx8ICctJyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0Nsb3NlJyB9KTtcbiAgICAgICAgY2xvc2VCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vLyBTdXBwb3J0IE1vZGFsXG5jbGFzcyBTdXBwb3J0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdleHBlbnNlLXRyYWNrZXItc3VwcG9ydC1tb2RhbCcpO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0RcdURDOTkgU3VwcG9ydCBNb250aGx5IEV4cGVuc2UgVHJhY2tlcicgfSk7XG4gICAgICAgIGhlYWRlci5zdHlsZS5jb2xvciA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1RoYW5rIHlvdSBmb3IgY29uc2lkZXJpbmcgc3VwcG9ydGluZyB0aGlzIHBsdWdpbiEgWW91ciBzdXBwb3J0IGhlbHBzIG1haW50YWluIGFuZCBpbXByb3ZlIHRoaXMgdG9vbC4nIFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYXlQYWwgU2VjdGlvblxuICAgICAgICBjb25zdCBwYXlwYWxTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIHBheXBhbFNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0IzIFBheVBhbCcgfSk7XG4gICAgICAgIHBheXBhbFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdPbmUtdGltZSBvciByZWN1cnJpbmcgZG9uYXRpb25zIHZpYSBQYXlQYWw6JyB9KTtcbiAgICAgICAgY29uc3QgcGF5cGFsQnRuID0gcGF5cGFsU2VjdGlvbi5jcmVhdGVFbCgnYScsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHUyMTkyIERvbmF0ZSB2aWEgUGF5UGFsJyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL3d3dy5wYXlwYWwuY29tL3BheXBhbG1lL1ZpY3RvclplbnRlbm8nXG4gICAgICAgIH0pO1xuICAgICAgICBwYXlwYWxCdG4uYWRkQ2xhc3MoJ3N1cHBvcnQtbGluaycpO1xuXG4gICAgICAgIC8vIENyeXB0byBTZWN0aW9uXG4gICAgICAgIGNvbnN0IGNyeXB0b1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KCdzdXBwb3J0LXNlY3Rpb24nKTtcbiAgICAgICAgY3J5cHRvU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0VcdURFOTkgQ3J5cHRvY3VycmVuY3kgKFVTREMvVVNEVCknIH0pO1xuICAgICAgICBjcnlwdG9TZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnU3VwcG9ydCB3aXRoIHN0YWJsZWNvaW5zIG9uIG11bHRpcGxlIG5ldHdvcmtzOicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjcnlwdG9BZGRyZXNzZXMgPSBjcnlwdG9TZWN0aW9uLmNyZWF0ZURpdignY3J5cHRvLWFkZHJlc3NlcycpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdXNkY0RpdiA9IGNyeXB0b0FkZHJlc3Nlcy5jcmVhdGVEaXYoJ2NyeXB0by1hZGRyZXNzJyk7XG4gICAgICAgIHVzZGNEaXYuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1VTREMgKEJhc2UgTmV0d29yayAtIExvdyBGZWVzKTonIH0pO1xuICAgICAgICBjb25zdCB1c2RjQWRkcmVzcyA9IHVzZGNEaXYuY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6ICcweDEwMjMxNDJkMDU0OGI2MzU0MmYyYTQ4MDNiNjcyNGQ0YzI2YjhiZGEnIH0pO1xuICAgICAgICB1c2RjQWRkcmVzcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdXNkY0FkZHJlc3Muc3R5bGUubWFyZ2luVG9wID0gJzVweCc7XG4gICAgICAgIHVzZGNBZGRyZXNzLnN0eWxlLnBhZGRpbmcgPSAnNXB4JztcbiAgICAgICAgdXNkY0FkZHJlc3Muc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICB1c2RjQWRkcmVzcy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgdXNkY0FkZHJlc3Muc3R5bGUuZm9udFNpemUgPSAnMC44NWVtJztcbiAgICAgICAgdXNkY0FkZHJlc3Muc3R5bGUud29yZEJyZWFrID0gJ2JyZWFrLWFsbCc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1c2RjTm90ZSA9IHVzZGNEaXYuY3JlYXRlRWwoJ3NtYWxsJywgeyB0ZXh0OiAnQWxzbyB3b3JrcyBvbjogRXRoZXJldW0sIFBvbHlnb24sIEFyYml0cnVtLCBPcHRpbWlzbScgfSk7XG4gICAgICAgIHVzZGNOb3RlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB1c2RjTm90ZS5zdHlsZS5tYXJnaW5Ub3AgPSAnM3B4JztcbiAgICAgICAgdXNkY05vdGUuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXG4gICAgICAgIGNvbnN0IHVzZHREaXYgPSBjcnlwdG9BZGRyZXNzZXMuY3JlYXRlRGl2KCdjcnlwdG8tYWRkcmVzcycpO1xuICAgICAgICB1c2R0RGl2LmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdVU0RUIChUcm9uIFRSQy0yMCAtIFVsdHJhIExvdyBGZWVzKTonIH0pO1xuICAgICAgICBjb25zdCB1c2R0QWRkcmVzcyA9IHVzZHREaXYuY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6ICdUQVY3cVRHZ3ZuOEduWUpmWGZlczczdEQyZEFQUUozTDJXJyB9KTtcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHVzZHRBZGRyZXNzLnN0eWxlLm1hcmdpblRvcCA9ICc1cHgnO1xuICAgICAgICB1c2R0QWRkcmVzcy5zdHlsZS5wYWRkaW5nID0gJzVweCc7XG4gICAgICAgIHVzZHRBZGRyZXNzLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIHVzZHRBZGRyZXNzLnN0eWxlLmZvbnRTaXplID0gJzAuODVlbSc7XG4gICAgICAgIHVzZHRBZGRyZXNzLnN0eWxlLndvcmRCcmVhayA9ICdicmVhay1hbGwnO1xuXG4gICAgICAgIGNvbnN0IGNyeXB0b05vdGUgPSBjcnlwdG9TZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNkEwXHVGRTBGIEltcG9ydGFudDogRG91YmxlLWNoZWNrIHRoZSBuZXR3b3JrIGJlZm9yZSBzZW5kaW5nIScgfSk7XG4gICAgICAgIGNyeXB0b05vdGUuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1lcnJvciknO1xuICAgICAgICBjcnlwdG9Ob3RlLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICAgICAgY3J5cHRvTm90ZS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjcnlwdG9UaXAgPSBjcnlwdG9TZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0ExIFRpcDogVXNlIFRyb24gZm9yIFVTRFQgb3IgQmFzZSBmb3IgVVNEQyB0byBtaW5pbWl6ZSBmZWVzIScgfSk7XG4gICAgICAgIGNyeXB0b1RpcC5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgICAgIGNyeXB0b1RpcC5zdHlsZS5tYXJnaW5Ub3AgPSAnNXB4JztcbiAgICAgICAgY3J5cHRvVGlwLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAvLyBCdXkgTWUgYSBDb2ZmZWUgU2VjdGlvblxuICAgICAgICBjb25zdCBjb2ZmZWVTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIGNvZmZlZVNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHUyNjE1IEJ1eSBNZSBhIENvZmZlZScgfSk7XG4gICAgICAgIGNvZmZlZVNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdTaW1wbGUsIGZyaWVuZGx5IHdheSB0byBzdXBwb3J0OicgfSk7XG4gICAgICAgIGNvbnN0IGNvZmZlZUJ0biA9IGNvZmZlZVNlY3Rpb24uY3JlYXRlRWwoJ2EnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1MjE5MiBCdXkgTWUgYSBDb2ZmZWUnLFxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vYnV5bWVhY29mZmVlLmNvbS9ydnplbidcbiAgICAgICAgfSk7XG4gICAgICAgIGNvZmZlZUJ0bi5hZGRDbGFzcygnc3VwcG9ydC1saW5rJyk7XG5cbiAgICAgICAgLy8gT3RoZXIgd2F5cyB0byBzdXBwb3J0XG4gICAgICAgIGNvbnN0IG90aGVyU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3N1cHBvcnQtc2VjdGlvbicpO1xuICAgICAgICBvdGhlclNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNDXHVERjFGIE90aGVyIFdheXMgdG8gU3VwcG9ydCcgfSk7XG4gICAgICAgIGNvbnN0IG90aGVyTGlzdCA9IG90aGVyU2VjdGlvbi5jcmVhdGVFbCgndWwnKTtcbiAgICAgICAgb3RoZXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1x1MkI1MCBTdGFyIHRoZSBHaXRIdWIgcmVwb3NpdG9yeScgfSk7XG4gICAgICAgIG90aGVyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdcdUQ4M0RcdURDMUIgUmVwb3J0IGJ1Z3MgYW5kIGlzc3VlcycgfSk7XG4gICAgICAgIG90aGVyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdcdUQ4M0RcdURDQTEgU3VnZ2VzdCBuZXcgZmVhdHVyZXMnIH0pO1xuICAgICAgICBvdGhlckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0REIEltcHJvdmUgZG9jdW1lbnRhdGlvbicgfSk7XG4gICAgICAgIG90aGVyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdcdUQ4M0RcdURERTNcdUZFMEYgVGVsbCBvdGhlcnMgYWJvdXQgdGhlIHBsdWdpbicgfSk7XG5cbiAgICAgICAgLy8gRm9vdGVyXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3N1cHBvcnQtZm9vdGVyJyk7XG4gICAgICAgIGZvb3Rlci5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XG4gICAgICAgIGZvb3Rlci5zdHlsZS5wYWRkaW5nID0gJzE1cHgnO1xuICAgICAgICBmb290ZXIuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICBmb290ZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG4gICAgICAgIGZvb3Rlci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgZm9vdGVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnVGhhbmsgeW91IGZvciB5b3VyIHN1cHBvcnQhIFx1RDgzRFx1REU0RicgfSk7XG4gICAgICAgIGZvb3Rlci5jcmVhdGVFbCgnc21hbGwnLCB7IHRleHQ6ICdBbGwgZG9uYXRpb25zIGhlbHAgbWFpbnRhaW4gYW5kIGltcHJvdmUgdGhpcyBwbHVnaW4nIH0pO1xuXG4gICAgICAgIC8vIENsb3NlIGJ1dHRvblxuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2xvc2UnIH0pO1xuICAgICAgICBjbG9zZUJ0bi5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XG4gICAgICAgIGNsb3NlQnRuLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFJlcG9ydCBNb2RhbFxuY2xhc3MgUmVwb3J0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0V4cGVuc2UgUmVwb3J0JyB9KTtcblxuICAgICAgICBjb25zdCBmb3JtID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3RhcnQgTW9udGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0gZm9ybWF0JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUobW9tZW50KCkuc3VidHJhY3QoNSwgJ21vbnRocycpLmZvcm1hdCgnWVlZWS1NTScpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAncmVwb3J0LXN0YXJ0JztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5kIE1vbnRoJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdZWVlZLU1NIGZvcm1hdCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAncmVwb3J0LWVuZCc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBidXR0b25EaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdtb2RhbC1idXR0b24tY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBnZW5lcmF0ZUJ0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR2VuZXJhdGUnLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICAgICAgZ2VuZXJhdGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBvcnQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25EaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdlbmVyYXRlUmVwb3J0KCkge1xuICAgICAgICBjb25zdCBzdGFydE1vbnRoID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBvcnQtc3RhcnQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgY29uc3QgZW5kTW9udGggPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcG9ydC1lbmQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblxuICAgICAgICBjb25zdCByZXBvcnQgPSB0aGlzLmJ1aWxkUmVwb3J0KHN0YXJ0TW9udGgsIGVuZE1vbnRoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSByZXBvcnQgaW4gTW9udGhseSBFeHBlbnNlcy9FeHBlbnNlIFJlcG9ydHMgZm9sZGVyXG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5Tm90ZXNGb2xkZXJ9L0V4cGVuc2UgUmVwb3J0c2A7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYEV4cGVuc2UgUmVwb3J0ICR7c3RhcnRNb250aH0gdG8gJHtlbmRNb250aH0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcbiAgICAgICAgXG4gICAgICAgIC8vIEVuc3VyZSBmb2xkZXIgZXhpc3RzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIG9yIG92ZXJ3cml0ZSB0aGUgcmVwb3J0XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nRmlsZSwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdSZXBvcnQgdXBkYXRlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnUmVwb3J0IGdlbmVyYXRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcmVwb3J0OicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGNyZWF0aW5nIHJlcG9ydCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYnVpbGRSZXBvcnQoc3RhcnRNb250aDogc3RyaW5nLCBlbmRNb250aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlcG9ydCA9IGAjIEV4cGVuc2UgUmVwb3J0XFxuXFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAqKlBlcmlvZDoqKiAke21vbWVudChzdGFydE1vbnRoLCAnWVlZWS1NTScpLmZvcm1hdCgnTU1NIFlZWVknKX0gLSAke21vbWVudChlbmRNb250aCwgJ1lZWVktTU0nKS5mb3JtYXQoJ01NTSBZWVlZJyl9XFxuXFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAqKkdlbmVyYXRlZDoqKiAke21vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbScpfVxcblxcbi0tLVxcblxcbmA7XG5cbiAgICAgICAgY29uc3Qgc3RhcnQgPSBtb21lbnQoc3RhcnRNb250aCwgJ1lZWVktTU0nKTtcbiAgICAgICAgY29uc3QgZW5kID0gbW9tZW50KGVuZE1vbnRoLCAnWVlZWS1NTScpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRvdGFsQW1vdW50ID0gMDtcbiAgICAgICAgbGV0IHRvdGFsUGFpZCA9IDA7XG4gICAgICAgIGxldCB0b3RhbFVucGFpZCA9IDA7XG5cbiAgICAgICAgcmVwb3J0ICs9IGAjIyBNb250aGx5IEJyZWFrZG93blxcblxcbmA7XG5cbiAgICAgICAgbGV0IGN1cnJlbnQgPSBzdGFydC5jbG9uZSgpO1xuICAgICAgICB3aGlsZSAoY3VycmVudC5pc1NhbWVPckJlZm9yZShlbmQpKSB7XG4gICAgICAgICAgICBjb25zdCBtb250aCA9IGN1cnJlbnQuZm9ybWF0KCdZWVlZLU1NJyk7XG4gICAgICAgICAgICBjb25zdCBleHBlbnNlcyA9IHRoaXMucGx1Z2luLmdldEV4cGVuc2VzRm9yTW9udGgobW9udGgpO1xuICAgICAgICAgICAgY29uc3QgdW5wYWlkID0gdGhpcy5wbHVnaW4uZ2V0VW5wYWlkRXhwZW5zZXMobW9udGgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtb250aFRvdGFsID0gZXhwZW5zZXMucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIGUuYW1vdW50LCAwKTtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoUGFpZCA9IGV4cGVuc2VzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudCA9IHRoaXMucGx1Z2luLmdldFBheW1lbnQoZS5pZCwgbW9udGgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF5bWVudD8ucGFpZDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgZS5hbW91bnQsIDApO1xuICAgICAgICAgICAgY29uc3QgbW9udGhVbnBhaWQgPSBtb250aFRvdGFsIC0gbW9udGhQYWlkO1xuXG4gICAgICAgICAgICB0b3RhbEFtb3VudCArPSBtb250aFRvdGFsO1xuICAgICAgICAgICAgdG90YWxQYWlkICs9IG1vbnRoUGFpZDtcbiAgICAgICAgICAgIHRvdGFsVW5wYWlkICs9IG1vbnRoVW5wYWlkO1xuXG4gICAgICAgICAgICByZXBvcnQgKz0gYCMjIyAke2N1cnJlbnQuZm9ybWF0KCdNTU1NIFlZWVknKX1cXG5cXG5gO1xuICAgICAgICAgICAgcmVwb3J0ICs9IGAtIFRvdGFsOiAkJHttb250aFRvdGFsLnRvRml4ZWQoMil9XFxuYDtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgLSBQYWlkOiAkJHttb250aFBhaWQudG9GaXhlZCgyKX1cXG5gO1xuICAgICAgICAgICAgcmVwb3J0ICs9IGAtIFVucGFpZDogJCR7bW9udGhVbnBhaWQudG9GaXhlZCgyKX1cXG5gO1xuICAgICAgICAgICAgcmVwb3J0ICs9IGAtIEV4cGVuc2VzOiAke2V4cGVuc2VzLmxlbmd0aH0gKCR7dW5wYWlkLmxlbmd0aH0gdW5wYWlkKVxcblxcbmA7XG5cbiAgICAgICAgICAgIGN1cnJlbnQuYWRkKDEsICdtb250aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwb3J0ICs9IGAjIyBTdW1tYXJ5XFxuXFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAtICoqVG90YWwgQW1vdW50OioqICQke3RvdGFsQW1vdW50LnRvRml4ZWQoMil9XFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAtICoqVG90YWwgUGFpZDoqKiAkJHt0b3RhbFBhaWQudG9GaXhlZCgyKX1cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYC0gKipUb3RhbCBVbnBhaWQ6KiogJCR7dG90YWxVbnBhaWQudG9GaXhlZCgyKX1cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYC0gKipQYXltZW50IFJhdGU6KiogJHt0b3RhbEFtb3VudCA+IDAgPyAoKHRvdGFsUGFpZCAvIHRvdGFsQW1vdW50KSAqIDEwMCkudG9GaXhlZCgxKSA6IDB9JVxcblxcbmA7XG5cbiAgICAgICAgLy8gRXhwZW5zZSBicmVha2Rvd25cbiAgICAgICAgcmVwb3J0ICs9IGAjIyBFeHBlbnNlIEJyZWFrZG93blxcblxcbmA7XG4gICAgICAgIGNvbnN0IGFsbEV4cGVuc2VzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMuZmlsdGVyKGUgPT4gIWUuYXJjaGl2ZWQpO1xuICAgICAgICBhbGxFeHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5UGF5bWVudHMuZmlsdGVyKHAgPT4gXG4gICAgICAgICAgICAgICAgcC5leHBlbnNlSWQgPT09IGV4cGVuc2UuaWQgJiZcbiAgICAgICAgICAgICAgICBtb21lbnQocC5tb250aCwgJ1lZWVktTU0nKS5pc0JldHdlZW4oc3RhcnQsIGVuZCwgbnVsbCwgJ1tdJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBwYWlkQ291bnQgPSBwYXltZW50cy5maWx0ZXIocCA9PiBwLnBhaWQpLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSBwYXltZW50cy5sZW5ndGg7XG5cbiAgICAgICAgICAgIHJlcG9ydCArPSBgIyMjICR7ZXhwZW5zZS5uYW1lfVxcblxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gQW1vdW50OiAkJHtleHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gUGF5bWVudCBNZXRob2Q6ICR7ZXhwZW5zZS5wYXltZW50TWV0aG9kfVxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gUGFpZDogJHtwYWlkQ291bnR9LyR7dG90YWxDb3VudH0gbW9udGhzXFxuYDtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgLSBUb3RhbCBQYWlkOiAkJHsocGFpZENvdW50ICogZXhwZW5zZS5hbW91bnQpLnRvRml4ZWQoMil9XFxuXFxuYDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vLyBTZXR0aW5ncyBUYWJcbmNsYXNzIEV4cGVuc2VUcmFja2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNb250aGx5IEV4cGVuc2UgVHJhY2tlciBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgLy8gU3VwcG9ydCBTZWN0aW9uXG4gICAgICAgIGNvbnN0IHN1cHBvcnRTZWN0aW9uID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIHN1cHBvcnRTZWN0aW9uLnN0eWxlLnBhZGRpbmcgPSAnMjBweCc7XG4gICAgICAgIHN1cHBvcnRTZWN0aW9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JztcbiAgICAgICAgc3VwcG9ydFNlY3Rpb24uc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICBzdXBwb3J0U2VjdGlvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcbiAgICAgICAgc3VwcG9ydFNlY3Rpb24uc3R5bGUuYm9yZGVyID0gJzJweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcblxuICAgICAgICBjb25zdCBzdXBwb3J0SGVhZGVyID0gc3VwcG9ydFNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNEXHVEQzk5IFN1cHBvcnQgVGhpcyBQbHVnaW4nIH0pO1xuICAgICAgICBzdXBwb3J0SGVhZGVyLnN0eWxlLm1hcmdpblRvcCA9ICcwJztcbiAgICAgICAgc3VwcG9ydEhlYWRlci5zdHlsZS5jb2xvciA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcblxuICAgICAgICBzdXBwb3J0U2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnSWYgeW91IGZpbmQgdGhpcyBwbHVnaW4gaGVscGZ1bCwgY29uc2lkZXIgc3VwcG9ydGluZyBpdHMgZGV2ZWxvcG1lbnQhJyBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc3VwcG9ydExpbmtzID0gc3VwcG9ydFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICAgIHN1cHBvcnRMaW5rcy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBzdXBwb3J0TGlua3Muc3R5bGUuZ2FwID0gJzEwcHgnO1xuICAgICAgICBzdXBwb3J0TGlua3Muc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XG4gICAgICAgIHN1cHBvcnRMaW5rcy5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG5cbiAgICAgICAgLy8gUGF5UGFsIGJ1dHRvblxuICAgICAgICBjb25zdCBwYXlwYWxCdG4gPSBzdXBwb3J0TGlua3MuY3JlYXRlRWwoJ2EnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1RDgzRFx1RENCMyBQYXlQYWwnLFxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vcGF5cGFsbWUvVmljdG9yWmVudGVubydcbiAgICAgICAgfSk7XG4gICAgICAgIHBheXBhbEJ0bi5zdHlsZS5jc3NUZXh0ID0gJ3BhZGRpbmc6IDhweCAxNnB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpOyBib3JkZXItcmFkaXVzOiA0cHg7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgZm9udC13ZWlnaHQ6IDYwMDsnO1xuXG4gICAgICAgIC8vIENyeXB0byBidXR0b25cbiAgICAgICAgY29uc3QgY3J5cHRvQnRuID0gc3VwcG9ydExpbmtzLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1RDgzRVx1REU5OSBVU0RDL1VTRFQnXG4gICAgICAgIH0pO1xuICAgICAgICBjcnlwdG9CdG4uc3R5bGUuY3NzVGV4dCA9ICdwYWRkaW5nOiA4cHggMTZweDsgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTsgYm9yZGVyLXJhZGl1czogNHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGZvbnQtd2VpZ2h0OiA2MDA7IGN1cnNvcjogcG9pbnRlcjsgYm9yZGVyOiBub25lOyc7XG4gICAgICAgIGNyeXB0b0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgbmV3IFN1cHBvcnRNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEJ1eSBNZSBhIENvZmZlZSBidXR0b25cbiAgICAgICAgY29uc3QgY29mZmVlQnRuID0gc3VwcG9ydExpbmtzLmNyZWF0ZUVsKCdhJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdTI2MTUgQ29mZmVlJyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2J1eW1lYWNvZmZlZS5jb20vcnZ6ZW4nXG4gICAgICAgIH0pO1xuICAgICAgICBjb2ZmZWVCdG4uc3R5bGUuY3NzVGV4dCA9ICdwYWRkaW5nOiA4cHggMTZweDsgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTsgYm9yZGVyLXJhZGl1czogNHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGZvbnQtd2VpZ2h0OiA2MDA7JztcblxuICAgICAgICBjb25zdCBzdXBwb3J0Tm90ZSA9IHN1cHBvcnRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdZb3VyIHN1cHBvcnQgaGVscHMgbWFpbnRhaW4gYW5kIGltcHJvdmUgdGhpcyBwbHVnaW4uIFRoYW5rIHlvdSEgXHVEODNEXHVERTRGJ1xuICAgICAgICB9KTtcbiAgICAgICAgc3VwcG9ydE5vdGUuc3R5bGUubWFyZ2luQm90dG9tID0gJzAnO1xuICAgICAgICBzdXBwb3J0Tm90ZS5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgICAgIHN1cHBvcnROb3RlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgICAgc3VwcG9ydE5vdGUuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdocicsIHsgY2xzOiAnZXhwZW5zZS10cmFja2VyLWRpdmlkZXInIH0pO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdQbHVnaW4gU2V0dGluZ3MnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ01vbnRobHkgTm90ZXMgRm9sZGVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdGb2xkZXIgd2hlcmUgbW9udGhseSBleHBlbnNlIG5vdGVzIHdpbGwgYmUgY3JlYXRlZCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseU5vdGVzRm9sZGVyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseU5vdGVzRm9sZGVyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdBdXRvLWNyZWF0ZSBNb250aGx5IE5vdGVzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IGNyZWF0ZSBtb250aGx5IG5vdGVzIHdoZW4gYSBuZXcgbW9udGggYmVnaW5zJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ3JlYXRlTW9udGhseU5vdGVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NyZWF0ZU1vbnRobHlOb3RlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBTdGF0dXMgQmFyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdEaXNwbGF5IHVucGFpZCBleHBlbnNlIGNvdW50IGluIHN0YXR1cyBiYXInKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGF0dXNCYXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RhdHVzQmFyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmICF0aGlzLnBsdWdpbi5zdGF0dXNCYXJJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zdGF0dXNCYXJJdGVtID0gdGhpcy5wbHVnaW4uYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbHVlICYmIHRoaXMucGx1Z2luLnN0YXR1c0Jhckl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnN0YXR1c0Jhckl0ZW0ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTW9udGhseSBOb3RlIFRlbXBsYXRlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdUZW1wbGF0ZSBmb3IgbW9udGhseSBub3Rlcy4gVXNlIHt7bW9udGh9fSBhbmQge3tleHBlbnNlc319IGFzIHBsYWNlaG9sZGVycy4nKVxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseU5vdGVUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSAxMDtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuY29scyA9IDUwO1xuICAgICAgICAgICAgICAgIHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRobHlOb3RlVGVtcGxhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQVlPO0FBZ0NQLElBQU0sbUJBQTJDO0FBQUEsRUFDN0MsbUJBQW1CLENBQUM7QUFBQSxFQUNwQixpQkFBaUIsQ0FBQztBQUFBLEVBQ2xCLG9CQUFvQjtBQUFBLEVBQ3BCLHFCQUFxQjtBQUFBLEVBQ3JCLHdCQUF3QjtBQUFBLEVBQ3hCLGVBQWU7QUFDbkI7QUFFQSxJQUFNLHNCQUFzQjtBQUc1QixJQUFxQiw4QkFBckIsY0FBeUQsdUJBQU87QUFBQSxFQUk1RCxNQUFNLFNBQVM7QUFDWCxVQUFNLEtBQUssYUFBYTtBQUd4QixTQUFLO0FBQUEsTUFDRDtBQUFBLE1BQ0EsQ0FBQyxTQUFTLElBQUksY0FBYyxNQUFNLElBQUk7QUFBQSxJQUMxQztBQUdBLFNBQUssY0FBYyxVQUFVLDJCQUEyQixNQUFNO0FBQzFELFdBQUssc0JBQXNCO0FBQUEsSUFDL0IsQ0FBQztBQUdELFNBQUssV0FBVztBQUFBLE1BQ1osSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBQ1osYUFBSyxzQkFBc0I7QUFBQSxNQUMvQjtBQUFBLElBQ0osQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ1osSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBQ1osWUFBSSxnQkFBZ0IsS0FBSyxLQUFLLE1BQU0sSUFBSSxFQUFFLEtBQUs7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
