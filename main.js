var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MonthlyExpenseTrackerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  recurringExpenses: [],
  oneTimeExpenses: [],
  monthlyPayments: [],
  monthlyNotesFolder: "Monthly Expenses",
  monthlyNoteTemplate: "# {{month}} - Monthly Expenses\n\n## Expense Tracker\n\n{{expenses}}\n\n---\n*Generated by Monthly Expense Tracker*",
  autoCreateMonthlyNotes: true,
  showStatusBar: true
};
var VIEW_TYPE_DASHBOARD = "expense-tracker-dashboard";
var MonthlyExpenseTrackerPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_DASHBOARD,
      (leaf) => new DashboardView(leaf, this)
    );
    this.addRibbonIcon("wallet", "Monthly Expense Tracker", () => {
      this.activateDashboardView();
    });
    this.addCommand({
      id: "open-expense-dashboard",
      name: "Open Expense Dashboard",
      callback: () => {
        this.activateDashboardView();
      }
    });
    this.addCommand({
      id: "add-recurring-expense",
      name: "Add Expense",
      callback: () => {
        new AddExpenseModal(this.app, this, null).open();
      }
    });
    this.addCommand({
      id: "create-current-month-note",
      name: "Create Current Month Note",
      callback: async () => {
        const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
        await this.createMonthlyNote(currentMonth);
      }
    });
    this.addCommand({
      id: "generate-expense-report",
      name: "Generate Expense Report",
      callback: () => {
        new ReportModal(this.app, this).open();
      }
    });
    if (this.settings.showStatusBar) {
      this.statusBarItem = this.addStatusBarItem();
      this.updateStatusBar();
    }
    if (this.settings.autoCreateMonthlyNotes) {
      this.checkAndCreateMonthlyNote();
    }
    this.addSettingTab(new ExpenseTrackerSettingTab(this.app, this));
    console.log("Monthly Expense Tracker plugin loaded");
  }
  async activateDashboardView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_DASHBOARD)[0];
    if (!leaf) {
      const newLeaf = workspace.getLeaf("tab");
      if (newLeaf) {
        await newLeaf.setViewState({
          type: VIEW_TYPE_DASHBOARD,
          active: true
        });
        leaf = newLeaf;
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async checkAndCreateMonthlyNote() {
    const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
    const monthlyNote = await this.getMonthlyNoteFile(currentMonth);
    if (!monthlyNote) {
      await this.createMonthlyNote(currentMonth);
    }
  }
  async createMonthlyNote(month) {
    const folderPath = this.settings.monthlyNotesFolder;
    const fileName = `${month}.md`;
    const filePath = `${folderPath}/${fileName}`;
    const folder = this.app.vault.getAbstractFileByPath(folderPath);
    if (!folder) {
      await this.app.vault.createFolder(folderPath);
    }
    let file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian.TFile) {
      new import_obsidian.Notice(`Monthly note for ${month} already exists`);
      return file;
    }
    const expenses = this.getExpensesForMonth(month);
    const oneTimeExpenses = this.getOneTimeExpensesForMonth(month);
    const prevMonth = (0, import_obsidian.moment)(month, "YYYY-MM").subtract(1, "month").format("YYYY-MM");
    const unpaidFromPrev = this.getUnpaidExpenses(prevMonth);
    let expenseList = "## Recurring Expenses\n\n";
    expenses.forEach((expense) => {
      const payment = this.getPayment(expense.id, month);
      const status = (payment == null ? void 0 : payment.paid) ? "x" : " ";
      const statusIcon = (payment == null ? void 0 : payment.paid) ? "\u2705" : "\u2B1C";
      const cur = expense.currency || "USD";
      let symbol = cur + " ";
      if (cur === "USD") symbol = "$";
      else if (cur === "BOB") symbol = "Bs ";
      else if (cur === "EUR") symbol = "\u20AC";
      else if (cur === "GBP") symbol = "\xA3";
      expenseList += `- [${status}] ${statusIcon} **${expense.name}** - ${symbol}${expense.amount.toFixed(2)} - Due: ${expense.dueDay} - Method: ${expense.paymentMethod}
`;
      expenseList += `  - ID: \`${expense.id}\`
`;
      if (payment == null ? void 0 : payment.confirmationNumber) {
        expenseList += `  - Confirmation: ${payment.confirmationNumber}
`;
      }
      expenseList += "\n";
    });
    if (oneTimeExpenses.length > 0) {
      expenseList += "## One-Time Expenses\n\n";
      oneTimeExpenses.forEach((expense) => {
        const status = expense.paid ? "x" : " ";
        const statusIcon = expense.paid ? "\u2705" : "\u2B1C";
        const cur = expense.currency || "USD";
        let symbol = cur + " ";
        if (cur === "USD") symbol = "$";
        else if (cur === "BOB") symbol = "Bs ";
        else if (cur === "EUR") symbol = "\u20AC";
        else if (cur === "GBP") symbol = "\xA3";
        expenseList += `- [${status}] ${statusIcon} **${expense.name}** - ${symbol}${expense.amount.toFixed(2)} - Date: ${expense.date} - Method: ${expense.paymentMethod}
`;
        expenseList += `  - ID: \`${expense.id}\`
`;
        if (expense.confirmationNumber) {
          expenseList += `  - Confirmation: ${expense.confirmationNumber}
`;
        }
        expenseList += "\n";
      });
    }
    if (unpaidFromPrev.length > 0) {
      expenseList += "\n## Unpaid from Previous Month\n\n";
      unpaidFromPrev.forEach((expense) => {
        const symbol = (expense.currency || "USD") === "USD" ? "$" : (expense.currency || "USD") === "BOB" ? "Bs " : `${expense.currency} `;
        expenseList += `- [ ] \u26A0\uFE0F **${expense.name}** - ${symbol}${expense.amount.toFixed(2)} - OVERDUE
`;
        expenseList += `  - ID: \`${expense.id}\`

`;
      });
    }
    if (expenses.length === 0 && oneTimeExpenses.length === 0) {
      expenseList += '\n*No expenses set up for this month yet. Click "**+ Add Expense**" in the dashboard to add expenses.*\n\n';
    }
    const content = this.settings.monthlyNoteTemplate.replace("{{month}}", (0, import_obsidian.moment)(month, "YYYY-MM").format("MMMM YYYY")).replace("{{expenses}}", expenseList);
    file = await this.app.vault.create(filePath, content);
    new import_obsidian.Notice(`Created monthly note for ${month}`);
    return file;
  }
  async getMonthlyNoteFile(month) {
    const filePath = `${this.settings.monthlyNotesFolder}/${month}.md`;
    const file = this.app.vault.getAbstractFileByPath(filePath);
    return file instanceof import_obsidian.TFile ? file : null;
  }
  getExpensesForMonth(month) {
    return this.settings.recurringExpenses.filter((expense) => {
      if (expense.archived) return false;
      const expenseStart = (0, import_obsidian.moment)(expense.startDate, "YYYY-MM");
      const expenseEnd = expense.endDate ? (0, import_obsidian.moment)(expense.endDate, "YYYY-MM") : null;
      const checkMonth = (0, import_obsidian.moment)(month, "YYYY-MM");
      const afterStart = checkMonth.isSameOrAfter(expenseStart);
      const beforeEnd = !expenseEnd || checkMonth.isSameOrBefore(expenseEnd);
      return afterStart && beforeEnd;
    });
  }
  getUnpaidExpenses(month) {
    const expenses = this.getExpensesForMonth(month);
    return expenses.filter((expense) => {
      const payment = this.getPayment(expense.id, month);
      return !payment || !payment.paid;
    });
  }
  getPayment(expenseId, month) {
    return this.settings.monthlyPayments.find(
      (p) => p.expenseId === expenseId && p.month === month
    );
  }
  async markExpensePaid(expenseId, month, paid, confirmationNumber) {
    const existingPayment = this.getPayment(expenseId, month);
    if (existingPayment) {
      existingPayment.paid = paid;
      existingPayment.paidDate = paid ? (0, import_obsidian.moment)().format("YYYY-MM-DD") : void 0;
      existingPayment.confirmationNumber = confirmationNumber;
    } else {
      this.settings.monthlyPayments.push({
        expenseId,
        month,
        paid,
        paidDate: paid ? (0, import_obsidian.moment)().format("YYYY-MM-DD") : void 0,
        confirmationNumber
      });
    }
    await this.saveSettings();
    this.updateStatusBar();
  }
  async addRecurringExpense(expense) {
    this.settings.recurringExpenses.push(expense);
    await this.saveSettings();
    new import_obsidian.Notice(`Added recurring expense: ${expense.name}`);
  }
  async addOneTimeExpense(expense) {
    this.settings.oneTimeExpenses.push(expense);
    await this.saveSettings();
    new import_obsidian.Notice(`Added one-time expense: ${expense.name}`);
  }
  getOneTimeExpensesForMonth(month) {
    return this.settings.oneTimeExpenses.filter((expense) => {
      const expenseDate = (0, import_obsidian.moment)(expense.date);
      return expenseDate.format("YYYY-MM") === month;
    });
  }
  async markOneTimeExpensePaid(expenseId, paid, confirmationNumber) {
    const expense = this.settings.oneTimeExpenses.find((e) => e.id === expenseId);
    if (expense) {
      expense.paid = paid;
      expense.paidDate = paid ? (0, import_obsidian.moment)().format("YYYY-MM-DD") : void 0;
      if (confirmationNumber) expense.confirmationNumber = confirmationNumber;
      await this.saveSettings();
      this.updateStatusBar();
    }
  }
  async updateOneTimeExpense(expense) {
    const index = this.settings.oneTimeExpenses.findIndex((e) => e.id === expense.id);
    if (index !== -1) {
      this.settings.oneTimeExpenses[index] = expense;
      await this.saveSettings();
      new import_obsidian.Notice(`Updated expense: ${expense.name}`);
    }
  }
  async deleteOneTimeExpense(expenseId) {
    this.settings.oneTimeExpenses = this.settings.oneTimeExpenses.filter((e) => e.id !== expenseId);
    await this.saveSettings();
    new import_obsidian.Notice("Expense deleted");
  }
  async updateRecurringExpense(expense) {
    const index = this.settings.recurringExpenses.findIndex((e) => e.id === expense.id);
    if (index !== -1) {
      this.settings.recurringExpenses[index] = expense;
      await this.saveSettings();
      new import_obsidian.Notice(`Updated expense: ${expense.name}`);
    }
  }
  async archiveExpense(expenseId) {
    const expense = this.settings.recurringExpenses.find((e) => e.id === expenseId);
    if (expense) {
      expense.archived = true;
      await this.saveSettings();
      new import_obsidian.Notice(`Archived expense: ${expense.name}`);
    }
  }
  async deleteExpense(expenseId) {
    this.settings.recurringExpenses = this.settings.recurringExpenses.filter((e) => e.id !== expenseId);
    this.settings.monthlyPayments = this.settings.monthlyPayments.filter((p) => p.expenseId !== expenseId);
    await this.saveSettings();
    new import_obsidian.Notice("Expense deleted");
  }
  updateStatusBar() {
    if (!this.statusBarItem) return;
    const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
    const unpaid = this.getUnpaidExpenses(currentMonth);
    const recurringTotal = this.getExpensesForMonth(currentMonth).length;
    const oneTime = this.getOneTimeExpensesForMonth(currentMonth);
    const oneTimeUnpaid = oneTime.filter((e) => !e.paid);
    const totalUnpaidCount = unpaid.length + oneTimeUnpaid.length;
    const totalCount = recurringTotal + oneTime.length;
    if (totalUnpaidCount > 0) {
      this.statusBarItem.textContent = `\u{1F4B3} ${totalUnpaidCount}/${totalCount} unpaid`;
      this.statusBarItem.classList.add("expense-tracker-unpaid");
    } else if (totalCount > 0) {
      this.statusBarItem.textContent = `\u{1F4B3} All paid`;
      this.statusBarItem.classList.remove("expense-tracker-unpaid");
    } else {
      this.statusBarItem.textContent = "\u{1F4B3}";
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_DASHBOARD);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof DashboardView) {
        leaf.view.refresh();
      }
    });
  }
  onunload() {
    console.log("Monthly Expense Tracker plugin unloaded");
  }
};
var DashboardView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
  }
  getViewType() {
    return VIEW_TYPE_DASHBOARD;
  }
  getDisplayText() {
    return "Expense Dashboard";
  }
  getIcon() {
    return "wallet";
  }
  async onOpen() {
    this.refresh();
  }
  refresh() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("expense-tracker-dashboard");
    const header = container.createDiv("expense-tracker-header");
    header.createEl("h2", { text: "Monthly Expense Tracker" });
    const monthSelector = container.createDiv("expense-tracker-month-selector");
    const prevBtn = monthSelector.createEl("button", { text: "\u25C0" });
    prevBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").subtract(1, "month").format("YYYY-MM");
      this.refresh();
    };
    const monthDisplay = monthSelector.createEl("span", {
      text: (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").format("MMMM YYYY"),
      cls: "expense-tracker-month-display"
    });
    const nextBtn = monthSelector.createEl("button", { text: "\u25B6" });
    nextBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").add(1, "month").format("YYYY-MM");
      this.refresh();
    };
    const todayBtn = monthSelector.createEl("button", { text: "Today" });
    todayBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
      this.refresh();
    };
    const recurringExpenses = this.plugin.getExpensesForMonth(this.currentMonth);
    const oneTimeExpenses = this.plugin.getOneTimeExpensesForMonth(this.currentMonth);
    const totals = {};
    let totalCount = 0;
    let totalUnpaidCount = 0;
    const processExpense = (amount, currency, paid) => {
      if (!totals[currency]) totals[currency] = { total: 0, paid: 0, unpaidCount: 0 };
      totals[currency].total += amount;
      if (paid) {
        totals[currency].paid += amount;
      } else {
        totals[currency].unpaidCount++;
        totalUnpaidCount++;
      }
      totalCount++;
    };
    recurringExpenses.forEach((e) => {
      const payment = this.plugin.getPayment(e.id, this.currentMonth);
      const isPaid = (payment == null ? void 0 : payment.paid) || false;
      processExpense(e.amount, e.currency || "USD", isPaid);
    });
    oneTimeExpenses.forEach((e) => {
      processExpense(e.amount, e.currency || "USD", e.paid);
    });
    const summary = container.createDiv("expense-tracker-summary");
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Total Expenses:</span>
            <span class="summary-value">${totalCount}</span>
        `;
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Unpaid Count:</span>
            <span class="summary-value unpaid">${totalUnpaidCount}</span>
        `;
    const currencies = Object.keys(totals).sort();
    if (currencies.length === 0) {
      summary.createDiv("summary-item").innerHTML = `
                <span class="summary-label">Total Amount:</span>
                <span class="summary-value">$0.00</span>
            `;
    } else {
      const totalsDiv = container.createDiv("summary-totals");
      totalsDiv.style.gridColumn = "1 / -1";
      totalsDiv.style.marginTop = "10px";
      totalsDiv.style.borderTop = "1px solid var(--background-modifier-border)";
      totalsDiv.style.paddingTop = "10px";
      currencies.forEach((currency) => {
        let symbol = currency + " ";
        if (currency === "USD") symbol = "$";
        else if (currency === "BOB") symbol = "Bs ";
        else if (currency === "EUR") symbol = "\u20AC";
        else if (currency === "GBP") symbol = "\xA3";
        const data = totals[currency];
        const row = totalsDiv.createDiv("currency-row");
        row.style.display = "flex";
        row.style.justifyContent = "space-between";
        row.style.marginBottom = "5px";
        row.innerHTML = `
                    <span style="font-weight: bold;">${currency}</span>
                    <span>Total: ${symbol}${data.total.toFixed(2)}</span>
                    <span class="paid">Paid: ${symbol}${data.paid.toFixed(2)}</span>
                    <span class="unpaid">Unpaid: ${symbol}${(data.total - data.paid).toFixed(2)}</span>
                `;
      });
    }
    const actions = container.createDiv("expense-tracker-actions");
    const addBtn = actions.createEl("button", { text: "+ Add Expense", cls: "mod-cta" });
    addBtn.onclick = () => {
      new AddExpenseModal(this.app, this.plugin, null).open();
    };
    const createNoteBtn = actions.createEl("button", { text: "\u{1F4C4} Create Monthly Note" });
    createNoteBtn.onclick = async () => {
      await this.plugin.createMonthlyNote(this.currentMonth);
    };
    const reportBtn = actions.createEl("button", { text: "\u{1F4CA} Generate Report" });
    reportBtn.onclick = () => {
      new ReportModal(this.app, this.plugin).open();
    };
    const supportBtn = actions.createEl("button", { text: "\u{1F499} Support Plugin" });
    supportBtn.onclick = () => {
      new SupportModal(this.app).open();
    };
    supportBtn.style.background = "var(--interactive-accent)";
    supportBtn.style.color = "var(--text-on-accent)";
    const expenseList = container.createEl("div", { cls: "expense-tracker-list" });
    if (totalCount === 0) {
      expenseList.createDiv("expense-tracker-empty").setText("No expenses for this month");
    } else {
      if (totalUnpaidCount > 0) {
        expenseList.createEl("h3", { text: "Unpaid" });
        recurringExpenses.filter((e) => {
          const payment = this.plugin.getPayment(e.id, this.currentMonth);
          return !(payment == null ? void 0 : payment.paid);
        }).forEach((expense) => {
          this.renderRecurringExpenseItem(expenseList, expense);
        });
        oneTimeExpenses.filter((e) => !e.paid).forEach((expense) => {
          this.renderOneTimeExpenseItem(expenseList, expense);
        });
      }
      if (totalCount - totalUnpaidCount > 0) {
        expenseList.createEl("h3", { text: "Paid" });
        recurringExpenses.filter((e) => {
          const payment = this.plugin.getPayment(e.id, this.currentMonth);
          return payment == null ? void 0 : payment.paid;
        }).forEach((expense) => {
          this.renderRecurringExpenseItem(expenseList, expense);
        });
        oneTimeExpenses.filter((e) => e.paid).forEach((expense) => {
          this.renderOneTimeExpenseItem(expenseList, expense);
        });
      }
    }
    const archivedExpenses = this.plugin.settings.recurringExpenses.filter((e) => e.archived);
    if (archivedExpenses.length > 0) {
      const archivedSection = container.createDiv("expense-tracker-archived");
      const archivedHeader = archivedSection.createEl("h3", { text: "Archived Expenses" });
      archivedHeader.style.cursor = "pointer";
      const archivedList = archivedSection.createDiv("expense-tracker-archived-list");
      archivedList.style.display = "none";
      archivedHeader.onclick = () => {
        archivedList.style.display = archivedList.style.display === "none" ? "block" : "none";
      };
      archivedExpenses.forEach((expense) => {
        const item = archivedList.createDiv("expense-item archived");
        item.innerHTML = `
                    <div class="expense-name">${expense.name}</div>
                    <div class="expense-details">${expense.currency === "USD" ? "$" : expense.currency === "BOB" ? "Bs " : expense.currency + " "}${expense.amount.toFixed(2)} - ${expense.paymentMethod}</div>
                `;
        item.onclick = (e) => {
          const menu = new import_obsidian.Menu();
          menu.addItem((item2) => {
            item2.setTitle("Unarchive").onClick(async () => {
              expense.archived = false;
              await this.plugin.saveSettings();
              this.refresh();
            });
          });
          menu.addItem((item2) => {
            item2.setTitle("Delete").onClick(async () => {
              await this.plugin.deleteExpense(expense.id);
              this.refresh();
            });
          });
          menu.showAtMouseEvent(e);
        };
      });
    }
  }
  renderRecurringExpenseItem(container, expense) {
    const payment = this.plugin.getPayment(expense.id, this.currentMonth);
    const isPaid = (payment == null ? void 0 : payment.paid) || false;
    const isOverdue = expense.dueDay < parseInt((0, import_obsidian.moment)().format("D")) && !isPaid && this.currentMonth === (0, import_obsidian.moment)().format("YYYY-MM");
    const item = container.createDiv("expense-item");
    if (isPaid) item.addClass("paid");
    if (isOverdue) item.addClass("overdue");
    const checkbox = item.createEl("input", { type: "checkbox" });
    checkbox.checked = isPaid;
    checkbox.onclick = async (e) => {
      e.stopPropagation();
      if (!isPaid) {
        new MarkPaidModal(this.app, this.plugin, expense, this.currentMonth, () => {
          this.refresh();
        }).open();
      } else {
        await this.plugin.markExpensePaid(expense.id, this.currentMonth, false);
        this.refresh();
      }
    };
    const content = item.createDiv("expense-content");
    const nameDiv = content.createDiv("expense-name");
    nameDiv.setText(expense.name);
    if (isOverdue) {
      nameDiv.createSpan({ text: " \u26A0\uFE0F OVERDUE", cls: "overdue-badge" });
    }
    const details = content.createDiv("expense-details");
    const symbol = (expense.currency || "USD") === "USD" ? "$" : (expense.currency || "USD") === "BOB" ? "Bs " : `${expense.currency} `;
    details.innerHTML = `
            ${symbol}${expense.amount.toFixed(2)} \u2022 Due: ${expense.dueDay} \u2022 ${expense.paymentMethod}
            ${(payment == null ? void 0 : payment.confirmationNumber) ? `<br>Confirmation: ${payment.confirmationNumber}` : ""}
            ${(payment == null ? void 0 : payment.paidDate) ? `<br>Paid: ${payment.paidDate}` : ""}
        `;
    const actions = item.createDiv("expense-actions");
    this.addContextMenu(actions, expense, "recurring");
  }
  renderOneTimeExpenseItem(container, expense) {
    const isPaid = expense.paid;
    const expenseDate = (0, import_obsidian.moment)(expense.date);
    const isOverdue = expenseDate.isBefore((0, import_obsidian.moment)(), "day") && !isPaid;
    const item = container.createDiv("expense-item");
    if (isPaid) item.addClass("paid");
    if (isOverdue) item.addClass("overdue");
    const checkbox = item.createEl("input", { type: "checkbox" });
    checkbox.checked = isPaid;
    checkbox.onclick = async (e) => {
      e.stopPropagation();
      if (!isPaid) {
        await this.plugin.markOneTimeExpensePaid(expense.id, true);
        this.refresh();
      } else {
        await this.plugin.markOneTimeExpensePaid(expense.id, false);
        this.refresh();
      }
    };
    const content = item.createDiv("expense-content");
    const nameDiv = content.createDiv("expense-name");
    nameDiv.setText(expense.name);
    const badge = nameDiv.createSpan({ text: " (One-Time)", cls: "expense-type-badge" });
    badge.style.fontSize = "0.8em";
    badge.style.color = "var(--text-muted)";
    badge.style.marginLeft = "5px";
    if (isOverdue) {
      nameDiv.createSpan({ text: " \u26A0\uFE0F OVERDUE", cls: "overdue-badge" });
    }
    const details = content.createDiv("expense-details");
    const symbol = (expense.currency || "USD") === "USD" ? "$" : (expense.currency || "USD") === "BOB" ? "Bs " : `${expense.currency} `;
    details.innerHTML = `
            ${symbol}${expense.amount.toFixed(2)} \u2022 Date: ${expense.date} \u2022 ${expense.paymentMethod}
            ${expense.confirmationNumber ? `<br>Confirmation: ${expense.confirmationNumber}` : ""}
            ${expense.paidDate ? `<br>Paid: ${expense.paidDate}` : ""}
        `;
    const actions = item.createDiv("expense-actions");
    this.addContextMenu(actions, expense, "onetime");
  }
  addContextMenu(container, expense, type) {
    const menuBtn = container.createEl("button", { text: "\u22EE" });
    menuBtn.onclick = (e) => {
      e.stopPropagation();
      const menu = new import_obsidian.Menu();
      menu.addItem((item) => {
        item.setTitle("Edit").setIcon("pencil").onClick(() => {
          new AddExpenseModal(this.app, this.plugin, expense).open();
        });
      });
      if (type === "recurring") {
        menu.addItem((item) => {
          item.setTitle("View History").setIcon("history").onClick(() => {
            new HistoryModal(this.app, this.plugin, expense).open();
          });
        });
        menu.addItem((item) => {
          item.setTitle("Archive").setIcon("archive").onClick(async () => {
            await this.plugin.archiveExpense(expense.id);
            this.refresh();
          });
        });
        menu.addItem((item) => {
          item.setTitle("Delete").setIcon("trash").onClick(async () => {
            await this.plugin.deleteExpense(expense.id);
            this.refresh();
          });
        });
      } else {
        menu.addItem((item) => {
          item.setTitle("Delete").setIcon("trash").onClick(async () => {
            await this.plugin.deleteOneTimeExpense(expense.id);
            this.refresh();
          });
        });
      }
      menu.showAtMouseEvent(e);
    };
  }
  async onClose() {
  }
};
var AddExpenseModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense) {
    super(app);
    this.plugin = plugin;
    if (expense && "date" in expense) {
      this.oneTimeExpense = expense;
      this.expense = null;
      this.type = "onetime";
    } else {
      this.expense = expense;
      this.oneTimeExpense = null;
      this.type = "recurring";
    }
  }
  onOpen() {
    var _a, _b;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.expense || this.oneTimeExpense ? "Edit Expense" : "Add Expense" });
    const form = contentEl.createDiv("expense-form");
    if (!this.expense && !this.oneTimeExpense) {
      new import_obsidian.Setting(form).setName("Expense Type").addDropdown((dropdown) => {
        dropdown.addOption("recurring", "Recurring (Monthly)").addOption("onetime", "One-Time").setValue(this.type).onChange(async (value) => {
          this.type = value;
          this.onOpen();
        });
      });
    }
    new import_obsidian.Setting(form).setName("Expense Name").addText((text) => {
      var _a2, _b2;
      text.setValue(((_a2 = this.expense) == null ? void 0 : _a2.name) || ((_b2 = this.oneTimeExpense) == null ? void 0 : _b2.name) || "");
      text.inputEl.id = "expense-name";
    });
    const currencySetting = new import_obsidian.Setting(form).setName("Currency").addDropdown((dropdown) => {
      var _a2, _b2, _c, _d;
      dropdown.addOption("USD", "USD ($)").addOption("BOB", "BOB (Bs)").addOption("EUR", "EUR (\u20AC)").addOption("GBP", "GBP (\xA3)").addOption("OTHER", "Other (Custom)").setValue(
        ["USD", "BOB", "EUR", "GBP"].includes(((_a2 = this.expense) == null ? void 0 : _a2.currency) || ((_b2 = this.oneTimeExpense) == null ? void 0 : _b2.currency) || "USD") ? ((_c = this.expense) == null ? void 0 : _c.currency) || ((_d = this.oneTimeExpense) == null ? void 0 : _d.currency) || "USD" : "OTHER"
      );
      dropdown.selectEl.id = "expense-currency-select";
      dropdown.onChange((value) => {
        const customInput = document.getElementById("expense-currency-custom-container");
        if (customInput) {
          customInput.style.display = value === "OTHER" ? "block" : "none";
        }
      });
    });
    const customCurrencyDiv = form.createDiv();
    customCurrencyDiv.id = "expense-currency-custom-container";
    customCurrencyDiv.style.display = ["USD", "BOB", "EUR", "GBP"].includes(((_a = this.expense) == null ? void 0 : _a.currency) || ((_b = this.oneTimeExpense) == null ? void 0 : _b.currency) || "USD") ? "none" : "block";
    new import_obsidian.Setting(customCurrencyDiv).setName("Custom Currency Code").setDesc("e.g., CAD, JPY, AUD").addText((text) => {
      var _a2, _b2;
      const current = ((_a2 = this.expense) == null ? void 0 : _a2.currency) || ((_b2 = this.oneTimeExpense) == null ? void 0 : _b2.currency) || "USD";
      text.setValue(["USD", "BOB", "EUR", "GBP"].includes(current) ? "" : current);
      text.inputEl.id = "expense-currency-custom";
    });
    new import_obsidian.Setting(form).setName("Amount").addText((text) => {
      var _a2, _b2;
      text.setValue(((_a2 = this.expense) == null ? void 0 : _a2.amount.toString()) || ((_b2 = this.oneTimeExpense) == null ? void 0 : _b2.amount.toString()) || "");
      text.inputEl.type = "number";
      text.inputEl.step = "0.01";
      text.inputEl.id = "expense-amount";
    });
    if (this.type === "recurring") {
      new import_obsidian.Setting(form).setName("Due Day of Month").setDesc("1-31").addText((text) => {
        var _a2;
        text.setValue(((_a2 = this.expense) == null ? void 0 : _a2.dueDay.toString()) || "1");
        text.inputEl.type = "number";
        text.inputEl.min = "1";
        text.inputEl.max = "31";
        text.inputEl.id = "expense-due-day";
      });
      new import_obsidian.Setting(form).setName("Start Month").setDesc("YYYY-MM format").addText((text) => {
        var _a2;
        text.setValue(((_a2 = this.expense) == null ? void 0 : _a2.startDate) || (0, import_obsidian.moment)().format("YYYY-MM"));
        text.inputEl.id = "expense-start-date";
      });
      new import_obsidian.Setting(form).setName("End Month (Optional)").setDesc("YYYY-MM format - leave empty for ongoing").addText((text) => {
        var _a2;
        text.setValue(((_a2 = this.expense) == null ? void 0 : _a2.endDate) || "");
        text.inputEl.id = "expense-end-date";
      });
    } else {
      new import_obsidian.Setting(form).setName("Date").setDesc("YYYY-MM-DD format").addText((text) => {
        var _a2;
        text.setValue(((_a2 = this.oneTimeExpense) == null ? void 0 : _a2.date) || (0, import_obsidian.moment)().format("YYYY-MM-DD"));
        text.inputEl.type = "date";
        text.inputEl.id = "expense-date";
      });
    }
    new import_obsidian.Setting(form).setName("Payment Method").addText((text) => {
      var _a2, _b2;
      text.setValue(((_a2 = this.expense) == null ? void 0 : _a2.paymentMethod) || ((_b2 = this.oneTimeExpense) == null ? void 0 : _b2.paymentMethod) || "");
      text.inputEl.id = "expense-payment-method";
    });
    new import_obsidian.Setting(form).setName("Category (Optional)").addText((text) => {
      var _a2, _b2;
      text.setValue(((_a2 = this.expense) == null ? void 0 : _a2.category) || ((_b2 = this.oneTimeExpense) == null ? void 0 : _b2.category) || "");
      text.inputEl.id = "expense-category";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const saveBtn = buttonDiv.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      await this.handleSubmit();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  async handleSubmit() {
    var _a, _b, _c, _d, _e, _f;
    const name = document.getElementById("expense-name").value;
    let currency = document.getElementById("expense-currency-select").value;
    if (currency === "OTHER") {
      currency = document.getElementById("expense-currency-custom").value.toUpperCase();
      if (!currency) {
        new import_obsidian.Notice("Please enter a custom currency code");
        return;
      }
    }
    const amount = parseFloat(document.getElementById("expense-amount").value);
    const paymentMethod = document.getElementById("expense-payment-method").value;
    const category = document.getElementById("expense-category").value;
    if (!name || isNaN(amount) || !paymentMethod) {
      new import_obsidian.Notice("Please fill in all required fields");
      return;
    }
    if (this.type === "recurring") {
      const dueDayStr = document.getElementById("expense-due-day").value;
      const startDate = document.getElementById("expense-start-date").value;
      const endDate = document.getElementById("expense-end-date").value;
      const dueDay = parseInt(dueDayStr);
      if (!dueDay || !startDate) {
        new import_obsidian.Notice("Please fill in all required fields for recurring expense");
        return;
      }
      const expense = {
        id: ((_a = this.expense) == null ? void 0 : _a.id) || `exp-${Date.now()}`,
        name,
        amount,
        currency,
        dueDay,
        paymentMethod,
        startDate,
        endDate: endDate || void 0,
        category: category || void 0,
        archived: ((_b = this.expense) == null ? void 0 : _b.archived) || false
      };
      if (this.expense) {
        await this.plugin.updateRecurringExpense(expense);
      } else {
        await this.plugin.addRecurringExpense(expense);
      }
    } else {
      const date = document.getElementById("expense-date").value;
      if (!date) {
        new import_obsidian.Notice("Please select a date for the one-time expense");
        return;
      }
      const expense = {
        id: ((_c = this.oneTimeExpense) == null ? void 0 : _c.id) || `one-${Date.now()}`,
        name,
        amount,
        currency,
        date,
        paymentMethod,
        category: category || void 0,
        paid: ((_d = this.oneTimeExpense) == null ? void 0 : _d.paid) || false,
        paidDate: (_e = this.oneTimeExpense) == null ? void 0 : _e.paidDate,
        confirmationNumber: (_f = this.oneTimeExpense) == null ? void 0 : _f.confirmationNumber
      };
      if (this.oneTimeExpense) {
        await this.plugin.updateOneTimeExpense(expense);
      } else {
        await this.plugin.addOneTimeExpense(expense);
      }
    }
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var MarkPaidModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense, month, onComplete) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
    this.month = month;
    this.onComplete = onComplete;
    this.isOneTime = "date" in expense;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Mark as Paid" });
    contentEl.createEl("p", { text: `${this.expense.name} - $${this.expense.amount.toFixed(2)}` });
    const form = contentEl.createDiv();
    new import_obsidian.Setting(form).setName("Confirmation Number (Optional)").addText((text) => {
      text.inputEl.id = "confirmation-number";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const saveBtn = buttonDiv.createEl("button", { text: "Mark Paid", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      const confirmationNumber = document.getElementById("confirmation-number").value;
      if (this.isOneTime) {
        await this.plugin.markOneTimeExpensePaid(this.expense.id, true, confirmationNumber || void 0);
      } else {
        await this.plugin.markExpensePaid(this.expense.id, this.month, true, confirmationNumber || void 0);
      }
      this.onComplete();
      this.close();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var HistoryModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: `Payment History: ${this.expense.name}` });
    const history = this.plugin.settings.monthlyPayments.filter((p) => p.expenseId === this.expense.id).sort((a, b) => b.month.localeCompare(a.month));
    if (history.length === 0) {
      contentEl.createEl("p", { text: "No payment history" });
    } else {
      const table = contentEl.createEl("table", { cls: "expense-history-table" });
      const thead = table.createEl("thead");
      const headerRow = thead.createEl("tr");
      headerRow.createEl("th", { text: "Month" });
      headerRow.createEl("th", { text: "Status" });
      headerRow.createEl("th", { text: "Paid Date" });
      headerRow.createEl("th", { text: "Confirmation" });
      const tbody = table.createEl("tbody");
      history.forEach((payment) => {
        const row = tbody.createEl("tr");
        row.createEl("td", { text: (0, import_obsidian.moment)(payment.month, "YYYY-MM").format("MMM YYYY") });
        row.createEl("td", { text: payment.paid ? "\u2705 Paid" : "\u2B1C Unpaid" });
        row.createEl("td", { text: payment.paidDate || "-" });
        row.createEl("td", { text: payment.confirmationNumber || "-" });
      });
    }
    const closeBtn = contentEl.createEl("button", { text: "Close" });
    closeBtn.onclick = () => this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SupportModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("expense-tracker-support-modal");
    const header = contentEl.createEl("h2", { text: "\u{1F499} Support Monthly Expense Tracker" });
    header.style.color = "var(--interactive-accent)";
    contentEl.createEl("p", {
      text: "Thank you for considering supporting this plugin! Your support helps maintain and improve this tool."
    });
    const paypalSection = contentEl.createDiv("support-section");
    paypalSection.createEl("h3", { text: "\u{1F4B3} PayPal" });
    paypalSection.createEl("p", { text: "One-time or recurring donations via PayPal:" });
    const paypalBtn = paypalSection.createEl("a", {
      text: "\u2192 Donate via PayPal",
      href: "https://www.paypal.com/paypalme/VictorZenteno"
    });
    paypalBtn.addClass("support-link");
    const cryptoSection = contentEl.createDiv("support-section");
    cryptoSection.createEl("h3", { text: "\u{1FA99} Cryptocurrency (USDC/USDT)" });
    cryptoSection.createEl("p", { text: "Support with stablecoins on multiple networks:" });
    const cryptoAddresses = cryptoSection.createDiv("crypto-addresses");
    const usdcDiv = cryptoAddresses.createDiv("crypto-address");
    usdcDiv.createEl("strong", { text: "USDC (Base Network - Low Fees):" });
    const usdcAddress = usdcDiv.createEl("code", { text: "0x1023142d0548b63542f2a4803b6724d4c26b8bda" });
    usdcAddress.style.display = "block";
    usdcAddress.style.marginTop = "5px";
    usdcAddress.style.padding = "5px";
    usdcAddress.style.background = "var(--background-secondary)";
    usdcAddress.style.borderRadius = "4px";
    usdcAddress.style.fontSize = "0.85em";
    usdcAddress.style.wordBreak = "break-all";
    const usdcNote = usdcDiv.createEl("small", { text: "Also works on: Ethereum, Polygon, Arbitrum, Optimism" });
    usdcNote.style.display = "block";
    usdcNote.style.marginTop = "3px";
    usdcNote.style.color = "var(--text-muted)";
    const usdtDiv = cryptoAddresses.createDiv("crypto-address");
    usdtDiv.createEl("strong", { text: "USDT (Tron TRC-20 - Ultra Low Fees):" });
    const usdtAddress = usdtDiv.createEl("code", { text: "TAV7qTGgvn8GnYJfXfes73tD2dAPQJ3L2W" });
    usdtAddress.style.display = "block";
    usdtAddress.style.marginTop = "5px";
    usdtAddress.style.padding = "5px";
    usdtAddress.style.background = "var(--background-secondary)";
    usdtAddress.style.borderRadius = "4px";
    usdtAddress.style.fontSize = "0.85em";
    usdtAddress.style.wordBreak = "break-all";
    const cryptoNote = cryptoSection.createEl("p", { text: "\u26A0\uFE0F Important: Double-check the network before sending!" });
    cryptoNote.style.color = "var(--text-error)";
    cryptoNote.style.fontSize = "0.9em";
    cryptoNote.style.marginTop = "10px";
    const cryptoTip = cryptoSection.createEl("p", { text: "\u{1F4A1} Tip: Use Tron for USDT or Base for USDC to minimize fees!" });
    cryptoTip.style.fontSize = "0.9em";
    cryptoTip.style.marginTop = "5px";
    cryptoTip.style.color = "var(--text-muted)";
    const coffeeSection = contentEl.createDiv("support-section");
    coffeeSection.createEl("h3", { text: "\u2615 Buy Me a Coffee" });
    coffeeSection.createEl("p", { text: "Simple, friendly way to support:" });
    const coffeeBtn = coffeeSection.createEl("a", {
      text: "\u2192 Buy Me a Coffee",
      href: "https://buymeacoffee.com/rvzen"
    });
    coffeeBtn.addClass("support-link");
    const otherSection = contentEl.createDiv("support-section");
    otherSection.createEl("h3", { text: "\u{1F31F} Other Ways to Support" });
    const otherList = otherSection.createEl("ul");
    otherList.createEl("li", { text: "\u2B50 Star the GitHub repository" });
    otherList.createEl("li", { text: "\u{1F41B} Report bugs and issues" });
    otherList.createEl("li", { text: "\u{1F4A1} Suggest new features" });
    otherList.createEl("li", { text: "\u{1F4DD} Improve documentation" });
    otherList.createEl("li", { text: "\u{1F5E3}\uFE0F Tell others about the plugin" });
    const footer = contentEl.createDiv("support-footer");
    footer.style.marginTop = "20px";
    footer.style.padding = "15px";
    footer.style.background = "var(--background-secondary)";
    footer.style.borderRadius = "8px";
    footer.style.textAlign = "center";
    footer.createEl("p", { text: "Thank you for your support! \u{1F64F}" });
    footer.createEl("small", { text: "All donations help maintain and improve this plugin" });
    const closeBtn = contentEl.createEl("button", { text: "Close" });
    closeBtn.style.marginTop = "20px";
    closeBtn.style.width = "100%";
    closeBtn.onclick = () => this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ReportModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Expense Report" });
    const form = contentEl.createDiv();
    new import_obsidian.Setting(form).setName("Start Month").setDesc("YYYY-MM format").addText((text) => {
      text.setValue((0, import_obsidian.moment)().subtract(5, "months").format("YYYY-MM"));
      text.inputEl.id = "report-start";
    });
    new import_obsidian.Setting(form).setName("End Month").setDesc("YYYY-MM format").addText((text) => {
      text.setValue((0, import_obsidian.moment)().format("YYYY-MM"));
      text.inputEl.id = "report-end";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const generateBtn = buttonDiv.createEl("button", { text: "Generate", cls: "mod-cta" });
    generateBtn.onclick = () => {
      this.generateReport();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  async generateReport() {
    const startMonth = document.getElementById("report-start").value;
    const endMonth = document.getElementById("report-end").value;
    const report = this.buildReport(startMonth, endMonth);
    const folderPath = `${this.plugin.settings.monthlyNotesFolder}/Expense Reports`;
    const fileName = `Expense Report ${startMonth} to ${endMonth}.md`;
    const filePath = `${folderPath}/${fileName}`;
    try {
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (!folder) {
        await this.app.vault.createFolder(folderPath);
      }
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian.TFile) {
        await this.app.vault.modify(existingFile, report);
        new import_obsidian.Notice("Report updated");
      } else {
        await this.app.vault.create(filePath, report);
        new import_obsidian.Notice("Report generated");
      }
      this.close();
    } catch (error) {
      console.error("Error creating report:", error);
      new import_obsidian.Notice("Error creating report");
    }
  }
  buildReport(startMonth, endMonth) {
    let report = `# Expense Report

`;
    report += `**Period:** ${(0, import_obsidian.moment)(startMonth, "YYYY-MM").format("MMM YYYY")} - ${(0, import_obsidian.moment)(endMonth, "YYYY-MM").format("MMM YYYY")}

`;
    report += `**Generated:** ${(0, import_obsidian.moment)().format("YYYY-MM-DD HH:mm")}

---

`;
    const start = (0, import_obsidian.moment)(startMonth, "YYYY-MM");
    const end = (0, import_obsidian.moment)(endMonth, "YYYY-MM");
    const totalAmount = {};
    const totalPaid = {};
    const totalUnpaid = {};
    report += `## Monthly Breakdown

`;
    let current = start.clone();
    while (current.isSameOrBefore(end)) {
      const month = current.format("YYYY-MM");
      const recurringExpenses = this.plugin.getExpensesForMonth(month);
      const oneTimeExpenses = this.plugin.getOneTimeExpensesForMonth(month);
      const monthTotals = {};
      const process = (amount, currency, paid) => {
        if (!monthTotals[currency]) monthTotals[currency] = { total: 0, paid: 0 };
        monthTotals[currency].total += amount;
        if (paid) monthTotals[currency].paid += amount;
        if (!totalAmount[currency]) totalAmount[currency] = 0;
        if (!totalPaid[currency]) totalPaid[currency] = 0;
        totalAmount[currency] += amount;
        if (paid) totalPaid[currency] += amount;
      };
      recurringExpenses.forEach((e) => {
        const payment = this.plugin.getPayment(e.id, month);
        process(e.amount, e.currency || "USD", (payment == null ? void 0 : payment.paid) || false);
      });
      oneTimeExpenses.forEach((e) => {
        process(e.amount, e.currency || "USD", e.paid);
      });
      report += `### ${current.format("MMMM YYYY")}

`;
      const currencies = Object.keys(monthTotals).sort();
      if (currencies.length === 0) {
        report += `- No expenses
`;
      } else {
        currencies.forEach((currency) => {
          let symbol = currency + " ";
          if (currency === "USD") symbol = "$";
          else if (currency === "BOB") symbol = "Bs ";
          else if (currency === "EUR") symbol = "\u20AC";
          else if (currency === "GBP") symbol = "\xA3";
          const data = monthTotals[currency];
          const unpaid = data.total - data.paid;
          report += `- **${currency}**: Total: ${symbol}${data.total.toFixed(2)} | Paid: ${symbol}${data.paid.toFixed(2)} | Unpaid: ${symbol}${unpaid.toFixed(2)}
`;
        });
      }
      report += `
`;
      current.add(1, "month");
    }
    report += `## Summary

`;
    const allCurrencies = Object.keys(totalAmount).sort();
    if (allCurrencies.length === 0) {
      report += `No expenses found in this period.

`;
    } else {
      allCurrencies.forEach((currency) => {
        let symbol = currency + " ";
        if (currency === "USD") symbol = "$";
        else if (currency === "BOB") symbol = "Bs ";
        else if (currency === "EUR") symbol = "\u20AC";
        else if (currency === "GBP") symbol = "\xA3";
        const total = totalAmount[currency];
        const paid = totalPaid[currency] || 0;
        const unpaid = total - paid;
        const rate = total > 0 ? (paid / total * 100).toFixed(1) : "0";
        report += `### ${currency}
`;
        report += `- **Total Amount:** ${symbol}${total.toFixed(2)}
`;
        report += `- **Total Paid:** ${symbol}${paid.toFixed(2)}
`;
        report += `- **Total Unpaid:** ${symbol}${unpaid.toFixed(2)}
`;
        report += `- **Payment Rate:** ${rate}%

`;
      });
    }
    report += `## Recurring Expense Breakdown

`;
    const allExpenses = this.plugin.settings.recurringExpenses.filter((e) => !e.archived);
    allExpenses.forEach((expense) => {
      const payments = this.plugin.settings.monthlyPayments.filter(
        (p) => p.expenseId === expense.id && (0, import_obsidian.moment)(p.month, "YYYY-MM").isBetween(start, end, null, "[]")
      );
      const paidCount = payments.filter((p) => p.paid).length;
      const totalCount = payments.length;
      const cur = expense.currency || "USD";
      let symbol = cur + " ";
      if (cur === "USD") symbol = "$";
      else if (cur === "BOB") symbol = "Bs ";
      else if (cur === "EUR") symbol = "\u20AC";
      else if (cur === "GBP") symbol = "\xA3";
      report += `### ${expense.name}

`;
      report += `- Amount: ${symbol}${expense.amount.toFixed(2)}
`;
      report += `- Payment Method: ${expense.paymentMethod}
`;
      report += `- Paid: ${paidCount}/${totalCount} months
`;
      report += `- Total Paid: ${symbol}${(paidCount * expense.amount).toFixed(2)}

`;
    });
    report += `## One-Time Expenses List

`;
    const allOneTime = this.plugin.settings.oneTimeExpenses.filter(
      (e) => (0, import_obsidian.moment)(e.date).isBetween(start, end, null, "[]")
    ).sort((a, b) => a.date.localeCompare(b.date));
    if (allOneTime.length > 0) {
      allOneTime.forEach((e) => {
        const status = e.paid ? "Paid" : "Unpaid";
        const symbol = (e.currency || "USD") === "USD" ? "$" : (e.currency || "USD") === "BOB" ? "Bs " : `${e.currency} `;
        report += `- ${e.date}: **${e.name}** - ${symbol}${e.amount.toFixed(2)} (${status})
`;
      });
    } else {
      report += `No one-time expenses in this period.
`;
    }
    return report;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ExpenseTrackerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Monthly Expense Tracker Settings" });
    const supportSection = containerEl.createDiv("expense-tracker-support-section");
    supportSection.style.padding = "20px";
    supportSection.style.marginBottom = "20px";
    supportSection.style.background = "var(--background-secondary)";
    supportSection.style.borderRadius = "8px";
    supportSection.style.border = "2px solid var(--interactive-accent)";
    const supportHeader = supportSection.createEl("h3", { text: "\u{1F499} Support This Plugin" });
    supportHeader.style.marginTop = "0";
    supportHeader.style.color = "var(--interactive-accent)";
    supportSection.createEl("p", {
      text: "If you find this plugin helpful, consider supporting its development!"
    });
    const supportLinks = supportSection.createDiv();
    supportLinks.style.display = "flex";
    supportLinks.style.gap = "10px";
    supportLinks.style.flexWrap = "wrap";
    supportLinks.style.marginTop = "10px";
    const paypalBtn = supportLinks.createEl("a", {
      text: "\u{1F4B3} PayPal",
      href: "https://www.paypal.com/paypalme/VictorZenteno"
    });
    paypalBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600;";
    const cryptoBtn = supportLinks.createEl("button", {
      text: "\u{1FA99} USDC/USDT"
    });
    cryptoBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600; cursor: pointer; border: none;";
    cryptoBtn.onclick = () => {
      new SupportModal(this.app).open();
    };
    const coffeeBtn = supportLinks.createEl("a", {
      text: "\u2615 Coffee",
      href: "https://buymeacoffee.com/rvzen"
    });
    coffeeBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600;";
    const supportNote = supportSection.createEl("p", {
      text: "Your support helps maintain and improve this plugin. Thank you! \u{1F64F}"
    });
    supportNote.style.marginBottom = "0";
    supportNote.style.fontSize = "0.9em";
    supportNote.style.color = "var(--text-muted)";
    supportNote.style.marginTop = "10px";
    containerEl.createEl("hr", { cls: "expense-tracker-divider" });
    containerEl.createEl("h2", { text: "Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Monthly Notes Folder").setDesc("Folder where monthly expense notes will be created").addText((text) => text.setValue(this.plugin.settings.monthlyNotesFolder).onChange(async (value) => {
      this.plugin.settings.monthlyNotesFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Auto-create Monthly Notes").setDesc("Automatically create monthly notes when a new month begins").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoCreateMonthlyNotes).onChange(async (value) => {
      this.plugin.settings.autoCreateMonthlyNotes = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Show Status Bar").setDesc("Display unpaid expense count in status bar").addToggle((toggle) => toggle.setValue(this.plugin.settings.showStatusBar).onChange(async (value) => {
      this.plugin.settings.showStatusBar = value;
      await this.plugin.saveSettings();
      if (value && !this.plugin.statusBarItem) {
        this.plugin.statusBarItem = this.plugin.addStatusBarItem();
        this.plugin.updateStatusBar();
      } else if (!value && this.plugin.statusBarItem) {
        this.plugin.statusBarItem.remove();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Monthly Note Template").setDesc("Template for monthly notes. Use {{month}} and {{expenses}} as placeholders.").addTextArea((text) => {
      text.setValue(this.plugin.settings.monthlyNoteTemplate);
      text.inputEl.rows = 10;
      text.inputEl.cols = 50;
      text.onChange(async (value) => {
        this.plugin.settings.monthlyNoteTemplate = value;
        await this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcbiAgICBBcHAsXG4gICAgUGx1Z2luLFxuICAgIFBsdWdpblNldHRpbmdUYWIsXG4gICAgU2V0dGluZyxcbiAgICBURmlsZSxcbiAgICBXb3Jrc3BhY2VMZWFmLFxuICAgIEl0ZW1WaWV3LFxuICAgIE5vdGljZSxcbiAgICBNb2RhbCxcbiAgICBtb21lbnQsXG4gICAgTWVudVxufSBmcm9tICdvYnNpZGlhbic7XG5cbmludGVyZmFjZSBSZWN1cnJpbmdFeHBlbnNlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBjdXJyZW5jeT86IHN0cmluZzsgLy8gZS5nLiwgJ1VTRCcsICdCT0InXG4gICAgZHVlRGF5OiBudW1iZXI7IC8vIERheSBvZiBtb250aCAoMS0zMSlcbiAgICBwYXltZW50TWV0aG9kOiBzdHJpbmc7XG4gICAgc3RhcnREYXRlOiBzdHJpbmc7IC8vIFlZWVktTU0gZm9ybWF0XG4gICAgZW5kRGF0ZT86IHN0cmluZzsgLy8gWVlZWS1NTSBmb3JtYXQsIG9wdGlvbmFsXG4gICAgYXJjaGl2ZWQ6IGJvb2xlYW47XG4gICAgY2F0ZWdvcnk/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBPbmVUaW1lRXhwZW5zZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgY3VycmVuY3k/OiBzdHJpbmc7IC8vIGUuZy4sICdVU0QnLCAnQk9CJ1xuICAgIGRhdGU6IHN0cmluZzsgLy8gWVlZWS1NTS1ERFxuICAgIHBheW1lbnRNZXRob2Q6IHN0cmluZztcbiAgICBwYWlkOiBib29sZWFuO1xuICAgIHBhaWREYXRlPzogc3RyaW5nO1xuICAgIGNhdGVnb3J5Pzogc3RyaW5nO1xuICAgIGNvbmZpcm1hdGlvbk51bWJlcj86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE1vbnRobHlQYXltZW50IHtcbiAgICBleHBlbnNlSWQ6IHN0cmluZztcbiAgICBtb250aDogc3RyaW5nOyAvLyBZWVlZLU1NIGZvcm1hdFxuICAgIHBhaWQ6IGJvb2xlYW47XG4gICAgcGFpZERhdGU/OiBzdHJpbmc7XG4gICAgY29uZmlybWF0aW9uTnVtYmVyPzogc3RyaW5nO1xuICAgIG5vdGVzPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgRXhwZW5zZVRyYWNrZXJTZXR0aW5ncyB7XG4gICAgcmVjdXJyaW5nRXhwZW5zZXM6IFJlY3VycmluZ0V4cGVuc2VbXTtcbiAgICBvbmVUaW1lRXhwZW5zZXM6IE9uZVRpbWVFeHBlbnNlW107XG4gICAgbW9udGhseVBheW1lbnRzOiBNb250aGx5UGF5bWVudFtdO1xuICAgIG1vbnRobHlOb3Rlc0ZvbGRlcjogc3RyaW5nO1xuICAgIG1vbnRobHlOb3RlVGVtcGxhdGU6IHN0cmluZztcbiAgICBhdXRvQ3JlYXRlTW9udGhseU5vdGVzOiBib29sZWFuO1xuICAgIHNob3dTdGF0dXNCYXI6IGJvb2xlYW47XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEV4cGVuc2VUcmFja2VyU2V0dGluZ3MgPSB7XG4gICAgcmVjdXJyaW5nRXhwZW5zZXM6IFtdLFxuICAgIG9uZVRpbWVFeHBlbnNlczogW10sXG4gICAgbW9udGhseVBheW1lbnRzOiBbXSxcbiAgICBtb250aGx5Tm90ZXNGb2xkZXI6ICdNb250aGx5IEV4cGVuc2VzJyxcbiAgICBtb250aGx5Tm90ZVRlbXBsYXRlOiAnIyB7e21vbnRofX0gLSBNb250aGx5IEV4cGVuc2VzXFxuXFxuIyMgRXhwZW5zZSBUcmFja2VyXFxuXFxue3tleHBlbnNlc319XFxuXFxuLS0tXFxuKkdlbmVyYXRlZCBieSBNb250aGx5IEV4cGVuc2UgVHJhY2tlcionLFxuICAgIGF1dG9DcmVhdGVNb250aGx5Tm90ZXM6IHRydWUsXG4gICAgc2hvd1N0YXR1c0JhcjogdHJ1ZVxufTtcblxuY29uc3QgVklFV19UWVBFX0RBU0hCT0FSRCA9ICdleHBlbnNlLXRyYWNrZXItZGFzaGJvYXJkJztcbmNvbnN0IFZJRVdfVFlQRV9DQUxFTkRBUiA9ICdleHBlbnNlLXRyYWNrZXItY2FsZW5kYXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBFeHBlbnNlVHJhY2tlclNldHRpbmdzO1xuICAgIHN0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHZpZXdzXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgICAgICAgVklFV19UWVBFX0RBU0hCT0FSRCxcbiAgICAgICAgICAgIChsZWFmKSA9PiBuZXcgRGFzaGJvYXJkVmlldyhsZWFmLCB0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ3dhbGxldCcsICdNb250aGx5IEV4cGVuc2UgVHJhY2tlcicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVEYXNoYm9hcmRWaWV3KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBjb21tYW5kc1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLWV4cGVuc2UtZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIG5hbWU6ICdPcGVuIEV4cGVuc2UgRGFzaGJvYXJkJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZURhc2hib2FyZFZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWRkLXJlY3VycmluZy1leHBlbnNlJyxcbiAgICAgICAgICAgIG5hbWU6ICdBZGQgRXhwZW5zZScsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBBZGRFeHBlbnNlTW9kYWwodGhpcy5hcHAsIHRoaXMsIG51bGwpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnY3JlYXRlLWN1cnJlbnQtbW9udGgtbm90ZScsXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIEN1cnJlbnQgTW9udGggTm90ZScsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTW9udGhseU5vdGUoY3VycmVudE1vbnRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZ2VuZXJhdGUtZXhwZW5zZS1yZXBvcnQnLFxuICAgICAgICAgICAgbmFtZTogJ0dlbmVyYXRlIEV4cGVuc2UgUmVwb3J0JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IFJlcG9ydE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFN0YXR1cyBiYXJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd1N0YXR1c0Jhcikge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXV0by1jcmVhdGUgbW9udGhseSBub3RlIGlmIG5lZWRlZFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQ3JlYXRlTW9udGhseU5vdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQW5kQ3JlYXRlTW9udGhseU5vdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldHRpbmdzIHRhYlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEV4cGVuc2VUcmFja2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdNb250aGx5IEV4cGVuc2UgVHJhY2tlciBwbHVnaW4gbG9hZGVkJyk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWN0aXZhdGVEYXNoYm9hcmRWaWV3KCkge1xuICAgICAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cbiAgICAgICAgbGV0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9EQVNIQk9BUkQpWzBdO1xuXG4gICAgICAgIGlmICghbGVhZikge1xuICAgICAgICAgICAgY29uc3QgbmV3TGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgICAgICAgIGlmIChuZXdMZWFmKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfREFTSEJPQVJELFxuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZWFmID0gbmV3TGVhZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsZWFmKSB7XG4gICAgICAgICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrQW5kQ3JlYXRlTW9udGhseU5vdGUoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICBjb25zdCBtb250aGx5Tm90ZSA9IGF3YWl0IHRoaXMuZ2V0TW9udGhseU5vdGVGaWxlKGN1cnJlbnRNb250aCk7XG5cbiAgICAgICAgaWYgKCFtb250aGx5Tm90ZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVNb250aGx5Tm90ZShjdXJyZW50TW9udGgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlTW9udGhseU5vdGUobW9udGg6IHN0cmluZyk6IFByb21pc2U8VEZpbGU+IHtcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHRoaXMuc2V0dGluZ3MubW9udGhseU5vdGVzRm9sZGVyO1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke21vbnRofS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7Zm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gO1xuXG4gICAgICAgIC8vIEVuc3VyZSBmb2xkZXIgZXhpc3RzXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgICAgaWYgKCFmb2xkZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBNb250aGx5IG5vdGUgZm9yICR7bW9udGh9IGFscmVhZHkgZXhpc3RzYCk7XG4gICAgICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCByZWN1cnJpbmcgZXhwZW5zZXMgZm9yIHRoaXMgbW9udGhcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSB0aGlzLmdldEV4cGVuc2VzRm9yTW9udGgobW9udGgpO1xuXG4gICAgICAgIC8vIEdldCBvbmUtdGltZSBleHBlbnNlcyBmb3IgdGhpcyBtb250aFxuICAgICAgICBjb25zdCBvbmVUaW1lRXhwZW5zZXMgPSB0aGlzLmdldE9uZVRpbWVFeHBlbnNlc0Zvck1vbnRoKG1vbnRoKTtcblxuICAgICAgICAvLyBDb3B5IHVucGFpZCBleHBlbnNlcyBmcm9tIHByZXZpb3VzIG1vbnRoXG4gICAgICAgIGNvbnN0IHByZXZNb250aCA9IG1vbWVudChtb250aCwgJ1lZWVktTU0nKS5zdWJ0cmFjdCgxLCAnbW9udGgnKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgY29uc3QgdW5wYWlkRnJvbVByZXYgPSB0aGlzLmdldFVucGFpZEV4cGVuc2VzKHByZXZNb250aCk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgZXhwZW5zZSBsaXN0XG4gICAgICAgIGxldCBleHBlbnNlTGlzdCA9ICcjIyBSZWN1cnJpbmcgRXhwZW5zZXNcXG5cXG4nO1xuICAgICAgICBleHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudCA9IHRoaXMuZ2V0UGF5bWVudChleHBlbnNlLmlkLCBtb250aCk7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBwYXltZW50Py5wYWlkID8gJ3gnIDogJyAnO1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzSWNvbiA9IHBheW1lbnQ/LnBhaWQgPyAnXHUyNzA1JyA6ICdcdTJCMUMnO1xuICAgICAgICAgICAgY29uc3QgY3VyID0gZXhwZW5zZS5jdXJyZW5jeSB8fCAnVVNEJztcbiAgICAgICAgICAgIGxldCBzeW1ib2wgPSBjdXIgKyAnICc7XG4gICAgICAgICAgICBpZiAoY3VyID09PSAnVVNEJykgc3ltYm9sID0gJyQnO1xuICAgICAgICAgICAgZWxzZSBpZiAoY3VyID09PSAnQk9CJykgc3ltYm9sID0gJ0JzICc7XG4gICAgICAgICAgICBlbHNlIGlmIChjdXIgPT09ICdFVVInKSBzeW1ib2wgPSAnXHUyMEFDJztcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gJ0dCUCcpIHN5bWJvbCA9ICdcdTAwQTMnO1xuXG4gICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgLSBbJHtzdGF0dXN9XSAke3N0YXR1c0ljb259ICoqJHtleHBlbnNlLm5hbWV9KiogLSAke3N5bWJvbH0ke2V4cGVuc2UuYW1vdW50LnRvRml4ZWQoMil9IC0gRHVlOiAke2V4cGVuc2UuZHVlRGF5fSAtIE1ldGhvZDogJHtleHBlbnNlLnBheW1lbnRNZXRob2R9XFxuYDtcbiAgICAgICAgICAgIGV4cGVuc2VMaXN0ICs9IGAgIC0gSUQ6IFxcYCR7ZXhwZW5zZS5pZH1cXGBcXG5gO1xuICAgICAgICAgICAgaWYgKHBheW1lbnQ/LmNvbmZpcm1hdGlvbk51bWJlcikge1xuICAgICAgICAgICAgICAgIGV4cGVuc2VMaXN0ICs9IGAgIC0gQ29uZmlybWF0aW9uOiAke3BheW1lbnQuY29uZmlybWF0aW9uTnVtYmVyfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHBlbnNlTGlzdCArPSAnXFxuJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG9uZVRpbWVFeHBlbnNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBleHBlbnNlTGlzdCArPSAnIyMgT25lLVRpbWUgRXhwZW5zZXNcXG5cXG4nO1xuICAgICAgICAgICAgb25lVGltZUV4cGVuc2VzLmZvckVhY2goZXhwZW5zZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZXhwZW5zZS5wYWlkID8gJ3gnIDogJyAnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1c0ljb24gPSBleHBlbnNlLnBhaWQgPyAnXHUyNzA1JyA6ICdcdTJCMUMnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1ciA9IGV4cGVuc2UuY3VycmVuY3kgfHwgJ1VTRCc7XG4gICAgICAgICAgICAgICAgbGV0IHN5bWJvbCA9IGN1ciArICcgJztcbiAgICAgICAgICAgICAgICBpZiAoY3VyID09PSAnVVNEJykgc3ltYm9sID0gJyQnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gJ0JPQicpIHN5bWJvbCA9ICdCcyAnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gJ0VVUicpIHN5bWJvbCA9ICdcdTIwQUMnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gJ0dCUCcpIHN5bWJvbCA9ICdcdTAwQTMnO1xuXG4gICAgICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gYC0gWyR7c3RhdHVzfV0gJHtzdGF0dXNJY29ufSAqKiR7ZXhwZW5zZS5uYW1lfSoqIC0gJHtzeW1ib2x9JHtleHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfSAtIERhdGU6ICR7ZXhwZW5zZS5kYXRlfSAtIE1ldGhvZDogJHtleHBlbnNlLnBheW1lbnRNZXRob2R9XFxuYDtcbiAgICAgICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgICAtIElEOiBcXGAke2V4cGVuc2UuaWR9XFxgXFxuYDtcbiAgICAgICAgICAgICAgICBpZiAoZXhwZW5zZS5jb25maXJtYXRpb25OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gYCAgLSBDb25maXJtYXRpb246ICR7ZXhwZW5zZS5jb25maXJtYXRpb25OdW1iZXJ9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gJ1xcbic7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1bnBhaWRGcm9tUHJldi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBleHBlbnNlTGlzdCArPSAnXFxuIyMgVW5wYWlkIGZyb20gUHJldmlvdXMgTW9udGhcXG5cXG4nO1xuICAgICAgICAgICAgdW5wYWlkRnJvbVByZXYuZm9yRWFjaChleHBlbnNlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW1ib2wgPSAoZXhwZW5zZS5jdXJyZW5jeSB8fCAnVVNEJykgPT09ICdVU0QnID8gJyQnIDogKChleHBlbnNlLmN1cnJlbmN5IHx8ICdVU0QnKSA9PT0gJ0JPQicgPyAnQnMgJyA6IGAke2V4cGVuc2UuY3VycmVuY3l9IGApO1xuICAgICAgICAgICAgICAgIGV4cGVuc2VMaXN0ICs9IGAtIFsgXSBcdTI2QTBcdUZFMEYgKioke2V4cGVuc2UubmFtZX0qKiAtICR7c3ltYm9sfSR7ZXhwZW5zZS5hbW91bnQudG9GaXhlZCgyKX0gLSBPVkVSRFVFXFxuYDtcbiAgICAgICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgICAtIElEOiBcXGAke2V4cGVuc2UuaWR9XFxgXFxuXFxuYDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgbm8gZXhwZW5zZXMsIGFkZCBhIGhlbHBmdWwgbWVzc2FnZVxuICAgICAgICBpZiAoZXhwZW5zZXMubGVuZ3RoID09PSAwICYmIG9uZVRpbWVFeHBlbnNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGV4cGVuc2VMaXN0ICs9ICdcXG4qTm8gZXhwZW5zZXMgc2V0IHVwIGZvciB0aGlzIG1vbnRoIHlldC4gQ2xpY2sgXCIqKisgQWRkIEV4cGVuc2UqKlwiIGluIHRoZSBkYXNoYm9hcmQgdG8gYWRkIGV4cGVuc2VzLipcXG5cXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgY29udGVudCBmcm9tIHRlbXBsYXRlXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLnNldHRpbmdzLm1vbnRobHlOb3RlVGVtcGxhdGVcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7e21vbnRofX0nLCBtb21lbnQobW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU1NIFlZWVknKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7e2V4cGVuc2VzfX0nLCBleHBlbnNlTGlzdCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGZpbGVcbiAgICAgICAgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYENyZWF0ZWQgbW9udGhseSBub3RlIGZvciAke21vbnRofWApO1xuXG4gICAgICAgIHJldHVybiBmaWxlIGFzIFRGaWxlO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE1vbnRobHlOb3RlRmlsZShtb250aDogc3RyaW5nKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0aGlzLnNldHRpbmdzLm1vbnRobHlOb3Rlc0ZvbGRlcn0vJHttb250aH0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgcmV0dXJuIGZpbGUgaW5zdGFuY2VvZiBURmlsZSA/IGZpbGUgOiBudWxsO1xuICAgIH1cblxuICAgIGdldEV4cGVuc2VzRm9yTW9udGgobW9udGg6IHN0cmluZyk6IFJlY3VycmluZ0V4cGVuc2VbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnJlY3VycmluZ0V4cGVuc2VzLmZpbHRlcihleHBlbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChleHBlbnNlLmFyY2hpdmVkKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2VTdGFydCA9IG1vbWVudChleHBlbnNlLnN0YXJ0RGF0ZSwgJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2VFbmQgPSBleHBlbnNlLmVuZERhdGUgPyBtb21lbnQoZXhwZW5zZS5lbmREYXRlLCAnWVlZWS1NTScpIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrTW9udGggPSBtb21lbnQobW9udGgsICdZWVlZLU1NJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFmdGVyU3RhcnQgPSBjaGVja01vbnRoLmlzU2FtZU9yQWZ0ZXIoZXhwZW5zZVN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUVuZCA9ICFleHBlbnNlRW5kIHx8IGNoZWNrTW9udGguaXNTYW1lT3JCZWZvcmUoZXhwZW5zZUVuZCk7XG5cbiAgICAgICAgICAgIHJldHVybiBhZnRlclN0YXJ0ICYmIGJlZm9yZUVuZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VW5wYWlkRXhwZW5zZXMobW9udGg6IHN0cmluZyk6IFJlY3VycmluZ0V4cGVuc2VbXSB7XG4gICAgICAgIGNvbnN0IGV4cGVuc2VzID0gdGhpcy5nZXRFeHBlbnNlc0Zvck1vbnRoKG1vbnRoKTtcbiAgICAgICAgcmV0dXJuIGV4cGVuc2VzLmZpbHRlcihleHBlbnNlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLmdldFBheW1lbnQoZXhwZW5zZS5pZCwgbW9udGgpO1xuICAgICAgICAgICAgcmV0dXJuICFwYXltZW50IHx8ICFwYXltZW50LnBhaWQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFBheW1lbnQoZXhwZW5zZUlkOiBzdHJpbmcsIG1vbnRoOiBzdHJpbmcpOiBNb250aGx5UGF5bWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLm1vbnRobHlQYXltZW50cy5maW5kKFxuICAgICAgICAgICAgcCA9PiBwLmV4cGVuc2VJZCA9PT0gZXhwZW5zZUlkICYmIHAubW9udGggPT09IG1vbnRoXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgbWFya0V4cGVuc2VQYWlkKGV4cGVuc2VJZDogc3RyaW5nLCBtb250aDogc3RyaW5nLCBwYWlkOiBib29sZWFuLCBjb25maXJtYXRpb25OdW1iZXI/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQYXltZW50ID0gdGhpcy5nZXRQYXltZW50KGV4cGVuc2VJZCwgbW9udGgpO1xuXG4gICAgICAgIGlmIChleGlzdGluZ1BheW1lbnQpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nUGF5bWVudC5wYWlkID0gcGFpZDtcbiAgICAgICAgICAgIGV4aXN0aW5nUGF5bWVudC5wYWlkRGF0ZSA9IHBhaWQgPyBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGV4aXN0aW5nUGF5bWVudC5jb25maXJtYXRpb25OdW1iZXIgPSBjb25maXJtYXRpb25OdW1iZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLm1vbnRobHlQYXltZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBleHBlbnNlSWQsXG4gICAgICAgICAgICAgICAgbW9udGgsXG4gICAgICAgICAgICAgICAgcGFpZCxcbiAgICAgICAgICAgICAgICBwYWlkRGF0ZTogcGFpZCA/IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbk51bWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFJlY3VycmluZ0V4cGVuc2UoZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSkge1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJlY3VycmluZ0V4cGVuc2VzLnB1c2goZXhwZW5zZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYEFkZGVkIHJlY3VycmluZyBleHBlbnNlOiAke2V4cGVuc2UubmFtZX1gKTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRPbmVUaW1lRXhwZW5zZShleHBlbnNlOiBPbmVUaW1lRXhwZW5zZSkge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uZVRpbWVFeHBlbnNlcy5wdXNoKGV4cGVuc2UpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICBuZXcgTm90aWNlKGBBZGRlZCBvbmUtdGltZSBleHBlbnNlOiAke2V4cGVuc2UubmFtZX1gKTtcbiAgICB9XG5cbiAgICBnZXRPbmVUaW1lRXhwZW5zZXNGb3JNb250aChtb250aDogc3RyaW5nKTogT25lVGltZUV4cGVuc2VbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLm9uZVRpbWVFeHBlbnNlcy5maWx0ZXIoZXhwZW5zZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleHBlbnNlRGF0ZSA9IG1vbWVudChleHBlbnNlLmRhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIGV4cGVuc2VEYXRlLmZvcm1hdCgnWVlZWS1NTScpID09PSBtb250aDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgbWFya09uZVRpbWVFeHBlbnNlUGFpZChleHBlbnNlSWQ6IHN0cmluZywgcGFpZDogYm9vbGVhbiwgY29uZmlybWF0aW9uTnVtYmVyPzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGV4cGVuc2UgPSB0aGlzLnNldHRpbmdzLm9uZVRpbWVFeHBlbnNlcy5maW5kKGUgPT4gZS5pZCA9PT0gZXhwZW5zZUlkKTtcbiAgICAgICAgaWYgKGV4cGVuc2UpIHtcbiAgICAgICAgICAgIGV4cGVuc2UucGFpZCA9IHBhaWQ7XG4gICAgICAgICAgICBleHBlbnNlLnBhaWREYXRlID0gcGFpZCA/IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbk51bWJlcikgZXhwZW5zZS5jb25maXJtYXRpb25OdW1iZXIgPSBjb25maXJtYXRpb25OdW1iZXI7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9uZVRpbWVFeHBlbnNlKGV4cGVuc2U6IE9uZVRpbWVFeHBlbnNlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZXR0aW5ncy5vbmVUaW1lRXhwZW5zZXMuZmluZEluZGV4KGUgPT4gZS5pZCA9PT0gZXhwZW5zZS5pZCk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub25lVGltZUV4cGVuc2VzW2luZGV4XSA9IGV4cGVuc2U7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVXBkYXRlZCBleHBlbnNlOiAke2V4cGVuc2UubmFtZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZU9uZVRpbWVFeHBlbnNlKGV4cGVuc2VJZDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25lVGltZUV4cGVuc2VzID0gdGhpcy5zZXR0aW5ncy5vbmVUaW1lRXhwZW5zZXMuZmlsdGVyKGUgPT4gZS5pZCAhPT0gZXhwZW5zZUlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgbmV3IE5vdGljZSgnRXhwZW5zZSBkZWxldGVkJyk7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlUmVjdXJyaW5nRXhwZW5zZShleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maW5kSW5kZXgoZSA9PiBlLmlkID09PSBleHBlbnNlLmlkKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlc1tpbmRleF0gPSBleHBlbnNlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFVwZGF0ZWQgZXhwZW5zZTogJHtleHBlbnNlLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBhcmNoaXZlRXhwZW5zZShleHBlbnNlSWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBleHBlbnNlID0gdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maW5kKGUgPT4gZS5pZCA9PT0gZXhwZW5zZUlkKTtcbiAgICAgICAgaWYgKGV4cGVuc2UpIHtcbiAgICAgICAgICAgIGV4cGVuc2UuYXJjaGl2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEFyY2hpdmVkIGV4cGVuc2U6ICR7ZXhwZW5zZS5uYW1lfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlRXhwZW5zZShleHBlbnNlSWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJlY3VycmluZ0V4cGVuc2VzID0gdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maWx0ZXIoZSA9PiBlLmlkICE9PSBleHBlbnNlSWQpO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm1vbnRobHlQYXltZW50cyA9IHRoaXMuc2V0dGluZ3MubW9udGhseVBheW1lbnRzLmZpbHRlcihwID0+IHAuZXhwZW5zZUlkICE9PSBleHBlbnNlSWQpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICBuZXcgTm90aWNlKCdFeHBlbnNlIGRlbGV0ZWQnKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0dXNCYXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXJJdGVtKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY3VycmVudE1vbnRoID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NJyk7XG4gICAgICAgIGNvbnN0IHVucGFpZCA9IHRoaXMuZ2V0VW5wYWlkRXhwZW5zZXMoY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29uc3QgcmVjdXJyaW5nVG90YWwgPSB0aGlzLmdldEV4cGVuc2VzRm9yTW9udGgoY3VycmVudE1vbnRoKS5sZW5ndGg7XG5cbiAgICAgICAgLy8gT25lIHRpbWUgZXhwZW5zZXNcbiAgICAgICAgY29uc3Qgb25lVGltZSA9IHRoaXMuZ2V0T25lVGltZUV4cGVuc2VzRm9yTW9udGgoY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29uc3Qgb25lVGltZVVucGFpZCA9IG9uZVRpbWUuZmlsdGVyKGUgPT4gIWUucGFpZCk7XG5cbiAgICAgICAgY29uc3QgdG90YWxVbnBhaWRDb3VudCA9IHVucGFpZC5sZW5ndGggKyBvbmVUaW1lVW5wYWlkLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IHJlY3VycmluZ1RvdGFsICsgb25lVGltZS5sZW5ndGg7XG5cbiAgICAgICAgaWYgKHRvdGFsVW5wYWlkQ291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0udGV4dENvbnRlbnQgPSBgXHVEODNEXHVEQ0IzICR7dG90YWxVbnBhaWRDb3VudH0vJHt0b3RhbENvdW50fSB1bnBhaWRgO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLmNsYXNzTGlzdC5hZGQoJ2V4cGVuc2UtdHJhY2tlci11bnBhaWQnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0b3RhbENvdW50ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLnRleHRDb250ZW50ID0gYFx1RDgzRFx1RENCMyBBbGwgcGFpZGA7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnZXhwZW5zZS10cmFja2VyLXVucGFpZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLnRleHRDb250ZW50ID0gJ1x1RDgzRFx1RENCMyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblxuICAgICAgICAvLyBSZWZyZXNoIGRhc2hib2FyZCBpZiBvcGVuXG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0RBU0hCT0FSRCk7XG4gICAgICAgIGxlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIERhc2hib2FyZFZpZXcpIHtcbiAgICAgICAgICAgICAgICBsZWFmLnZpZXcucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vbnRobHkgRXhwZW5zZSBUcmFja2VyIHBsdWdpbiB1bmxvYWRlZCcpO1xuICAgIH1cbn1cbi8vIERhc2hib2FyZCBWaWV3XG5jbGFzcyBEYXNoYm9hcmRWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luO1xuICAgIGN1cnJlbnRNb250aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBWSUVXX1RZUEVfREFTSEJPQVJEO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnRXhwZW5zZSBEYXNoYm9hcmQnO1xuICAgIH1cblxuICAgIGdldEljb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICd3YWxsZXQnO1xuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygnZXhwZW5zZS10cmFja2VyLWRhc2hib2FyZCcpO1xuXG4gICAgICAgIC8vIEhlYWRlclxuICAgICAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItaGVhZGVyJyk7XG4gICAgICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNb250aGx5IEV4cGVuc2UgVHJhY2tlcicgfSk7XG5cbiAgICAgICAgLy8gTW9udGggc2VsZWN0b3JcbiAgICAgICAgY29uc3QgbW9udGhTZWxlY3RvciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1tb250aC1zZWxlY3RvcicpO1xuXG4gICAgICAgIGNvbnN0IHByZXZCdG4gPSBtb250aFNlbGVjdG9yLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTI1QzAnIH0pO1xuICAgICAgICBwcmV2QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IG1vbWVudCh0aGlzLmN1cnJlbnRNb250aCwgJ1lZWVktTU0nKS5zdWJ0cmFjdCgxLCAnbW9udGgnKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG1vbnRoRGlzcGxheSA9IG1vbnRoU2VsZWN0b3IuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBtb21lbnQodGhpcy5jdXJyZW50TW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU1NIFlZWVknKSxcbiAgICAgICAgICAgIGNsczogJ2V4cGVuc2UtdHJhY2tlci1tb250aC1kaXNwbGF5J1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBuZXh0QnRuID0gbW9udGhTZWxlY3Rvci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHUyNUI2JyB9KTtcbiAgICAgICAgbmV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9udGggPSBtb21lbnQodGhpcy5jdXJyZW50TW9udGgsICdZWVlZLU1NJykuYWRkKDEsICdtb250aCcpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdG9kYXlCdG4gPSBtb250aFNlbGVjdG9yLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdUb2RheScgfSk7XG4gICAgICAgIHRvZGF5QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU3VtbWFyeSBzdGF0c1xuICAgICAgICBjb25zdCByZWN1cnJpbmdFeHBlbnNlcyA9IHRoaXMucGx1Z2luLmdldEV4cGVuc2VzRm9yTW9udGgodGhpcy5jdXJyZW50TW9udGgpO1xuICAgICAgICBjb25zdCBvbmVUaW1lRXhwZW5zZXMgPSB0aGlzLnBsdWdpbi5nZXRPbmVUaW1lRXhwZW5zZXNGb3JNb250aCh0aGlzLmN1cnJlbnRNb250aCk7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFscyBieSBjdXJyZW5jeVxuICAgICAgICBjb25zdCB0b3RhbHM6IHsgW2tleTogc3RyaW5nXTogeyB0b3RhbDogbnVtYmVyLCBwYWlkOiBudW1iZXIsIHVucGFpZENvdW50OiBudW1iZXIgfSB9ID0ge307XG4gICAgICAgIGxldCB0b3RhbENvdW50ID0gMDtcbiAgICAgICAgbGV0IHRvdGFsVW5wYWlkQ291bnQgPSAwO1xuXG4gICAgICAgIGNvbnN0IHByb2Nlc3NFeHBlbnNlID0gKGFtb3VudDogbnVtYmVyLCBjdXJyZW5jeTogc3RyaW5nLCBwYWlkOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRvdGFsc1tjdXJyZW5jeV0pIHRvdGFsc1tjdXJyZW5jeV0gPSB7IHRvdGFsOiAwLCBwYWlkOiAwLCB1bnBhaWRDb3VudDogMCB9O1xuICAgICAgICAgICAgdG90YWxzW2N1cnJlbmN5XS50b3RhbCArPSBhbW91bnQ7XG4gICAgICAgICAgICBpZiAocGFpZCkge1xuICAgICAgICAgICAgICAgIHRvdGFsc1tjdXJyZW5jeV0ucGFpZCArPSBhbW91bnQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvdGFsc1tjdXJyZW5jeV0udW5wYWlkQ291bnQrKztcbiAgICAgICAgICAgICAgICB0b3RhbFVucGFpZENvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbENvdW50Kys7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVjdXJyaW5nRXhwZW5zZXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLnBsdWdpbi5nZXRQYXltZW50KGUuaWQsIHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgICAgIGNvbnN0IGlzUGFpZCA9IHBheW1lbnQ/LnBhaWQgfHwgZmFsc2U7XG4gICAgICAgICAgICBwcm9jZXNzRXhwZW5zZShlLmFtb3VudCwgZS5jdXJyZW5jeSB8fCAnVVNEJywgaXNQYWlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb25lVGltZUV4cGVuc2VzLmZvckVhY2goZSA9PiB7XG4gICAgICAgICAgICBwcm9jZXNzRXhwZW5zZShlLmFtb3VudCwgZS5jdXJyZW5jeSB8fCAnVVNEJywgZS5wYWlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1zdW1tYXJ5Jyk7XG5cbiAgICAgICAgLy8gR2VuZXJhbCBTdGF0c1xuICAgICAgICBzdW1tYXJ5LmNyZWF0ZURpdignc3VtbWFyeS1pdGVtJykuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdW1tYXJ5LWxhYmVsXCI+VG90YWwgRXhwZW5zZXM6PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdW1tYXJ5LXZhbHVlXCI+JHt0b3RhbENvdW50fTwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgICAgc3VtbWFyeS5jcmVhdGVEaXYoJ3N1bW1hcnktaXRlbScpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1sYWJlbFwiPlVucGFpZCBDb3VudDo8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktdmFsdWUgdW5wYWlkXCI+JHt0b3RhbFVucGFpZENvdW50fTwvc3Bhbj5cbiAgICAgICAgYDtcblxuICAgICAgICAvLyBGaW5hbmNpYWwgVG90YWxzIHBlciBDdXJyZW5jeVxuICAgICAgICBjb25zdCBjdXJyZW5jaWVzID0gT2JqZWN0LmtleXModG90YWxzKS5zb3J0KCk7XG4gICAgICAgIGlmIChjdXJyZW5jaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc3VtbWFyeS5jcmVhdGVEaXYoJ3N1bW1hcnktaXRlbScpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktbGFiZWxcIj5Ub3RhbCBBbW91bnQ6PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS12YWx1ZVwiPiQwLjAwPC9zcGFuPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsc0RpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3N1bW1hcnktdG90YWxzJyk7XG4gICAgICAgICAgICB0b3RhbHNEaXYuc3R5bGUuZ3JpZENvbHVtbiA9ICcxIC8gLTEnO1xuICAgICAgICAgICAgdG90YWxzRGl2LnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JztcbiAgICAgICAgICAgIHRvdGFsc0Rpdi5zdHlsZS5ib3JkZXJUb3AgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgICAgICAgICB0b3RhbHNEaXYuc3R5bGUucGFkZGluZ1RvcCA9ICcxMHB4JztcblxuICAgICAgICAgICAgY3VycmVuY2llcy5mb3JFYWNoKGN1cnJlbmN5ID0+IHtcbiAgICAgICAgICAgICAgICAvLyBHZW5lcmljIHN5bWJvbCBsb2dpYzogdXNlICQgZm9yIFVTRCwgQnMgZm9yIEJPQiwgb3RoZXJ3aXNlIGp1c3QgdGhlIGNvZGVcbiAgICAgICAgICAgICAgICBsZXQgc3ltYm9sID0gY3VycmVuY3kgKyAnICc7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbmN5ID09PSAnVVNEJykgc3ltYm9sID0gJyQnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbmN5ID09PSAnQk9CJykgc3ltYm9sID0gJ0JzICc7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVuY3kgPT09ICdFVVInKSBzeW1ib2wgPSAnXHUyMEFDJztcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW5jeSA9PT0gJ0dCUCcpIHN5bWJvbCA9ICdcdTAwQTMnO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRvdGFsc1tjdXJyZW5jeV07XG5cbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSB0b3RhbHNEaXYuY3JlYXRlRGl2KCdjdXJyZW5jeS1yb3cnKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc1cHgnO1xuXG4gICAgICAgICAgICAgICAgcm93LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJmb250LXdlaWdodDogYm9sZDtcIj4ke2N1cnJlbmN5fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+VG90YWw6ICR7c3ltYm9sfSR7ZGF0YS50b3RhbC50b0ZpeGVkKDIpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwYWlkXCI+UGFpZDogJHtzeW1ib2x9JHtkYXRhLnBhaWQudG9GaXhlZCgyKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidW5wYWlkXCI+VW5wYWlkOiAke3N5bWJvbH0keyhkYXRhLnRvdGFsIC0gZGF0YS5wYWlkKS50b0ZpeGVkKDIpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBY3Rpb24gYnV0dG9uc1xuICAgICAgICBjb25zdCBhY3Rpb25zID0gY29udGFpbmVyLmNyZWF0ZURpdignZXhwZW5zZS10cmFja2VyLWFjdGlvbnMnKTtcblxuICAgICAgICBjb25zdCBhZGRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICcrIEFkZCBFeHBlbnNlJywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgICAgIGFkZEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgbmV3IEFkZEV4cGVuc2VNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIG51bGwpLm9wZW4oKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjcmVhdGVOb3RlQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0M0IENyZWF0ZSBNb250aGx5IE5vdGUnIH0pO1xuICAgICAgICBjcmVhdGVOb3RlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5jcmVhdGVNb250aGx5Tm90ZSh0aGlzLmN1cnJlbnRNb250aCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVwb3J0QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0NBIEdlbmVyYXRlIFJlcG9ydCcgfSk7XG4gICAgICAgIHJlcG9ydEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgbmV3IFJlcG9ydE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHN1cHBvcnRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQ4M0RcdURDOTkgU3VwcG9ydCBQbHVnaW4nIH0pO1xuICAgICAgICBzdXBwb3J0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBuZXcgU3VwcG9ydE1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHN1cHBvcnRCdG4uc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcbiAgICAgICAgc3VwcG9ydEJ0bi5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW9uLWFjY2VudCknO1xuXG5cbiAgICAgICAgLy8gRXhwZW5zZSBsaXN0XG4gICAgICAgIGNvbnN0IGV4cGVuc2VMaXN0ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4cGVuc2UtdHJhY2tlci1saXN0JyB9KTtcblxuICAgICAgICBpZiAodG90YWxDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgZXhwZW5zZUxpc3QuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItZW1wdHknKS5zZXRUZXh0KCdObyBleHBlbnNlcyBmb3IgdGhpcyBtb250aCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVW5wYWlkIFNlY3Rpb25cbiAgICAgICAgICAgIGlmICh0b3RhbFVucGFpZENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIGV4cGVuc2VMaXN0LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1VucGFpZCcgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZWN1cnJpbmcgVW5wYWlkXG4gICAgICAgICAgICAgICAgcmVjdXJyaW5nRXhwZW5zZXMuZmlsdGVyKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50ID0gdGhpcy5wbHVnaW4uZ2V0UGF5bWVudChlLmlkLCB0aGlzLmN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhcGF5bWVudD8ucGFpZDtcbiAgICAgICAgICAgICAgICB9KS5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJlY3VycmluZ0V4cGVuc2VJdGVtKGV4cGVuc2VMaXN0LCBleHBlbnNlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIE9uZS1UaW1lIFVucGFpZFxuICAgICAgICAgICAgICAgIG9uZVRpbWVFeHBlbnNlcy5maWx0ZXIoZSA9PiAhZS5wYWlkKS5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck9uZVRpbWVFeHBlbnNlSXRlbShleHBlbnNlTGlzdCwgZXhwZW5zZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFBhaWQgU2VjdGlvblxuICAgICAgICAgICAgaWYgKHRvdGFsQ291bnQgLSB0b3RhbFVucGFpZENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIGV4cGVuc2VMaXN0LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1BhaWQnIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVjdXJyaW5nIFBhaWRcbiAgICAgICAgICAgICAgICByZWN1cnJpbmdFeHBlbnNlcy5maWx0ZXIoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLnBsdWdpbi5nZXRQYXltZW50KGUuaWQsIHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBheW1lbnQ/LnBhaWQ7XG4gICAgICAgICAgICAgICAgfSkuZm9yRWFjaChleHBlbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSZWN1cnJpbmdFeHBlbnNlSXRlbShleHBlbnNlTGlzdCwgZXhwZW5zZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBPbmUtVGltZSBQYWlkXG4gICAgICAgICAgICAgICAgb25lVGltZUV4cGVuc2VzLmZpbHRlcihlID0+IGUucGFpZCkuZm9yRWFjaChleHBlbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPbmVUaW1lRXhwZW5zZUl0ZW0oZXhwZW5zZUxpc3QsIGV4cGVuc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXJjaGl2ZWQgZXhwZW5zZXMgc2VjdGlvblxuICAgICAgICBjb25zdCBhcmNoaXZlZEV4cGVuc2VzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMuZmlsdGVyKGUgPT4gZS5hcmNoaXZlZCk7XG4gICAgICAgIGlmIChhcmNoaXZlZEV4cGVuc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGFyY2hpdmVkU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1hcmNoaXZlZCcpO1xuICAgICAgICAgICAgY29uc3QgYXJjaGl2ZWRIZWFkZXIgPSBhcmNoaXZlZFNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQXJjaGl2ZWQgRXhwZW5zZXMnIH0pO1xuICAgICAgICAgICAgYXJjaGl2ZWRIZWFkZXIuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuXG4gICAgICAgICAgICBjb25zdCBhcmNoaXZlZExpc3QgPSBhcmNoaXZlZFNlY3Rpb24uY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItYXJjaGl2ZWQtbGlzdCcpO1xuICAgICAgICAgICAgYXJjaGl2ZWRMaXN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIGFyY2hpdmVkSGVhZGVyLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXJjaGl2ZWRMaXN0LnN0eWxlLmRpc3BsYXkgPSBhcmNoaXZlZExpc3Quc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGFyY2hpdmVkRXhwZW5zZXMuZm9yRWFjaChleHBlbnNlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gYXJjaGl2ZWRMaXN0LmNyZWF0ZURpdignZXhwZW5zZS1pdGVtIGFyY2hpdmVkJyk7XG4gICAgICAgICAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJleHBlbnNlLW5hbWVcIj4ke2V4cGVuc2UubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImV4cGVuc2UtZGV0YWlsc1wiPiR7ZXhwZW5zZS5jdXJyZW5jeSA9PT0gJ1VTRCcgPyAnJCcgOiAoZXhwZW5zZS5jdXJyZW5jeSA9PT0gJ0JPQicgPyAnQnMgJyA6IChleHBlbnNlLmN1cnJlbmN5ICsgJyAnKSl9JHtleHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfSAtICR7ZXhwZW5zZS5wYXltZW50TWV0aG9kfTwvZGl2PlxuICAgICAgICAgICAgICAgIGA7XG5cbiAgICAgICAgICAgICAgICBpdGVtLm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnVW5hcmNoaXZlJykub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZW5zZS5hcmNoaXZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdEZWxldGUnKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kZWxldGVFeHBlbnNlKGV4cGVuc2UuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZSBhcyBNb3VzZUV2ZW50KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJSZWN1cnJpbmdFeHBlbnNlSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlKSB7XG4gICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLnBsdWdpbi5nZXRQYXltZW50KGV4cGVuc2UuaWQsIHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29uc3QgaXNQYWlkID0gcGF5bWVudD8ucGFpZCB8fCBmYWxzZTtcbiAgICAgICAgY29uc3QgaXNPdmVyZHVlID0gZXhwZW5zZS5kdWVEYXkgPCBwYXJzZUludChtb21lbnQoKS5mb3JtYXQoJ0QnKSkgJiYgIWlzUGFpZCAmJiB0aGlzLmN1cnJlbnRNb250aCA9PT0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NJyk7XG5cbiAgICAgICAgY29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2V4cGVuc2UtaXRlbScpO1xuICAgICAgICBpZiAoaXNQYWlkKSBpdGVtLmFkZENsYXNzKCdwYWlkJyk7XG4gICAgICAgIGlmIChpc092ZXJkdWUpIGl0ZW0uYWRkQ2xhc3MoJ292ZXJkdWUnKTtcblxuICAgICAgICBjb25zdCBjaGVja2JveCA9IGl0ZW0uY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gaXNQYWlkO1xuICAgICAgICBjaGVja2JveC5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIWlzUGFpZCkge1xuICAgICAgICAgICAgICAgIG5ldyBNYXJrUGFpZE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgZXhwZW5zZSwgdGhpcy5jdXJyZW50TW9udGgsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5tYXJrRXhwZW5zZVBhaWQoZXhwZW5zZS5pZCwgdGhpcy5jdXJyZW50TW9udGgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjb250ZW50ID0gaXRlbS5jcmVhdGVEaXYoJ2V4cGVuc2UtY29udGVudCcpO1xuICAgICAgICBjb25zdCBuYW1lRGl2ID0gY29udGVudC5jcmVhdGVEaXYoJ2V4cGVuc2UtbmFtZScpO1xuICAgICAgICBuYW1lRGl2LnNldFRleHQoZXhwZW5zZS5uYW1lKTtcbiAgICAgICAgaWYgKGlzT3ZlcmR1ZSkge1xuICAgICAgICAgICAgbmFtZURpdi5jcmVhdGVTcGFuKHsgdGV4dDogJyBcdTI2QTBcdUZFMEYgT1ZFUkRVRScsIGNsczogJ292ZXJkdWUtYmFkZ2UnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGV0YWlscyA9IGNvbnRlbnQuY3JlYXRlRGl2KCdleHBlbnNlLWRldGFpbHMnKTtcbiAgICAgICAgY29uc3Qgc3ltYm9sID0gKGV4cGVuc2UuY3VycmVuY3kgfHwgJ1VTRCcpID09PSAnVVNEJyA/ICckJyA6ICgoZXhwZW5zZS5jdXJyZW5jeSB8fCAnVVNEJykgPT09ICdCT0InID8gJ0JzICcgOiBgJHtleHBlbnNlLmN1cnJlbmN5fSBgKTtcbiAgICAgICAgZGV0YWlscy5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAke3N5bWJvbH0ke2V4cGVuc2UuYW1vdW50LnRvRml4ZWQoMil9IFx1MjAyMiBEdWU6ICR7ZXhwZW5zZS5kdWVEYXl9IFx1MjAyMiAke2V4cGVuc2UucGF5bWVudE1ldGhvZH1cbiAgICAgICAgICAgICR7cGF5bWVudD8uY29uZmlybWF0aW9uTnVtYmVyID8gYDxicj5Db25maXJtYXRpb246ICR7cGF5bWVudC5jb25maXJtYXRpb25OdW1iZXJ9YCA6ICcnfVxuICAgICAgICAgICAgJHtwYXltZW50Py5wYWlkRGF0ZSA/IGA8YnI+UGFpZDogJHtwYXltZW50LnBhaWREYXRlfWAgOiAnJ31cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoJ2V4cGVuc2UtYWN0aW9ucycpO1xuICAgICAgICB0aGlzLmFkZENvbnRleHRNZW51KGFjdGlvbnMsIGV4cGVuc2UsICdyZWN1cnJpbmcnKTtcbiAgICB9XG5cbiAgICByZW5kZXJPbmVUaW1lRXhwZW5zZUl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZXhwZW5zZTogT25lVGltZUV4cGVuc2UpIHtcbiAgICAgICAgY29uc3QgaXNQYWlkID0gZXhwZW5zZS5wYWlkO1xuICAgICAgICBjb25zdCBleHBlbnNlRGF0ZSA9IG1vbWVudChleHBlbnNlLmRhdGUpO1xuICAgICAgICBjb25zdCBpc092ZXJkdWUgPSBleHBlbnNlRGF0ZS5pc0JlZm9yZShtb21lbnQoKSwgJ2RheScpICYmICFpc1BhaWQ7XG5cbiAgICAgICAgY29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2V4cGVuc2UtaXRlbScpO1xuICAgICAgICBpZiAoaXNQYWlkKSBpdGVtLmFkZENsYXNzKCdwYWlkJyk7XG4gICAgICAgIGlmIChpc092ZXJkdWUpIGl0ZW0uYWRkQ2xhc3MoJ292ZXJkdWUnKTtcblxuICAgICAgICBjb25zdCBjaGVja2JveCA9IGl0ZW0uY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gaXNQYWlkO1xuICAgICAgICBjaGVja2JveC5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIWlzUGFpZCkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBvbmUtdGltZSBleHBlbnNlcywgd2UgY2FuIGp1c3QgbWFyay91bm1hcmsgZGlyZWN0bHkgb3IgYXNrIGZvciBjb25maXJtYXRpb24gaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgLy8gUmV1c2luZyBNYXJrUGFpZE1vZGFsIGxvZ2ljIGJ1dCBhZGFwdGVkIGNvdWxkIGJlIGNvbXBsZXgsIFxuICAgICAgICAgICAgICAgIC8vIHNpbXBsZXIgdG8ganVzdCB0b2dnbGUgb3IgdXNlIGEgcHJvbXB0IGlmIGNvbmZpcm1hdGlvbiAjIGlzIG5lZWRlZC5cbiAgICAgICAgICAgICAgICAvLyBMZXQncyBpbXBsZW1lbnQgYSBkaXJlY3QgdG9nZ2xlIHdpdGggb3B0aW9uYWwgcHJvbXB0IGZvciBub3cgb3IgY3VzdG9tIG1vZGFsLlxuICAgICAgICAgICAgICAgIC8vIFRvIGtlZXAgaXQgc2ltcGxlIGZvciBub3csIGRpcmVjdCB1cGRhdGUuIFxuICAgICAgICAgICAgICAgIC8vIEFjdHVhbGx5LCBsZXQncyBhbGxvdyBhZGRpbmcgY29uZmlybWF0aW9uIG51bWJlci5cblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHNpbXBsZSBvbmUtdGltZSBwYXltZW50IG1vZGFsIG9yIHJldXNlIGxvZ2ljP1xuICAgICAgICAgICAgICAgIC8vIFJldXNlIE1hcmtQYWlkTW9kYWwgbWlnaHQgYmUgdHJpY2t5IGR1ZSB0byB0eXBlcy5cbiAgICAgICAgICAgICAgICAvLyBMZXQncyBtYWtlIGEgbWluaS1tb2RhbCBvbiB0aGUgZmx5IG9yIGp1c3QgdXBkYXRlLlxuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ubWFya09uZVRpbWVFeHBlbnNlUGFpZChleHBlbnNlLmlkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ubWFya09uZVRpbWVFeHBlbnNlUGFpZChleHBlbnNlLmlkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY3JlYXRlRGl2KCdleHBlbnNlLWNvbnRlbnQnKTtcbiAgICAgICAgY29uc3QgbmFtZURpdiA9IGNvbnRlbnQuY3JlYXRlRGl2KCdleHBlbnNlLW5hbWUnKTtcbiAgICAgICAgbmFtZURpdi5zZXRUZXh0KGV4cGVuc2UubmFtZSk7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gbmFtZURpdi5jcmVhdGVTcGFuKHsgdGV4dDogJyAoT25lLVRpbWUpJywgY2xzOiAnZXhwZW5zZS10eXBlLWJhZGdlJyB9KTtcbiAgICAgICAgYmFkZ2Uuc3R5bGUuZm9udFNpemUgPSAnMC44ZW0nO1xuICAgICAgICBiYWRnZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgICAgIGJhZGdlLnN0eWxlLm1hcmdpbkxlZnQgPSAnNXB4JztcblxuICAgICAgICBpZiAoaXNPdmVyZHVlKSB7XG4gICAgICAgICAgICBuYW1lRGl2LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIFx1MjZBMFx1RkUwRiBPVkVSRFVFJywgY2xzOiAnb3ZlcmR1ZS1iYWRnZScgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZXRhaWxzID0gY29udGVudC5jcmVhdGVEaXYoJ2V4cGVuc2UtZGV0YWlscycpO1xuICAgICAgICBjb25zdCBzeW1ib2wgPSAoZXhwZW5zZS5jdXJyZW5jeSB8fCAnVVNEJykgPT09ICdVU0QnID8gJyQnIDogKChleHBlbnNlLmN1cnJlbmN5IHx8ICdVU0QnKSA9PT0gJ0JPQicgPyAnQnMgJyA6IGAke2V4cGVuc2UuY3VycmVuY3l9IGApO1xuICAgICAgICBkZXRhaWxzLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICR7c3ltYm9sfSR7ZXhwZW5zZS5hbW91bnQudG9GaXhlZCgyKX0gXHUyMDIyIERhdGU6ICR7ZXhwZW5zZS5kYXRlfSBcdTIwMjIgJHtleHBlbnNlLnBheW1lbnRNZXRob2R9XG4gICAgICAgICAgICAke2V4cGVuc2UuY29uZmlybWF0aW9uTnVtYmVyID8gYDxicj5Db25maXJtYXRpb246ICR7ZXhwZW5zZS5jb25maXJtYXRpb25OdW1iZXJ9YCA6ICcnfVxuICAgICAgICAgICAgJHtleHBlbnNlLnBhaWREYXRlID8gYDxicj5QYWlkOiAke2V4cGVuc2UucGFpZERhdGV9YCA6ICcnfVxuICAgICAgICBgO1xuXG4gICAgICAgIGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdignZXhwZW5zZS1hY3Rpb25zJyk7XG4gICAgICAgIHRoaXMuYWRkQ29udGV4dE1lbnUoYWN0aW9ucywgZXhwZW5zZSwgJ29uZXRpbWUnKTtcbiAgICB9XG5cbiAgICBhZGRDb250ZXh0TWVudShjb250YWluZXI6IEhUTUxFbGVtZW50LCBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlIHwgT25lVGltZUV4cGVuc2UsIHR5cGU6ICdyZWN1cnJpbmcnIHwgJ29uZXRpbWUnKSB7XG4gICAgICAgIGNvbnN0IG1lbnVCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1MjJFRScgfSk7XG4gICAgICAgIG1lbnVCdG4ub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdFZGl0Jykuc2V0SWNvbigncGVuY2lsJykub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBBZGRFeHBlbnNlTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBleHBlbnNlKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdyZWN1cnJpbmcnKSB7XG4gICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdWaWV3IEhpc3RvcnknKS5zZXRJY29uKCdoaXN0b3J5Jykub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgSGlzdG9yeU1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgZXhwZW5zZSBhcyBSZWN1cnJpbmdFeHBlbnNlKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdBcmNoaXZlJykuc2V0SWNvbignYXJjaGl2ZScpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXJjaGl2ZUV4cGVuc2UoZXhwZW5zZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpLnNldEljb24oJ3RyYXNoJykub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kZWxldGVFeHBlbnNlKGV4cGVuc2UuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpLnNldEljb24oJ3RyYXNoJykub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kZWxldGVPbmVUaW1lRXhwZW5zZShleHBlbnNlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGUgYXMgTW91c2VFdmVudCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAgICAgLy8gQ2xlYW51cFxuICAgIH1cbn1cblxuLy8gQWRkL0VkaXQgRXhwZW5zZSBNb2RhbFxuY2xhc3MgQWRkRXhwZW5zZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luO1xuICAgIGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UgfCBudWxsO1xuICAgIG9uZVRpbWVFeHBlbnNlOiBPbmVUaW1lRXhwZW5zZSB8IG51bGw7XG4gICAgdHlwZTogJ3JlY3VycmluZycgfCAnb25ldGltZSc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4sIGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UgfCBPbmVUaW1lRXhwZW5zZSB8IG51bGwpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHR5cGUgYmFzZWQgb24gaW5wdXQgZXhwZW5zZSBvciBkZWZhdWx0IHRvIHJlY3VycmluZ1xuICAgICAgICBpZiAoZXhwZW5zZSAmJiAnZGF0ZScgaW4gZXhwZW5zZSkge1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lRXhwZW5zZSA9IGV4cGVuc2UgYXMgT25lVGltZUV4cGVuc2U7XG4gICAgICAgICAgICB0aGlzLmV4cGVuc2UgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy50eXBlID0gJ29uZXRpbWUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5leHBlbnNlID0gZXhwZW5zZSBhcyBSZWN1cnJpbmdFeHBlbnNlO1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lRXhwZW5zZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSAncmVjdXJyaW5nJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMuZXhwZW5zZSB8fCB0aGlzLm9uZVRpbWVFeHBlbnNlID8gJ0VkaXQgRXhwZW5zZScgOiAnQWRkIEV4cGVuc2UnIH0pO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBjb250ZW50RWwuY3JlYXRlRGl2KCdleHBlbnNlLWZvcm0nKTtcblxuICAgICAgICAvLyBUeXBlIFRvZ2dsZSAob25seSBmb3IgbmV3IGV4cGVuc2VzKVxuICAgICAgICBpZiAoIXRoaXMuZXhwZW5zZSAmJiAhdGhpcy5vbmVUaW1lRXhwZW5zZSkge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnRXhwZW5zZSBUeXBlJylcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbigncmVjdXJyaW5nJywgJ1JlY3VycmluZyAoTW9udGhseSknKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb25ldGltZScsICdPbmUtVGltZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy50eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHZhbHVlIGFzICdyZWN1cnJpbmcnIHwgJ29uZXRpbWUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7IC8vIFJlLXJlbmRlciBmb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5hbWVcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdFeHBlbnNlIE5hbWUnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/Lm5hbWUgfHwgdGhpcy5vbmVUaW1lRXhwZW5zZT8ubmFtZSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmlkID0gJ2V4cGVuc2UtbmFtZSc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBDdXJyZW5jeVxuICAgICAgICBjb25zdCBjdXJyZW5jeVNldHRpbmcgPSBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0N1cnJlbmN5JylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignVVNEJywgJ1VTRCAoJCknKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdCT0InLCAnQk9CIChCcyknKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdFVVInLCAnRVVSIChcdTIwQUMpJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignR0JQJywgJ0dCUCAoXHUwMEEzKScpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ09USEVSJywgJ090aGVyIChDdXN0b20pJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFxuICAgICAgICAgICAgICAgICAgICAgICAgWydVU0QnLCAnQk9CJywgJ0VVUicsICdHQlAnXS5pbmNsdWRlcyh0aGlzLmV4cGVuc2U/LmN1cnJlbmN5IHx8IHRoaXMub25lVGltZUV4cGVuc2U/LmN1cnJlbmN5IHx8ICdVU0QnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHRoaXMuZXhwZW5zZT8uY3VycmVuY3kgfHwgdGhpcy5vbmVUaW1lRXhwZW5zZT8uY3VycmVuY3kgfHwgJ1VTRCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnT1RIRVInXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2VsZWN0RWwuaWQgPSAnZXhwZW5zZS1jdXJyZW5jeS1zZWxlY3QnO1xuXG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2UtY3VycmVuY3ktY3VzdG9tLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUlucHV0LnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA9PT0gJ09USEVSJyA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEN1c3RvbSBDdXJyZW5jeSBJbnB1dFxuICAgICAgICBjb25zdCBjdXN0b21DdXJyZW5jeURpdiA9IGZvcm0uY3JlYXRlRGl2KCk7XG4gICAgICAgIGN1c3RvbUN1cnJlbmN5RGl2LmlkID0gJ2V4cGVuc2UtY3VycmVuY3ktY3VzdG9tLWNvbnRhaW5lcic7XG4gICAgICAgIGN1c3RvbUN1cnJlbmN5RGl2LnN0eWxlLmRpc3BsYXkgPSBbJ1VTRCcsICdCT0InLCAnRVVSJywgJ0dCUCddLmluY2x1ZGVzKHRoaXMuZXhwZW5zZT8uY3VycmVuY3kgfHwgdGhpcy5vbmVUaW1lRXhwZW5zZT8uY3VycmVuY3kgfHwgJ1VTRCcpID8gJ25vbmUnIDogJ2Jsb2NrJztcblxuICAgICAgICBuZXcgU2V0dGluZyhjdXN0b21DdXJyZW5jeURpdilcbiAgICAgICAgICAgIC5zZXROYW1lKCdDdXN0b20gQ3VycmVuY3kgQ29kZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnZS5nLiwgQ0FELCBKUFksIEFVRCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5leHBlbnNlPy5jdXJyZW5jeSB8fCB0aGlzLm9uZVRpbWVFeHBlbnNlPy5jdXJyZW5jeSB8fCAnVVNEJztcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKFsnVVNEJywgJ0JPQicsICdFVVInLCAnR0JQJ10uaW5jbHVkZXMoY3VycmVudCkgPyAnJyA6IGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWN1cnJlbmN5LWN1c3RvbSc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbW91bnRcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdBbW91bnQnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/LmFtb3VudC50b1N0cmluZygpIHx8IHRoaXMub25lVGltZUV4cGVuc2U/LmFtb3VudC50b1N0cmluZygpIHx8ICcnKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9ICdudW1iZXInO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdGVwID0gJzAuMDEnO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWFtb3VudCc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy50eXBlID09PSAncmVjdXJyaW5nJykge1xuICAgICAgICAgICAgLy8gUmVjdXJyaW5nIEZpZWxkc1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnRHVlIERheSBvZiBNb250aCcpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJzEtMzEnKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8uZHVlRGF5LnRvU3RyaW5nKCkgfHwgJzEnKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm1pbiA9ICcxJztcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm1heCA9ICczMSc7XG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWR1ZS1kYXknO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKCdTdGFydCBNb250aCcpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0gZm9ybWF0JylcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/LnN0YXJ0RGF0ZSB8fCBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0nKSk7XG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLXN0YXJ0LWRhdGUnO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKCdFbmQgTW9udGggKE9wdGlvbmFsKScpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0gZm9ybWF0IC0gbGVhdmUgZW1wdHkgZm9yIG9uZ29pbmcnKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8uZW5kRGF0ZSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWVuZC1kYXRlJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9uZS1UaW1lIEZpZWxkc1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnRGF0ZScpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0tREQgZm9ybWF0JylcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLm9uZVRpbWVFeHBlbnNlPy5kYXRlIHx8IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnR5cGUgPSAnZGF0ZSc7XG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWRhdGUnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGF5bWVudCBNZXRob2RcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdQYXltZW50IE1ldGhvZCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8ucGF5bWVudE1ldGhvZCB8fCB0aGlzLm9uZVRpbWVFeHBlbnNlPy5wYXltZW50TWV0aG9kIHx8ICcnKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAnZXhwZW5zZS1wYXltZW50LW1ldGhvZCc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBDYXRlZ29yeVxuICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhdGVnb3J5IChPcHRpb25hbCknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/LmNhdGVnb3J5IHx8IHRoaXMub25lVGltZUV4cGVuc2U/LmNhdGVnb3J5IHx8ICcnKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAnZXhwZW5zZS1jYXRlZ29yeSc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBCdXR0b25zXG4gICAgICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ21vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcblxuICAgICAgICBjb25zdCBzYXZlQnRuID0gYnV0dG9uRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTYXZlJywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgICAgIHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlU3VibWl0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgICAgICBjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVTdWJtaXQoKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2UtbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuXG4gICAgICAgIGxldCBjdXJyZW5jeSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1jdXJyZW5jeS1zZWxlY3QnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgaWYgKGN1cnJlbmN5ID09PSAnT1RIRVInKSB7XG4gICAgICAgICAgICBjdXJyZW5jeSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1jdXJyZW5jeS1jdXN0b20nKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW5jeSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIGN1c3RvbSBjdXJyZW5jeSBjb2RlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLWFtb3VudCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1wYXltZW50LW1ldGhvZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBjb25zdCBjYXRlZ29yeSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1jYXRlZ29yeScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuXG4gICAgICAgIGlmICghbmFtZSB8fCBpc05hTihhbW91bnQpIHx8ICFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZmlsbCBpbiBhbGwgcmVxdWlyZWQgZmllbGRzJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy50eXBlID09PSAncmVjdXJyaW5nJykge1xuICAgICAgICAgICAgY29uc3QgZHVlRGF5U3RyID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLWR1ZS1kYXknKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1zdGFydC1kYXRlJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBlbmREYXRlID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLWVuZC1kYXRlJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBkdWVEYXkgPSBwYXJzZUludChkdWVEYXlTdHIpO1xuXG4gICAgICAgICAgICBpZiAoIWR1ZURheSB8fCAhc3RhcnREYXRlKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGZpbGwgaW4gYWxsIHJlcXVpcmVkIGZpZWxkcyBmb3IgcmVjdXJyaW5nIGV4cGVuc2UnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZXhwZW5zZT8uaWQgfHwgYGV4cC0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgICAgICBkdWVEYXksXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBzdGFydERhdGUsXG4gICAgICAgICAgICAgICAgZW5kRGF0ZTogZW5kRGF0ZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBhcmNoaXZlZDogdGhpcy5leHBlbnNlPy5hcmNoaXZlZCB8fCBmYWxzZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZXhwZW5zZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnVwZGF0ZVJlY3VycmluZ0V4cGVuc2UoZXhwZW5zZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFkZFJlY3VycmluZ0V4cGVuc2UoZXhwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLWRhdGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblxuICAgICAgICAgICAgaWYgKCFkYXRlKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIHNlbGVjdCBhIGRhdGUgZm9yIHRoZSBvbmUtdGltZSBleHBlbnNlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBleHBlbnNlOiBPbmVUaW1lRXhwZW5zZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5vbmVUaW1lRXhwZW5zZT8uaWQgfHwgYG9uZS0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgICAgICBkYXRlLFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBwYWlkOiB0aGlzLm9uZVRpbWVFeHBlbnNlPy5wYWlkIHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhaWREYXRlOiB0aGlzLm9uZVRpbWVFeHBlbnNlPy5wYWlkRGF0ZSxcbiAgICAgICAgICAgICAgICBjb25maXJtYXRpb25OdW1iZXI6IHRoaXMub25lVGltZUV4cGVuc2U/LmNvbmZpcm1hdGlvbk51bWJlclxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub25lVGltZUV4cGVuc2UpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVPbmVUaW1lRXhwZW5zZShleHBlbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYWRkT25lVGltZUV4cGVuc2UoZXhwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cbi8vIE1hcmsgUGFpZCBNb2RhbFxuY2xhc3MgTWFya1BhaWRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcbiAgICBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlIHwgT25lVGltZUV4cGVuc2U7XG4gICAgbW9udGg6IHN0cmluZztcbiAgICBvbkNvbXBsZXRlOiAoKSA9PiB2b2lkO1xuICAgIGlzT25lVGltZTogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbiwgZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSB8IE9uZVRpbWVFeHBlbnNlLCBtb250aDogc3RyaW5nLCBvbkNvbXBsZXRlOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmV4cGVuc2UgPSBleHBlbnNlO1xuICAgICAgICB0aGlzLm1vbnRoID0gbW9udGg7XG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGU7XG4gICAgICAgIHRoaXMuaXNPbmVUaW1lID0gJ2RhdGUnIGluIGV4cGVuc2U7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01hcmsgYXMgUGFpZCcgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYCR7dGhpcy5leHBlbnNlLm5hbWV9IC0gJCR7dGhpcy5leHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfWAgfSk7XG5cbiAgICAgICAgY29uc3QgZm9ybSA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NvbmZpcm1hdGlvbiBOdW1iZXIgKE9wdGlvbmFsKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAnY29uZmlybWF0aW9uLW51bWJlcic7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBidXR0b25EaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdtb2RhbC1idXR0b24tY29udGFpbmVyJyk7XG5cbiAgICAgICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnTWFyayBQYWlkJywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgICAgIHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbk51bWJlciA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybWF0aW9uLW51bWJlcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc09uZVRpbWUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5tYXJrT25lVGltZUV4cGVuc2VQYWlkKHRoaXMuZXhwZW5zZS5pZCwgdHJ1ZSwgY29uZmlybWF0aW9uTnVtYmVyIHx8IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLm1hcmtFeHBlbnNlUGFpZCh0aGlzLmV4cGVuc2UuaWQsIHRoaXMubW9udGgsIHRydWUsIGNvbmZpcm1hdGlvbk51bWJlciB8fCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25EaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIEhpc3RvcnkgTW9kYWxcbmNsYXNzIEhpc3RvcnlNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcbiAgICBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luLCBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmV4cGVuc2UgPSBleHBlbnNlO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IGBQYXltZW50IEhpc3Rvcnk6ICR7dGhpcy5leHBlbnNlLm5hbWV9YCB9KTtcblxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseVBheW1lbnRzXG4gICAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5leHBlbnNlSWQgPT09IHRoaXMuZXhwZW5zZS5pZClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLm1vbnRoLmxvY2FsZUNvbXBhcmUoYS5tb250aCkpO1xuXG4gICAgICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gcGF5bWVudCBoaXN0b3J5JyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gY29udGVudEVsLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnZXhwZW5zZS1oaXN0b3J5LXRhYmxlJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IHRleHQ6ICdNb250aCcgfSk7XG4gICAgICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiAnU3RhdHVzJyB9KTtcbiAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IHRleHQ6ICdQYWlkIERhdGUnIH0pO1xuICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogJ0NvbmZpcm1hdGlvbicgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG4gICAgICAgICAgICBoaXN0b3J5LmZvckVhY2gocGF5bWVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gdGJvZHkuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogbW9tZW50KHBheW1lbnQubW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU0gWVlZWScpIH0pO1xuICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHBheW1lbnQucGFpZCA/ICdcdTI3MDUgUGFpZCcgOiAnXHUyQjFDIFVucGFpZCcgfSk7XG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcGF5bWVudC5wYWlkRGF0ZSB8fCAnLScgfSk7XG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcGF5bWVudC5jb25maXJtYXRpb25OdW1iZXIgfHwgJy0nIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2xvc2UnIH0pO1xuICAgICAgICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFN1cHBvcnQgTW9kYWxcbmNsYXNzIFN1cHBvcnRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2V4cGVuc2UtdHJhY2tlci1zdXBwb3J0LW1vZGFsJyk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzRFx1REM5OSBTdXBwb3J0IE1vbnRobHkgRXhwZW5zZSBUcmFja2VyJyB9KTtcbiAgICAgICAgaGVhZGVyLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgIHRleHQ6ICdUaGFuayB5b3UgZm9yIGNvbnNpZGVyaW5nIHN1cHBvcnRpbmcgdGhpcyBwbHVnaW4hIFlvdXIgc3VwcG9ydCBoZWxwcyBtYWludGFpbiBhbmQgaW1wcm92ZSB0aGlzIHRvb2wuJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYXlQYWwgU2VjdGlvblxuICAgICAgICBjb25zdCBwYXlwYWxTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIHBheXBhbFNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0IzIFBheVBhbCcgfSk7XG4gICAgICAgIHBheXBhbFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdPbmUtdGltZSBvciByZWN1cnJpbmcgZG9uYXRpb25zIHZpYSBQYXlQYWw6JyB9KTtcbiAgICAgICAgY29uc3QgcGF5cGFsQnRuID0gcGF5cGFsU2VjdGlvbi5jcmVhdGVFbCgnYScsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTIxOTIgRG9uYXRlIHZpYSBQYXlQYWwnLFxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vcGF5cGFsbWUvVmljdG9yWmVudGVubydcbiAgICAgICAgfSk7XG4gICAgICAgIHBheXBhbEJ0bi5hZGRDbGFzcygnc3VwcG9ydC1saW5rJyk7XG5cbiAgICAgICAgLy8gQ3J5cHRvIFNlY3Rpb25cbiAgICAgICAgY29uc3QgY3J5cHRvU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3N1cHBvcnQtc2VjdGlvbicpO1xuICAgICAgICBjcnlwdG9TZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1RDgzRVx1REU5OSBDcnlwdG9jdXJyZW5jeSAoVVNEQy9VU0RUKScgfSk7XG4gICAgICAgIGNyeXB0b1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdTdXBwb3J0IHdpdGggc3RhYmxlY29pbnMgb24gbXVsdGlwbGUgbmV0d29ya3M6JyB9KTtcblxuICAgICAgICBjb25zdCBjcnlwdG9BZGRyZXNzZXMgPSBjcnlwdG9TZWN0aW9uLmNyZWF0ZURpdignY3J5cHRvLWFkZHJlc3NlcycpO1xuXG4gICAgICAgIGNvbnN0IHVzZGNEaXYgPSBjcnlwdG9BZGRyZXNzZXMuY3JlYXRlRGl2KCdjcnlwdG8tYWRkcmVzcycpO1xuICAgICAgICB1c2RjRGl2LmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdVU0RDIChCYXNlIE5ldHdvcmsgLSBMb3cgRmVlcyk6JyB9KTtcbiAgICAgICAgY29uc3QgdXNkY0FkZHJlc3MgPSB1c2RjRGl2LmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiAnMHgxMDIzMTQyZDA1NDhiNjM1NDJmMmE0ODAzYjY3MjRkNGMyNmI4YmRhJyB9KTtcbiAgICAgICAgdXNkY0FkZHJlc3Muc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHVzZGNBZGRyZXNzLnN0eWxlLm1hcmdpblRvcCA9ICc1cHgnO1xuICAgICAgICB1c2RjQWRkcmVzcy5zdHlsZS5wYWRkaW5nID0gJzVweCc7XG4gICAgICAgIHVzZGNBZGRyZXNzLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgdXNkY0FkZHJlc3Muc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIHVzZGNBZGRyZXNzLnN0eWxlLmZvbnRTaXplID0gJzAuODVlbSc7XG4gICAgICAgIHVzZGNBZGRyZXNzLnN0eWxlLndvcmRCcmVhayA9ICdicmVhay1hbGwnO1xuXG4gICAgICAgIGNvbnN0IHVzZGNOb3RlID0gdXNkY0Rpdi5jcmVhdGVFbCgnc21hbGwnLCB7IHRleHQ6ICdBbHNvIHdvcmtzIG9uOiBFdGhlcmV1bSwgUG9seWdvbiwgQXJiaXRydW0sIE9wdGltaXNtJyB9KTtcbiAgICAgICAgdXNkY05vdGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHVzZGNOb3RlLnN0eWxlLm1hcmdpblRvcCA9ICczcHgnO1xuICAgICAgICB1c2RjTm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cbiAgICAgICAgY29uc3QgdXNkdERpdiA9IGNyeXB0b0FkZHJlc3Nlcy5jcmVhdGVEaXYoJ2NyeXB0by1hZGRyZXNzJyk7XG4gICAgICAgIHVzZHREaXYuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1VTRFQgKFRyb24gVFJDLTIwIC0gVWx0cmEgTG93IEZlZXMpOicgfSk7XG4gICAgICAgIGNvbnN0IHVzZHRBZGRyZXNzID0gdXNkdERpdi5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ1RBVjdxVEdndm44R25ZSmZYZmVzNzN0RDJkQVBRSjNMMlcnIH0pO1xuICAgICAgICB1c2R0QWRkcmVzcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUubWFyZ2luVG9wID0gJzVweCc7XG4gICAgICAgIHVzZHRBZGRyZXNzLnN0eWxlLnBhZGRpbmcgPSAnNXB4JztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICB1c2R0QWRkcmVzcy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUuZm9udFNpemUgPSAnMC44NWVtJztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUud29yZEJyZWFrID0gJ2JyZWFrLWFsbCc7XG5cbiAgICAgICAgY29uc3QgY3J5cHRvTm90ZSA9IGNyeXB0b1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI2QTBcdUZFMEYgSW1wb3J0YW50OiBEb3VibGUtY2hlY2sgdGhlIG5ldHdvcmsgYmVmb3JlIHNlbmRpbmchJyB9KTtcbiAgICAgICAgY3J5cHRvTm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWVycm9yKSc7XG4gICAgICAgIGNyeXB0b05vdGUuc3R5bGUuZm9udFNpemUgPSAnMC45ZW0nO1xuICAgICAgICBjcnlwdG9Ob3RlLnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JztcblxuICAgICAgICBjb25zdCBjcnlwdG9UaXAgPSBjcnlwdG9TZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0ExIFRpcDogVXNlIFRyb24gZm9yIFVTRFQgb3IgQmFzZSBmb3IgVVNEQyB0byBtaW5pbWl6ZSBmZWVzIScgfSk7XG4gICAgICAgIGNyeXB0b1RpcC5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgICAgIGNyeXB0b1RpcC5zdHlsZS5tYXJnaW5Ub3AgPSAnNXB4JztcbiAgICAgICAgY3J5cHRvVGlwLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAvLyBCdXkgTWUgYSBDb2ZmZWUgU2VjdGlvblxuICAgICAgICBjb25zdCBjb2ZmZWVTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIGNvZmZlZVNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHUyNjE1IEJ1eSBNZSBhIENvZmZlZScgfSk7XG4gICAgICAgIGNvZmZlZVNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdTaW1wbGUsIGZyaWVuZGx5IHdheSB0byBzdXBwb3J0OicgfSk7XG4gICAgICAgIGNvbnN0IGNvZmZlZUJ0biA9IGNvZmZlZVNlY3Rpb24uY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHUyMTkyIEJ1eSBNZSBhIENvZmZlZScsXG4gICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly9idXltZWFjb2ZmZWUuY29tL3J2emVuJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29mZmVlQnRuLmFkZENsYXNzKCdzdXBwb3J0LWxpbmsnKTtcblxuICAgICAgICAvLyBPdGhlciB3YXlzIHRvIHN1cHBvcnRcbiAgICAgICAgY29uc3Qgb3RoZXJTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIG90aGVyU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0NcdURGMUYgT3RoZXIgV2F5cyB0byBTdXBwb3J0JyB9KTtcbiAgICAgICAgY29uc3Qgb3RoZXJMaXN0ID0gb3RoZXJTZWN0aW9uLmNyZWF0ZUVsKCd1bCcpO1xuICAgICAgICBvdGhlckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnXHUyQjUwIFN0YXIgdGhlIEdpdEh1YiByZXBvc2l0b3J5JyB9KTtcbiAgICAgICAgb3RoZXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1x1RDgzRFx1REMxQiBSZXBvcnQgYnVncyBhbmQgaXNzdWVzJyB9KTtcbiAgICAgICAgb3RoZXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1x1RDgzRFx1RENBMSBTdWdnZXN0IG5ldyBmZWF0dXJlcycgfSk7XG4gICAgICAgIG90aGVyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdcdUQ4M0RcdURDREQgSW1wcm92ZSBkb2N1bWVudGF0aW9uJyB9KTtcbiAgICAgICAgb3RoZXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1x1RDgzRFx1RERFM1x1RkUwRiBUZWxsIG90aGVycyBhYm91dCB0aGUgcGx1Z2luJyB9KTtcblxuICAgICAgICAvLyBGb290ZXJcbiAgICAgICAgY29uc3QgZm9vdGVyID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1mb290ZXInKTtcbiAgICAgICAgZm9vdGVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgZm9vdGVyLnN0eWxlLnBhZGRpbmcgPSAnMTVweCc7XG4gICAgICAgIGZvb3Rlci5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIGZvb3Rlci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcbiAgICAgICAgZm9vdGVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICBmb290ZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUaGFuayB5b3UgZm9yIHlvdXIgc3VwcG9ydCEgXHVEODNEXHVERTRGJyB9KTtcbiAgICAgICAgZm9vdGVyLmNyZWF0ZUVsKCdzbWFsbCcsIHsgdGV4dDogJ0FsbCBkb25hdGlvbnMgaGVscCBtYWludGFpbiBhbmQgaW1wcm92ZSB0aGlzIHBsdWdpbicgfSk7XG5cbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDbG9zZScgfSk7XG4gICAgICAgIGNsb3NlQnRuLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgY2xvc2VCdG4uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLy8gUmVwb3J0IE1vZGFsXG5jbGFzcyBSZXBvcnRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRXhwZW5zZSBSZXBvcnQnIH0pO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdTdGFydCBNb250aCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnWVlZWS1NTSBmb3JtYXQnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZShtb21lbnQoKS5zdWJ0cmFjdCg1LCAnbW9udGhzJykuZm9ybWF0KCdZWVlZLU1NJykpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdyZXBvcnQtc3RhcnQnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmQgTW9udGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0gZm9ybWF0JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUobW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NJykpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdyZXBvcnQtZW5kJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ21vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcblxuICAgICAgICBjb25zdCBnZW5lcmF0ZUJ0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR2VuZXJhdGUnLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICAgICAgZ2VuZXJhdGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBvcnQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25EaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdlbmVyYXRlUmVwb3J0KCkge1xuICAgICAgICBjb25zdCBzdGFydE1vbnRoID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBvcnQtc3RhcnQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgY29uc3QgZW5kTW9udGggPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcG9ydC1lbmQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblxuICAgICAgICBjb25zdCByZXBvcnQgPSB0aGlzLmJ1aWxkUmVwb3J0KHN0YXJ0TW9udGgsIGVuZE1vbnRoKTtcblxuICAgICAgICAvLyBDcmVhdGUgcmVwb3J0IGluIE1vbnRobHkgRXhwZW5zZXMvRXhwZW5zZSBSZXBvcnRzIGZvbGRlclxuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseU5vdGVzRm9sZGVyfS9FeHBlbnNlIFJlcG9ydHNgO1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGBFeHBlbnNlIFJlcG9ydCAke3N0YXJ0TW9udGh9IHRvICR7ZW5kTW9udGh9Lm1kYDtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWA7XG5cbiAgICAgICAgLy8gRW5zdXJlIGZvbGRlciBleGlzdHNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDcmVhdGUgb3Igb3ZlcndyaXRlIHRoZSByZXBvcnRcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1JlcG9ydCB1cGRhdGVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdSZXBvcnQgZ2VuZXJhdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByZXBvcnQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgY3JlYXRpbmcgcmVwb3J0Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBidWlsZFJlcG9ydChzdGFydE1vbnRoOiBzdHJpbmcsIGVuZE1vbnRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVwb3J0ID0gYCMgRXhwZW5zZSBSZXBvcnRcXG5cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCoqUGVyaW9kOioqICR7bW9tZW50KHN0YXJ0TW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU0gWVlZWScpfSAtICR7bW9tZW50KGVuZE1vbnRoLCAnWVlZWS1NTScpLmZvcm1hdCgnTU1NIFlZWVknKX1cXG5cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCoqR2VuZXJhdGVkOioqICR7bW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tJyl9XFxuXFxuLS0tXFxuXFxuYDtcblxuICAgICAgICBjb25zdCBzdGFydCA9IG1vbWVudChzdGFydE1vbnRoLCAnWVlZWS1NTScpO1xuICAgICAgICBjb25zdCBlbmQgPSBtb21lbnQoZW5kTW9udGgsICdZWVlZLU1NJyk7XG5cbiAgICAgICAgLy8gQWdncmVnYXRlIHRvdGFscyBieSBjdXJyZW5jeVxuICAgICAgICBjb25zdCB0b3RhbEFtb3VudDogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xuICAgICAgICBjb25zdCB0b3RhbFBhaWQ6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgICAgICAgY29uc3QgdG90YWxVbnBhaWQ6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcblxuICAgICAgICByZXBvcnQgKz0gYCMjIE1vbnRobHkgQnJlYWtkb3duXFxuXFxuYDtcblxuICAgICAgICBsZXQgY3VycmVudCA9IHN0YXJ0LmNsb25lKCk7XG4gICAgICAgIHdoaWxlIChjdXJyZW50LmlzU2FtZU9yQmVmb3JlKGVuZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gY3VycmVudC5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY3VycmluZ0V4cGVuc2VzID0gdGhpcy5wbHVnaW4uZ2V0RXhwZW5zZXNGb3JNb250aChtb250aCk7XG4gICAgICAgICAgICBjb25zdCBvbmVUaW1lRXhwZW5zZXMgPSB0aGlzLnBsdWdpbi5nZXRPbmVUaW1lRXhwZW5zZXNGb3JNb250aChtb250aCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1vbnRoVG90YWxzOiB7IFtrZXk6IHN0cmluZ106IHsgdG90YWw6IG51bWJlciwgcGFpZDogbnVtYmVyIH0gfSA9IHt9O1xuXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzID0gKGFtb3VudDogbnVtYmVyLCBjdXJyZW5jeTogc3RyaW5nLCBwYWlkOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFtb250aFRvdGFsc1tjdXJyZW5jeV0pIG1vbnRoVG90YWxzW2N1cnJlbmN5XSA9IHsgdG90YWw6IDAsIHBhaWQ6IDAgfTtcbiAgICAgICAgICAgICAgICBtb250aFRvdGFsc1tjdXJyZW5jeV0udG90YWwgKz0gYW1vdW50O1xuICAgICAgICAgICAgICAgIGlmIChwYWlkKSBtb250aFRvdGFsc1tjdXJyZW5jeV0ucGFpZCArPSBhbW91bnQ7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gZ2xvYmFsIHRvdGFsc1xuICAgICAgICAgICAgICAgIGlmICghdG90YWxBbW91bnRbY3VycmVuY3ldKSB0b3RhbEFtb3VudFtjdXJyZW5jeV0gPSAwO1xuICAgICAgICAgICAgICAgIGlmICghdG90YWxQYWlkW2N1cnJlbmN5XSkgdG90YWxQYWlkW2N1cnJlbmN5XSA9IDA7XG4gICAgICAgICAgICAgICAgdG90YWxBbW91bnRbY3VycmVuY3ldICs9IGFtb3VudDtcbiAgICAgICAgICAgICAgICBpZiAocGFpZCkgdG90YWxQYWlkW2N1cnJlbmN5XSArPSBhbW91bnQ7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBSZWN1cnJpbmdcbiAgICAgICAgICAgIHJlY3VycmluZ0V4cGVuc2VzLmZvckVhY2goZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudCA9IHRoaXMucGx1Z2luLmdldFBheW1lbnQoZS5pZCwgbW9udGgpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3MoZS5hbW91bnQsIGUuY3VycmVuY3kgfHwgJ1VTRCcsIHBheW1lbnQ/LnBhaWQgfHwgZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE9uZS1UaW1lXG4gICAgICAgICAgICBvbmVUaW1lRXhwZW5zZXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzKGUuYW1vdW50LCBlLmN1cnJlbmN5IHx8ICdVU0QnLCBlLnBhaWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJlcG9ydCArPSBgIyMjICR7Y3VycmVudC5mb3JtYXQoJ01NTU0gWVlZWScpfVxcblxcbmA7XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbmNpZXMgPSBPYmplY3Qua2V5cyhtb250aFRvdGFscykuc29ydCgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbmNpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGAtIE5vIGV4cGVuc2VzXFxuYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVuY2llcy5mb3JFYWNoKGN1cnJlbmN5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN5bWJvbCA9IGN1cnJlbmN5ICsgJyAnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVuY3kgPT09ICdVU0QnKSBzeW1ib2wgPSAnJCc7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbmN5ID09PSAnQk9CJykgc3ltYm9sID0gJ0JzICc7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbmN5ID09PSAnRVVSJykgc3ltYm9sID0gJ1x1MjBBQyc7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbmN5ID09PSAnR0JQJykgc3ltYm9sID0gJ1x1MDBBMyc7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG1vbnRoVG90YWxzW2N1cnJlbmN5XTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5wYWlkID0gZGF0YS50b3RhbCAtIGRhdGEucGFpZDtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0ICs9IGAtICoqJHtjdXJyZW5jeX0qKjogVG90YWw6ICR7c3ltYm9sfSR7ZGF0YS50b3RhbC50b0ZpeGVkKDIpfSB8IFBhaWQ6ICR7c3ltYm9sfSR7ZGF0YS5wYWlkLnRvRml4ZWQoMil9IHwgVW5wYWlkOiAke3N5bWJvbH0ke3VucGFpZC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXBvcnQgKz0gYFxcbmA7XG5cbiAgICAgICAgICAgIGN1cnJlbnQuYWRkKDEsICdtb250aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwb3J0ICs9IGAjIyBTdW1tYXJ5XFxuXFxuYDtcbiAgICAgICAgY29uc3QgYWxsQ3VycmVuY2llcyA9IE9iamVjdC5rZXlzKHRvdGFsQW1vdW50KS5zb3J0KCk7XG5cbiAgICAgICAgaWYgKGFsbEN1cnJlbmNpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXBvcnQgKz0gYE5vIGV4cGVuc2VzIGZvdW5kIGluIHRoaXMgcGVyaW9kLlxcblxcbmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbGxDdXJyZW5jaWVzLmZvckVhY2goY3VycmVuY3kgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzeW1ib2wgPSBjdXJyZW5jeSArICcgJztcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVuY3kgPT09ICdVU0QnKSBzeW1ib2wgPSAnJCc7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVuY3kgPT09ICdCT0InKSBzeW1ib2wgPSAnQnMgJztcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW5jeSA9PT0gJ0VVUicpIHN5bWJvbCA9ICdcdTIwQUMnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbmN5ID09PSAnR0JQJykgc3ltYm9sID0gJ1x1MDBBMyc7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbCA9IHRvdGFsQW1vdW50W2N1cnJlbmN5XTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYWlkID0gdG90YWxQYWlkW2N1cnJlbmN5XSB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVucGFpZCA9IHRvdGFsIC0gcGFpZDtcbiAgICAgICAgICAgICAgICBjb25zdCByYXRlID0gdG90YWwgPiAwID8gKChwYWlkIC8gdG90YWwpICogMTAwKS50b0ZpeGVkKDEpIDogJzAnO1xuXG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGAjIyMgJHtjdXJyZW5jeX1cXG5gO1xuICAgICAgICAgICAgICAgIHJlcG9ydCArPSBgLSAqKlRvdGFsIEFtb3VudDoqKiAke3N5bWJvbH0ke3RvdGFsLnRvRml4ZWQoMil9XFxuYDtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYC0gKipUb3RhbCBQYWlkOioqICR7c3ltYm9sfSR7cGFpZC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGAtICoqVG90YWwgVW5wYWlkOioqICR7c3ltYm9sfSR7dW5wYWlkLnRvRml4ZWQoMil9XFxuYDtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYC0gKipQYXltZW50IFJhdGU6KiogJHtyYXRlfSVcXG5cXG5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhwZW5zZSBicmVha2Rvd24gKFJlY3VycmluZyBvbmx5IGZvciBkZXRhaWxlZCBoaXN0b3J5IHVzdWFsbHksIGJ1dCBtYXliZSBsaXN0IG9uZS10aW1lIHNpZ25pZmljYW50IG9uZXM/KVxuICAgICAgICAvLyBMZXQncyBrZWVwIGV4aXN0aW5nIGJyZWFrZG93biBmb3IgcmVjdXJyaW5nIGFzIHRoZXkgdHJhY2sgb3ZlciB0aW1lLlxuICAgICAgICByZXBvcnQgKz0gYCMjIFJlY3VycmluZyBFeHBlbnNlIEJyZWFrZG93blxcblxcbmA7XG4gICAgICAgIGNvbnN0IGFsbEV4cGVuc2VzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMuZmlsdGVyKGUgPT4gIWUuYXJjaGl2ZWQpO1xuICAgICAgICBhbGxFeHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5UGF5bWVudHMuZmlsdGVyKHAgPT5cbiAgICAgICAgICAgICAgICBwLmV4cGVuc2VJZCA9PT0gZXhwZW5zZS5pZCAmJlxuICAgICAgICAgICAgICAgIG1vbWVudChwLm1vbnRoLCAnWVlZWS1NTScpLmlzQmV0d2VlbihzdGFydCwgZW5kLCBudWxsLCAnW10nKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHBhaWRDb3VudCA9IHBheW1lbnRzLmZpbHRlcihwID0+IHAucGFpZCkubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IHBheW1lbnRzLmxlbmd0aDtcblxuICAgICAgICAgICAgY29uc3QgY3VyID0gZXhwZW5zZS5jdXJyZW5jeSB8fCAnVVNEJztcbiAgICAgICAgICAgIGxldCBzeW1ib2wgPSBjdXIgKyAnICc7XG4gICAgICAgICAgICBpZiAoY3VyID09PSAnVVNEJykgc3ltYm9sID0gJyQnO1xuICAgICAgICAgICAgZWxzZSBpZiAoY3VyID09PSAnQk9CJykgc3ltYm9sID0gJ0JzICc7XG4gICAgICAgICAgICBlbHNlIGlmIChjdXIgPT09ICdFVVInKSBzeW1ib2wgPSAnXHUyMEFDJztcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1ciA9PT0gJ0dCUCcpIHN5bWJvbCA9ICdcdTAwQTMnO1xuXG4gICAgICAgICAgICByZXBvcnQgKz0gYCMjIyAke2V4cGVuc2UubmFtZX1cXG5cXG5gO1xuICAgICAgICAgICAgcmVwb3J0ICs9IGAtIEFtb3VudDogJHtzeW1ib2x9JHtleHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gUGF5bWVudCBNZXRob2Q6ICR7ZXhwZW5zZS5wYXltZW50TWV0aG9kfVxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gUGFpZDogJHtwYWlkQ291bnR9LyR7dG90YWxDb3VudH0gbW9udGhzXFxuYDtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgLSBUb3RhbCBQYWlkOiAke3N5bWJvbH0keyhwYWlkQ291bnQgKiBleHBlbnNlLmFtb3VudCkudG9GaXhlZCgyKX1cXG5cXG5gO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNYXliZSBhZGQgT25lLVRpbWUgbGlzdD9cbiAgICAgICAgcmVwb3J0ICs9IGAjIyBPbmUtVGltZSBFeHBlbnNlcyBMaXN0XFxuXFxuYDtcbiAgICAgICAgY29uc3QgYWxsT25lVGltZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm9uZVRpbWVFeHBlbnNlcy5maWx0ZXIoZSA9PlxuICAgICAgICAgICAgbW9tZW50KGUuZGF0ZSkuaXNCZXR3ZWVuKHN0YXJ0LCBlbmQsIG51bGwsICdbXScpXG4gICAgICAgICkuc29ydCgoYSwgYikgPT4gYS5kYXRlLmxvY2FsZUNvbXBhcmUoYi5kYXRlKSk7XG5cbiAgICAgICAgaWYgKGFsbE9uZVRpbWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYWxsT25lVGltZS5mb3JFYWNoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGUucGFpZCA/ICdQYWlkJyA6ICdVbnBhaWQnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN5bWJvbCA9IChlLmN1cnJlbmN5IHx8ICdVU0QnKSA9PT0gJ1VTRCcgPyAnJCcgOiAoKGUuY3VycmVuY3kgfHwgJ1VTRCcpID09PSAnQk9CJyA/ICdCcyAnIDogYCR7ZS5jdXJyZW5jeX0gYCk7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGAtICR7ZS5kYXRlfTogKioke2UubmFtZX0qKiAtICR7c3ltYm9sfSR7ZS5hbW91bnQudG9GaXhlZCgyKX0gKCR7c3RhdHVzfSlcXG5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXBvcnQgKz0gYE5vIG9uZS10aW1lIGV4cGVuc2VzIGluIHRoaXMgcGVyaW9kLlxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVwb3J0O1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFNldHRpbmdzIFRhYlxuY2xhc3MgRXhwZW5zZVRyYWNrZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01vbnRobHkgRXhwZW5zZSBUcmFja2VyIFNldHRpbmdzJyB9KTtcblxuICAgICAgICAvLyBTdXBwb3J0IFNlY3Rpb25cbiAgICAgICAgY29uc3Qgc3VwcG9ydFNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1zdXBwb3J0LXNlY3Rpb24nKTtcbiAgICAgICAgc3VwcG9ydFNlY3Rpb24uc3R5bGUucGFkZGluZyA9ICcyMHB4JztcbiAgICAgICAgc3VwcG9ydFNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICBzdXBwb3J0U2VjdGlvbi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIHN1cHBvcnRTZWN0aW9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xuICAgICAgICBzdXBwb3J0U2VjdGlvbi5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuXG4gICAgICAgIGNvbnN0IHN1cHBvcnRIZWFkZXIgPSBzdXBwb3J0U2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURDOTkgU3VwcG9ydCBUaGlzIFBsdWdpbicgfSk7XG4gICAgICAgIHN1cHBvcnRIZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gJzAnO1xuICAgICAgICBzdXBwb3J0SGVhZGVyLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuXG4gICAgICAgIHN1cHBvcnRTZWN0aW9uLmNyZWF0ZUVsKCdwJywge1xuICAgICAgICAgICAgdGV4dDogJ0lmIHlvdSBmaW5kIHRoaXMgcGx1Z2luIGhlbHBmdWwsIGNvbnNpZGVyIHN1cHBvcnRpbmcgaXRzIGRldmVsb3BtZW50ISdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc3VwcG9ydExpbmtzID0gc3VwcG9ydFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICAgIHN1cHBvcnRMaW5rcy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBzdXBwb3J0TGlua3Muc3R5bGUuZ2FwID0gJzEwcHgnO1xuICAgICAgICBzdXBwb3J0TGlua3Muc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XG4gICAgICAgIHN1cHBvcnRMaW5rcy5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG5cbiAgICAgICAgLy8gUGF5UGFsIGJ1dHRvblxuICAgICAgICBjb25zdCBwYXlwYWxCdG4gPSBzdXBwb3J0TGlua3MuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0IzIFBheVBhbCcsXG4gICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9wYXlwYWxtZS9WaWN0b3JaZW50ZW5vJ1xuICAgICAgICB9KTtcbiAgICAgICAgcGF5cGFsQnRuLnN0eWxlLmNzc1RleHQgPSAncGFkZGluZzogOHB4IDE2cHg7IGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7IGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7IGJvcmRlci1yYWRpdXM6IDRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBmb250LXdlaWdodDogNjAwOyc7XG5cbiAgICAgICAgLy8gQ3J5cHRvIGJ1dHRvblxuICAgICAgICBjb25zdCBjcnlwdG9CdG4gPSBzdXBwb3J0TGlua3MuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdUQ4M0VcdURFOTkgVVNEQy9VU0RUJ1xuICAgICAgICB9KTtcbiAgICAgICAgY3J5cHRvQnRuLnN0eWxlLmNzc1RleHQgPSAncGFkZGluZzogOHB4IDE2cHg7IGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7IGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7IGJvcmRlci1yYWRpdXM6IDRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBmb250LXdlaWdodDogNjAwOyBjdXJzb3I6IHBvaW50ZXI7IGJvcmRlcjogbm9uZTsnO1xuICAgICAgICBjcnlwdG9CdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIG5ldyBTdXBwb3J0TW9kYWwodGhpcy5hcHApLm9wZW4oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBCdXkgTWUgYSBDb2ZmZWUgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNvZmZlZUJ0biA9IHN1cHBvcnRMaW5rcy5jcmVhdGVFbCgnYScsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTI2MTUgQ29mZmVlJyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2J1eW1lYWNvZmZlZS5jb20vcnZ6ZW4nXG4gICAgICAgIH0pO1xuICAgICAgICBjb2ZmZWVCdG4uc3R5bGUuY3NzVGV4dCA9ICdwYWRkaW5nOiA4cHggMTZweDsgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTsgYm9yZGVyLXJhZGl1czogNHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGZvbnQtd2VpZ2h0OiA2MDA7JztcblxuICAgICAgICBjb25zdCBzdXBwb3J0Tm90ZSA9IHN1cHBvcnRTZWN0aW9uLmNyZWF0ZUVsKCdwJywge1xuICAgICAgICAgICAgdGV4dDogJ1lvdXIgc3VwcG9ydCBoZWxwcyBtYWludGFpbiBhbmQgaW1wcm92ZSB0aGlzIHBsdWdpbi4gVGhhbmsgeW91ISBcdUQ4M0RcdURFNEYnXG4gICAgICAgIH0pO1xuICAgICAgICBzdXBwb3J0Tm90ZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMCc7XG4gICAgICAgIHN1cHBvcnROb3RlLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICAgICAgc3VwcG9ydE5vdGUuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgICAgICBzdXBwb3J0Tm90ZS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2hyJywgeyBjbHM6ICdleHBlbnNlLXRyYWNrZXItZGl2aWRlcicgfSk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1BsdWdpbiBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTW9udGhseSBOb3RlcyBGb2xkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0ZvbGRlciB3aGVyZSBtb250aGx5IGV4cGVuc2Ugbm90ZXMgd2lsbCBiZSBjcmVhdGVkJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5Tm90ZXNGb2xkZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5Tm90ZXNGb2xkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0F1dG8tY3JlYXRlIE1vbnRobHkgTm90ZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgY3JlYXRlIG1vbnRobHkgbm90ZXMgd2hlbiBhIG5ldyBtb250aCBiZWdpbnMnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGVNb250aGx5Tm90ZXMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ3JlYXRlTW9udGhseU5vdGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG93IFN0YXR1cyBCYXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Rpc3BsYXkgdW5wYWlkIGV4cGVuc2UgY291bnQgaW4gc3RhdHVzIGJhcicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0YXR1c0JhcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGF0dXNCYXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmICF0aGlzLnBsdWdpbi5zdGF0dXNCYXJJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zdGF0dXNCYXJJdGVtID0gdGhpcy5wbHVnaW4uYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbHVlICYmIHRoaXMucGx1Z2luLnN0YXR1c0Jhckl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnN0YXR1c0Jhckl0ZW0ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTW9udGhseSBOb3RlIFRlbXBsYXRlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdUZW1wbGF0ZSBmb3IgbW9udGhseSBub3Rlcy4gVXNlIHt7bW9udGh9fSBhbmQge3tleHBlbnNlc319IGFzIHBsYWNlaG9sZGVycy4nKVxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseU5vdGVUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSAxMDtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuY29scyA9IDUwO1xuICAgICAgICAgICAgICAgIHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRobHlOb3RlVGVtcGxhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQVlPO0FBK0NQLElBQU0sbUJBQTJDO0FBQUEsRUFDN0MsbUJBQW1CLENBQUM7QUFBQSxFQUNwQixpQkFBaUIsQ0FBQztBQUFBLEVBQ2xCLGlCQUFpQixDQUFDO0FBQUEsRUFDbEIsb0JBQW9CO0FBQUEsRUFDcEIscUJBQXFCO0FBQUEsRUFDckIsd0JBQXdCO0FBQUEsRUFDeEIsZUFBZTtBQUNuQjtBQUVBLElBQU0sc0JBQXNCO0FBRzVCLElBQXFCLDhCQUFyQixjQUF5RCx1QkFBTztBQUFBLEVBSTVELE1BQU0sU0FB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
