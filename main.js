var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MonthlyExpenseTrackerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  recurringExpenses: [],
  monthlyPayments: [],
  monthlyNotesFolder: "Monthly Expenses",
  monthlyNoteTemplate: "# {{month}} - Monthly Expenses\n\n## Expense Tracker\n\n{{expenses}}\n\n---\n*Generated by Monthly Expense Tracker*",
  autoCreateMonthlyNotes: true,
  showStatusBar: true
};
var VIEW_TYPE_DASHBOARD = "expense-tracker-dashboard";
var MonthlyExpenseTrackerPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_DASHBOARD,
      (leaf) => new DashboardView(leaf, this)
    );
    this.addRibbonIcon("wallet", "Monthly Expense Tracker", () => {
      this.activateDashboardView();
    });
    this.addCommand({
      id: "open-expense-dashboard",
      name: "Open Expense Dashboard",
      callback: () => {
        this.activateDashboardView();
      }
    });
    this.addCommand({
      id: "add-recurring-expense",
      name: "Add Recurring Expense",
      callback: () => {
        new AddExpenseModal(this.app, this, null).open();
      }
    });
    this.addCommand({
      id: "create-current-month-note",
      name: "Create Current Month Note",
      callback: async () => {
        const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
        await this.createMonthlyNote(currentMonth);
      }
    });
    this.addCommand({
      id: "generate-expense-report",
      name: "Generate Expense Report",
      callback: () => {
        new ReportModal(this.app, this).open();
      }
    });
    if (this.settings.showStatusBar) {
      this.statusBarItem = this.addStatusBarItem();
      this.updateStatusBar();
    }
    if (this.settings.autoCreateMonthlyNotes) {
      this.checkAndCreateMonthlyNote();
    }
    this.addSettingTab(new ExpenseTrackerSettingTab(this.app, this));
    console.log("Monthly Expense Tracker plugin loaded");
  }
  async activateDashboardView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_DASHBOARD)[0];
    if (!leaf) {
      const newLeaf = workspace.getLeaf("tab");
      if (newLeaf) {
        await newLeaf.setViewState({
          type: VIEW_TYPE_DASHBOARD,
          active: true
        });
        leaf = newLeaf;
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async checkAndCreateMonthlyNote() {
    const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
    const monthlyNote = await this.getMonthlyNoteFile(currentMonth);
    if (!monthlyNote) {
      await this.createMonthlyNote(currentMonth);
    }
  }
  async createMonthlyNote(month) {
    const folderPath = this.settings.monthlyNotesFolder;
    const fileName = `${month}.md`;
    const filePath = `${folderPath}/${fileName}`;
    const folder = this.app.vault.getAbstractFileByPath(folderPath);
    if (!folder) {
      await this.app.vault.createFolder(folderPath);
    }
    let file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian.TFile) {
      new import_obsidian.Notice(`Monthly note for ${month} already exists`);
      return file;
    }
    const expenses = this.getExpensesForMonth(month);
    const prevMonth = (0, import_obsidian.moment)(month, "YYYY-MM").subtract(1, "month").format("YYYY-MM");
    const unpaidFromPrev = this.getUnpaidExpenses(prevMonth);
    let expenseList = "## Current Month Expenses\n\n";
    expenses.forEach((expense) => {
      const payment = this.getPayment(expense.id, month);
      const status = (payment == null ? void 0 : payment.paid) ? "x" : " ";
      const statusIcon = (payment == null ? void 0 : payment.paid) ? "\u2705" : "\u2B1C";
      expenseList += `- [${status}] ${statusIcon} **${expense.name}** - $${expense.amount.toFixed(2)} - Due: ${expense.dueDay} - Method: ${expense.paymentMethod}
`;
      expenseList += `  - ID: \`${expense.id}\`
`;
      if (payment == null ? void 0 : payment.confirmationNumber) {
        expenseList += `  - Confirmation: ${payment.confirmationNumber}
`;
      }
      expenseList += "\n";
    });
    if (unpaidFromPrev.length > 0) {
      expenseList += "\n## Unpaid from Previous Month\n\n";
      unpaidFromPrev.forEach((expense) => {
        expenseList += `- [ ] \u26A0\uFE0F **${expense.name}** - $${expense.amount.toFixed(2)} - OVERDUE
`;
        expenseList += `  - ID: \`${expense.id}\`

`;
      });
    }
    if (expenses.length === 0) {
      expenseList += '\n*No expenses set up for this month yet. Click "**+ Add Expense**" in the dashboard to add recurring expenses.*\n\n';
    }
    const content = this.settings.monthlyNoteTemplate.replace("{{month}}", (0, import_obsidian.moment)(month, "YYYY-MM").format("MMMM YYYY")).replace("{{expenses}}", expenseList);
    file = await this.app.vault.create(filePath, content);
    new import_obsidian.Notice(`Created monthly note for ${month}`);
    return file;
  }
  async getMonthlyNoteFile(month) {
    const filePath = `${this.settings.monthlyNotesFolder}/${month}.md`;
    const file = this.app.vault.getAbstractFileByPath(filePath);
    return file instanceof import_obsidian.TFile ? file : null;
  }
  getExpensesForMonth(month) {
    return this.settings.recurringExpenses.filter((expense) => {
      if (expense.archived) return false;
      const expenseStart = (0, import_obsidian.moment)(expense.startDate, "YYYY-MM");
      const expenseEnd = expense.endDate ? (0, import_obsidian.moment)(expense.endDate, "YYYY-MM") : null;
      const checkMonth = (0, import_obsidian.moment)(month, "YYYY-MM");
      const afterStart = checkMonth.isSameOrAfter(expenseStart);
      const beforeEnd = !expenseEnd || checkMonth.isSameOrBefore(expenseEnd);
      return afterStart && beforeEnd;
    });
  }
  getUnpaidExpenses(month) {
    const expenses = this.getExpensesForMonth(month);
    return expenses.filter((expense) => {
      const payment = this.getPayment(expense.id, month);
      return !payment || !payment.paid;
    });
  }
  getPayment(expenseId, month) {
    return this.settings.monthlyPayments.find(
      (p) => p.expenseId === expenseId && p.month === month
    );
  }
  async markExpensePaid(expenseId, month, paid, confirmationNumber) {
    const existingPayment = this.getPayment(expenseId, month);
    if (existingPayment) {
      existingPayment.paid = paid;
      existingPayment.paidDate = paid ? (0, import_obsidian.moment)().format("YYYY-MM-DD") : void 0;
      existingPayment.confirmationNumber = confirmationNumber;
    } else {
      this.settings.monthlyPayments.push({
        expenseId,
        month,
        paid,
        paidDate: paid ? (0, import_obsidian.moment)().format("YYYY-MM-DD") : void 0,
        confirmationNumber
      });
    }
    await this.saveSettings();
    this.updateStatusBar();
  }
  async addRecurringExpense(expense) {
    this.settings.recurringExpenses.push(expense);
    await this.saveSettings();
    new import_obsidian.Notice(`Added recurring expense: ${expense.name}`);
  }
  async updateRecurringExpense(expense) {
    const index = this.settings.recurringExpenses.findIndex((e) => e.id === expense.id);
    if (index !== -1) {
      this.settings.recurringExpenses[index] = expense;
      await this.saveSettings();
      new import_obsidian.Notice(`Updated expense: ${expense.name}`);
    }
  }
  async archiveExpense(expenseId) {
    const expense = this.settings.recurringExpenses.find((e) => e.id === expenseId);
    if (expense) {
      expense.archived = true;
      await this.saveSettings();
      new import_obsidian.Notice(`Archived expense: ${expense.name}`);
    }
  }
  async deleteExpense(expenseId) {
    this.settings.recurringExpenses = this.settings.recurringExpenses.filter((e) => e.id !== expenseId);
    this.settings.monthlyPayments = this.settings.monthlyPayments.filter((p) => p.expenseId !== expenseId);
    await this.saveSettings();
    new import_obsidian.Notice("Expense deleted");
  }
  updateStatusBar() {
    if (!this.statusBarItem) return;
    const currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
    const unpaid = this.getUnpaidExpenses(currentMonth);
    const total = this.getExpensesForMonth(currentMonth).length;
    if (unpaid.length > 0) {
      this.statusBarItem.textContent = `\u{1F4B3} ${unpaid.length}/${total} unpaid`;
      this.statusBarItem.classList.add("expense-tracker-unpaid");
    } else if (total > 0) {
      this.statusBarItem.textContent = `\u{1F4B3} All paid`;
      this.statusBarItem.classList.remove("expense-tracker-unpaid");
    } else {
      this.statusBarItem.textContent = "\u{1F4B3}";
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_DASHBOARD);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof DashboardView) {
        leaf.view.refresh();
      }
    });
  }
  onunload() {
    console.log("Monthly Expense Tracker plugin unloaded");
  }
};
var DashboardView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
  }
  getViewType() {
    return VIEW_TYPE_DASHBOARD;
  }
  getDisplayText() {
    return "Expense Dashboard";
  }
  getIcon() {
    return "wallet";
  }
  async onOpen() {
    this.refresh();
  }
  refresh() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("expense-tracker-dashboard");
    const header = container.createDiv("expense-tracker-header");
    header.createEl("h2", { text: "Monthly Expense Tracker" });
    const monthSelector = container.createDiv("expense-tracker-month-selector");
    const prevBtn = monthSelector.createEl("button", { text: "\u25C0" });
    prevBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").subtract(1, "month").format("YYYY-MM");
      this.refresh();
    };
    const monthDisplay = monthSelector.createEl("span", {
      text: (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").format("MMMM YYYY"),
      cls: "expense-tracker-month-display"
    });
    const nextBtn = monthSelector.createEl("button", { text: "\u25B6" });
    nextBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)(this.currentMonth, "YYYY-MM").add(1, "month").format("YYYY-MM");
      this.refresh();
    };
    const todayBtn = monthSelector.createEl("button", { text: "Today" });
    todayBtn.onclick = () => {
      this.currentMonth = (0, import_obsidian.moment)().format("YYYY-MM");
      this.refresh();
    };
    const expenses = this.plugin.getExpensesForMonth(this.currentMonth);
    const unpaid = this.plugin.getUnpaidExpenses(this.currentMonth);
    const totalAmount = expenses.reduce((sum, e) => sum + e.amount, 0);
    const paidAmount = expenses.filter((e) => {
      const payment = this.plugin.getPayment(e.id, this.currentMonth);
      return payment == null ? void 0 : payment.paid;
    }).reduce((sum, e) => sum + e.amount, 0);
    const summary = container.createDiv("expense-tracker-summary");
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Total Expenses:</span>
            <span class="summary-value">${expenses.length}</span>
        `;
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Unpaid:</span>
            <span class="summary-value unpaid">${unpaid.length}</span>
        `;
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Total Amount:</span>
            <span class="summary-value">$${totalAmount.toFixed(2)}</span>
        `;
    summary.createDiv("summary-item").innerHTML = `
            <span class="summary-label">Paid:</span>
            <span class="summary-value paid">$${paidAmount.toFixed(2)}</span>
        `;
    const actions = container.createDiv("expense-tracker-actions");
    const addBtn = actions.createEl("button", { text: "+ Add Expense", cls: "mod-cta" });
    addBtn.onclick = () => {
      new AddExpenseModal(this.app, this.plugin, null).open();
    };
    const createNoteBtn = actions.createEl("button", { text: "\u{1F4C4} Create Monthly Note" });
    createNoteBtn.onclick = async () => {
      await this.plugin.createMonthlyNote(this.currentMonth);
    };
    const reportBtn = actions.createEl("button", { text: "\u{1F4CA} Generate Report" });
    reportBtn.onclick = () => {
      new ReportModal(this.app, this.plugin).open();
    };
    const supportBtn = actions.createEl("button", { text: "\u{1F499} Support Plugin" });
    supportBtn.onclick = () => {
      new SupportModal(this.app).open();
    };
    supportBtn.style.background = "var(--interactive-accent)";
    supportBtn.style.color = "var(--text-on-accent)";
    const expenseList = container.createEl("div", { cls: "expense-tracker-list" });
    if (expenses.length === 0) {
      expenseList.createDiv("expense-tracker-empty").setText("No expenses for this month");
    } else {
      const paidExpenses = expenses.filter((e) => {
        const payment = this.plugin.getPayment(e.id, this.currentMonth);
        return payment == null ? void 0 : payment.paid;
      });
      const unpaidExpenses = expenses.filter((e) => {
        const payment = this.plugin.getPayment(e.id, this.currentMonth);
        return !(payment == null ? void 0 : payment.paid);
      });
      if (unpaidExpenses.length > 0) {
        expenseList.createEl("h3", { text: "Unpaid" });
        unpaidExpenses.forEach((expense) => {
          this.renderExpenseItem(expenseList, expense);
        });
      }
      if (paidExpenses.length > 0) {
        expenseList.createEl("h3", { text: "Paid" });
        paidExpenses.forEach((expense) => {
          this.renderExpenseItem(expenseList, expense);
        });
      }
    }
    const archivedExpenses = this.plugin.settings.recurringExpenses.filter((e) => e.archived);
    if (archivedExpenses.length > 0) {
      const archivedSection = container.createDiv("expense-tracker-archived");
      const archivedHeader = archivedSection.createEl("h3", { text: "Archived Expenses" });
      archivedHeader.style.cursor = "pointer";
      const archivedList = archivedSection.createDiv("expense-tracker-archived-list");
      archivedList.style.display = "none";
      archivedHeader.onclick = () => {
        archivedList.style.display = archivedList.style.display === "none" ? "block" : "none";
      };
      archivedExpenses.forEach((expense) => {
        const item = archivedList.createDiv("expense-item archived");
        item.innerHTML = `
                    <div class="expense-name">${expense.name}</div>
                    <div class="expense-details">$${expense.amount.toFixed(2)} - ${expense.paymentMethod}</div>
                `;
        item.onclick = () => {
          const menu = new import_obsidian.Menu();
          menu.addItem((item2) => {
            item2.setTitle("Unarchive").onClick(async () => {
              expense.archived = false;
              await this.plugin.saveSettings();
              this.refresh();
            });
          });
          menu.addItem((item2) => {
            item2.setTitle("Delete").onClick(async () => {
              await this.plugin.deleteExpense(expense.id);
              this.refresh();
            });
          });
          menu.showAtMouseEvent(event);
        };
      });
    }
  }
  renderExpenseItem(container, expense) {
    const payment = this.plugin.getPayment(expense.id, this.currentMonth);
    const isPaid = (payment == null ? void 0 : payment.paid) || false;
    const isOverdue = expense.dueDay < parseInt((0, import_obsidian.moment)().format("D")) && !isPaid && this.currentMonth === (0, import_obsidian.moment)().format("YYYY-MM");
    const item = container.createDiv("expense-item");
    if (isPaid) item.addClass("paid");
    if (isOverdue) item.addClass("overdue");
    const checkbox = item.createEl("input", { type: "checkbox" });
    checkbox.checked = isPaid;
    checkbox.onclick = async (e) => {
      e.stopPropagation();
      if (!isPaid) {
        new MarkPaidModal(this.app, this.plugin, expense, this.currentMonth, () => {
          this.refresh();
        }).open();
      } else {
        await this.plugin.markExpensePaid(expense.id, this.currentMonth, false);
        this.refresh();
      }
    };
    const content = item.createDiv("expense-content");
    const nameDiv = content.createDiv("expense-name");
    nameDiv.setText(expense.name);
    if (isOverdue) {
      nameDiv.createSpan({ text: " \u26A0\uFE0F OVERDUE", cls: "overdue-badge" });
    }
    const details = content.createDiv("expense-details");
    details.innerHTML = `
            $${expense.amount.toFixed(2)} \u2022 Due: ${expense.dueDay} \u2022 ${expense.paymentMethod}
            ${(payment == null ? void 0 : payment.confirmationNumber) ? `<br>Confirmation: ${payment.confirmationNumber}` : ""}
            ${(payment == null ? void 0 : payment.paidDate) ? `<br>Paid: ${payment.paidDate}` : ""}
        `;
    const actions = item.createDiv("expense-actions");
    const menuBtn = actions.createEl("button", { text: "\u22EE" });
    menuBtn.onclick = (e) => {
      e.stopPropagation();
      const menu = new import_obsidian.Menu();
      menu.addItem((item2) => {
        item2.setTitle("Edit").setIcon("pencil").onClick(() => {
          new AddExpenseModal(this.app, this.plugin, expense).open();
        });
      });
      menu.addItem((item2) => {
        item2.setTitle("View History").setIcon("history").onClick(() => {
          new HistoryModal(this.app, this.plugin, expense).open();
        });
      });
      menu.addItem((item2) => {
        item2.setTitle("Archive").setIcon("archive").onClick(async () => {
          await this.plugin.archiveExpense(expense.id);
          this.refresh();
        });
      });
      menu.addItem((item2) => {
        item2.setTitle("Delete").setIcon("trash").onClick(async () => {
          await this.plugin.deleteExpense(expense.id);
          this.refresh();
        });
      });
      menu.showAtMouseEvent(e);
    };
  }
  async onClose() {
  }
};
var AddExpenseModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.expense ? "Edit Expense" : "Add Recurring Expense" });
    const form = contentEl.createDiv("expense-form");
    new import_obsidian.Setting(form).setName("Expense Name").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.name) || "");
      text.inputEl.id = "expense-name";
    });
    new import_obsidian.Setting(form).setName("Amount").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.amount.toString()) || "");
      text.inputEl.type = "number";
      text.inputEl.step = "0.01";
      text.inputEl.id = "expense-amount";
    });
    new import_obsidian.Setting(form).setName("Due Day of Month").setDesc("1-31").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.dueDay.toString()) || "1");
      text.inputEl.type = "number";
      text.inputEl.min = "1";
      text.inputEl.max = "31";
      text.inputEl.id = "expense-due-day";
    });
    new import_obsidian.Setting(form).setName("Payment Method").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.paymentMethod) || "");
      text.inputEl.id = "expense-payment-method";
    });
    new import_obsidian.Setting(form).setName("Start Month").setDesc("YYYY-MM format").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.startDate) || (0, import_obsidian.moment)().format("YYYY-MM"));
      text.inputEl.id = "expense-start-date";
    });
    new import_obsidian.Setting(form).setName("End Month (Optional)").setDesc("YYYY-MM format - leave empty for ongoing").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.endDate) || "");
      text.inputEl.id = "expense-end-date";
    });
    new import_obsidian.Setting(form).setName("Category (Optional)").addText((text) => {
      var _a;
      text.setValue(((_a = this.expense) == null ? void 0 : _a.category) || "");
      text.inputEl.id = "expense-category";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const saveBtn = buttonDiv.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      await this.handleSubmit();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  async handleSubmit() {
    var _a, _b;
    const name = document.getElementById("expense-name").value;
    const amount = parseFloat(document.getElementById("expense-amount").value);
    const dueDay = parseInt(document.getElementById("expense-due-day").value);
    const paymentMethod = document.getElementById("expense-payment-method").value;
    const startDate = document.getElementById("expense-start-date").value;
    const endDate = document.getElementById("expense-end-date").value;
    const category = document.getElementById("expense-category").value;
    if (!name || !amount || !dueDay || !paymentMethod || !startDate) {
      new import_obsidian.Notice("Please fill in all required fields");
      return;
    }
    const expense = {
      id: ((_a = this.expense) == null ? void 0 : _a.id) || `exp-${Date.now()}`,
      name,
      amount,
      dueDay,
      paymentMethod,
      startDate,
      endDate: endDate || void 0,
      category: category || void 0,
      archived: ((_b = this.expense) == null ? void 0 : _b.archived) || false
    };
    if (this.expense) {
      await this.plugin.updateRecurringExpense(expense);
    } else {
      await this.plugin.addRecurringExpense(expense);
    }
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var MarkPaidModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense, month, onComplete) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
    this.month = month;
    this.onComplete = onComplete;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Mark as Paid" });
    contentEl.createEl("p", { text: `${this.expense.name} - $${this.expense.amount.toFixed(2)}` });
    const form = contentEl.createDiv();
    new import_obsidian.Setting(form).setName("Confirmation Number (Optional)").addText((text) => {
      text.inputEl.id = "confirmation-number";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const saveBtn = buttonDiv.createEl("button", { text: "Mark Paid", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      const confirmationNumber = document.getElementById("confirmation-number").value;
      await this.plugin.markExpensePaid(this.expense.id, this.month, true, confirmationNumber || void 0);
      this.onComplete();
      this.close();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var HistoryModal = class extends import_obsidian.Modal {
  constructor(app, plugin, expense) {
    super(app);
    this.plugin = plugin;
    this.expense = expense;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: `Payment History: ${this.expense.name}` });
    const history = this.plugin.settings.monthlyPayments.filter((p) => p.expenseId === this.expense.id).sort((a, b) => b.month.localeCompare(a.month));
    if (history.length === 0) {
      contentEl.createEl("p", { text: "No payment history" });
    } else {
      const table = contentEl.createEl("table", { cls: "expense-history-table" });
      const thead = table.createEl("thead");
      const headerRow = thead.createEl("tr");
      headerRow.createEl("th", { text: "Month" });
      headerRow.createEl("th", { text: "Status" });
      headerRow.createEl("th", { text: "Paid Date" });
      headerRow.createEl("th", { text: "Confirmation" });
      const tbody = table.createEl("tbody");
      history.forEach((payment) => {
        const row = tbody.createEl("tr");
        row.createEl("td", { text: (0, import_obsidian.moment)(payment.month, "YYYY-MM").format("MMM YYYY") });
        row.createEl("td", { text: payment.paid ? "\u2705 Paid" : "\u2B1C Unpaid" });
        row.createEl("td", { text: payment.paidDate || "-" });
        row.createEl("td", { text: payment.confirmationNumber || "-" });
      });
    }
    const closeBtn = contentEl.createEl("button", { text: "Close" });
    closeBtn.onclick = () => this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SupportModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("expense-tracker-support-modal");
    const header = contentEl.createEl("h2", { text: "\u{1F499} Support Monthly Expense Tracker" });
    header.style.color = "var(--interactive-accent)";
    contentEl.createEl("p", {
      text: "Thank you for considering supporting this plugin! Your support helps maintain and improve this tool."
    });
    const paypalSection = contentEl.createDiv("support-section");
    paypalSection.createEl("h3", { text: "\u{1F4B3} PayPal" });
    paypalSection.createEl("p", { text: "One-time or recurring donations via PayPal:" });
    const paypalBtn = paypalSection.createEl("a", {
      text: "\u2192 Donate via PayPal",
      href: "https://www.paypal.com/paypalme/VictorZenteno"
    });
    paypalBtn.addClass("support-link");
    const cryptoSection = contentEl.createDiv("support-section");
    cryptoSection.createEl("h3", { text: "\u{1FA99} Cryptocurrency (USDC/USDT)" });
    cryptoSection.createEl("p", { text: "Support with stablecoins on multiple networks:" });
    const cryptoAddresses = cryptoSection.createDiv("crypto-addresses");
    const usdcDiv = cryptoAddresses.createDiv("crypto-address");
    usdcDiv.createEl("strong", { text: "USDC (Base Network - Low Fees):" });
    const usdcAddress = usdcDiv.createEl("code", { text: "0x1023142d0548b63542f2a4803b6724d4c26b8bda" });
    usdcAddress.style.display = "block";
    usdcAddress.style.marginTop = "5px";
    usdcAddress.style.padding = "5px";
    usdcAddress.style.background = "var(--background-secondary)";
    usdcAddress.style.borderRadius = "4px";
    usdcAddress.style.fontSize = "0.85em";
    usdcAddress.style.wordBreak = "break-all";
    const usdcNote = usdcDiv.createEl("small", { text: "Also works on: Ethereum, Polygon, Arbitrum, Optimism" });
    usdcNote.style.display = "block";
    usdcNote.style.marginTop = "3px";
    usdcNote.style.color = "var(--text-muted)";
    const usdtDiv = cryptoAddresses.createDiv("crypto-address");
    usdtDiv.createEl("strong", { text: "USDT (Tron TRC-20 - Ultra Low Fees):" });
    const usdtAddress = usdtDiv.createEl("code", { text: "TAV7qTGgvn8GnYJfXfes73tD2dAPQJ3L2W" });
    usdtAddress.style.display = "block";
    usdtAddress.style.marginTop = "5px";
    usdtAddress.style.padding = "5px";
    usdtAddress.style.background = "var(--background-secondary)";
    usdtAddress.style.borderRadius = "4px";
    usdtAddress.style.fontSize = "0.85em";
    usdtAddress.style.wordBreak = "break-all";
    const cryptoNote = cryptoSection.createEl("p", { text: "\u26A0\uFE0F Important: Double-check the network before sending!" });
    cryptoNote.style.color = "var(--text-error)";
    cryptoNote.style.fontSize = "0.9em";
    cryptoNote.style.marginTop = "10px";
    const cryptoTip = cryptoSection.createEl("p", { text: "\u{1F4A1} Tip: Use Tron for USDT or Base for USDC to minimize fees!" });
    cryptoTip.style.fontSize = "0.9em";
    cryptoTip.style.marginTop = "5px";
    cryptoTip.style.color = "var(--text-muted)";
    const coffeeSection = contentEl.createDiv("support-section");
    coffeeSection.createEl("h3", { text: "\u2615 Buy Me a Coffee" });
    coffeeSection.createEl("p", { text: "Simple, friendly way to support:" });
    const coffeeBtn = coffeeSection.createEl("a", {
      text: "\u2192 Buy Me a Coffee",
      href: "https://buymeacoffee.com/rvzen"
    });
    coffeeBtn.addClass("support-link");
    const otherSection = contentEl.createDiv("support-section");
    otherSection.createEl("h3", { text: "\u{1F31F} Other Ways to Support" });
    const otherList = otherSection.createEl("ul");
    otherList.createEl("li", { text: "\u2B50 Star the GitHub repository" });
    otherList.createEl("li", { text: "\u{1F41B} Report bugs and issues" });
    otherList.createEl("li", { text: "\u{1F4A1} Suggest new features" });
    otherList.createEl("li", { text: "\u{1F4DD} Improve documentation" });
    otherList.createEl("li", { text: "\u{1F5E3}\uFE0F Tell others about the plugin" });
    const footer = contentEl.createDiv("support-footer");
    footer.style.marginTop = "20px";
    footer.style.padding = "15px";
    footer.style.background = "var(--background-secondary)";
    footer.style.borderRadius = "8px";
    footer.style.textAlign = "center";
    footer.createEl("p", { text: "Thank you for your support! \u{1F64F}" });
    footer.createEl("small", { text: "All donations help maintain and improve this plugin" });
    const closeBtn = contentEl.createEl("button", { text: "Close" });
    closeBtn.style.marginTop = "20px";
    closeBtn.style.width = "100%";
    closeBtn.onclick = () => this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ReportModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Expense Report" });
    const form = contentEl.createDiv();
    new import_obsidian.Setting(form).setName("Start Month").setDesc("YYYY-MM format").addText((text) => {
      text.setValue((0, import_obsidian.moment)().subtract(5, "months").format("YYYY-MM"));
      text.inputEl.id = "report-start";
    });
    new import_obsidian.Setting(form).setName("End Month").setDesc("YYYY-MM format").addText((text) => {
      text.setValue((0, import_obsidian.moment)().format("YYYY-MM"));
      text.inputEl.id = "report-end";
    });
    const buttonDiv = contentEl.createDiv("modal-button-container");
    const generateBtn = buttonDiv.createEl("button", { text: "Generate", cls: "mod-cta" });
    generateBtn.onclick = () => {
      this.generateReport();
    };
    const cancelBtn = buttonDiv.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => {
      this.close();
    };
  }
  async generateReport() {
    const startMonth = document.getElementById("report-start").value;
    const endMonth = document.getElementById("report-end").value;
    const report = this.buildReport(startMonth, endMonth);
    const folderPath = `${this.plugin.settings.monthlyNotesFolder}/Expense Reports`;
    const fileName = `Expense Report ${startMonth} to ${endMonth}.md`;
    const filePath = `${folderPath}/${fileName}`;
    try {
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (!folder) {
        await this.app.vault.createFolder(folderPath);
      }
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian.TFile) {
        await this.app.vault.modify(existingFile, report);
        new import_obsidian.Notice("Report updated");
      } else {
        await this.app.vault.create(filePath, report);
        new import_obsidian.Notice("Report generated");
      }
      this.close();
    } catch (error) {
      console.error("Error creating report:", error);
      new import_obsidian.Notice("Error creating report");
    }
  }
  buildReport(startMonth, endMonth) {
    let report = `# Expense Report

`;
    report += `**Period:** ${(0, import_obsidian.moment)(startMonth, "YYYY-MM").format("MMM YYYY")} - ${(0, import_obsidian.moment)(endMonth, "YYYY-MM").format("MMM YYYY")}

`;
    report += `**Generated:** ${(0, import_obsidian.moment)().format("YYYY-MM-DD HH:mm")}

---

`;
    const start = (0, import_obsidian.moment)(startMonth, "YYYY-MM");
    const end = (0, import_obsidian.moment)(endMonth, "YYYY-MM");
    let totalAmount = 0;
    let totalPaid = 0;
    let totalUnpaid = 0;
    report += `## Monthly Breakdown

`;
    let current = start.clone();
    while (current.isSameOrBefore(end)) {
      const month = current.format("YYYY-MM");
      const expenses = this.plugin.getExpensesForMonth(month);
      const unpaid = this.plugin.getUnpaidExpenses(month);
      const monthTotal = expenses.reduce((sum, e) => sum + e.amount, 0);
      const monthPaid = expenses.filter((e) => {
        const payment = this.plugin.getPayment(e.id, month);
        return payment == null ? void 0 : payment.paid;
      }).reduce((sum, e) => sum + e.amount, 0);
      const monthUnpaid = monthTotal - monthPaid;
      totalAmount += monthTotal;
      totalPaid += monthPaid;
      totalUnpaid += monthUnpaid;
      report += `### ${current.format("MMMM YYYY")}

`;
      report += `- Total: $${monthTotal.toFixed(2)}
`;
      report += `- Paid: $${monthPaid.toFixed(2)}
`;
      report += `- Unpaid: $${monthUnpaid.toFixed(2)}
`;
      report += `- Expenses: ${expenses.length} (${unpaid.length} unpaid)

`;
      current.add(1, "month");
    }
    report += `## Summary

`;
    report += `- **Total Amount:** $${totalAmount.toFixed(2)}
`;
    report += `- **Total Paid:** $${totalPaid.toFixed(2)}
`;
    report += `- **Total Unpaid:** $${totalUnpaid.toFixed(2)}
`;
    report += `- **Payment Rate:** ${totalAmount > 0 ? (totalPaid / totalAmount * 100).toFixed(1) : 0}%

`;
    report += `## Expense Breakdown

`;
    const allExpenses = this.plugin.settings.recurringExpenses.filter((e) => !e.archived);
    allExpenses.forEach((expense) => {
      const payments = this.plugin.settings.monthlyPayments.filter(
        (p) => p.expenseId === expense.id && (0, import_obsidian.moment)(p.month, "YYYY-MM").isBetween(start, end, null, "[]")
      );
      const paidCount = payments.filter((p) => p.paid).length;
      const totalCount = payments.length;
      report += `### ${expense.name}

`;
      report += `- Amount: $${expense.amount.toFixed(2)}
`;
      report += `- Payment Method: ${expense.paymentMethod}
`;
      report += `- Paid: ${paidCount}/${totalCount} months
`;
      report += `- Total Paid: $${(paidCount * expense.amount).toFixed(2)}

`;
    });
    return report;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ExpenseTrackerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Monthly Expense Tracker Settings" });
    const supportSection = containerEl.createDiv("expense-tracker-support-section");
    supportSection.style.padding = "20px";
    supportSection.style.marginBottom = "20px";
    supportSection.style.background = "var(--background-secondary)";
    supportSection.style.borderRadius = "8px";
    supportSection.style.border = "2px solid var(--interactive-accent)";
    const supportHeader = supportSection.createEl("h3", { text: "\u{1F499} Support This Plugin" });
    supportHeader.style.marginTop = "0";
    supportHeader.style.color = "var(--interactive-accent)";
    supportSection.createEl("p", {
      text: "If you find this plugin helpful, consider supporting its development!"
    });
    const supportLinks = supportSection.createDiv();
    supportLinks.style.display = "flex";
    supportLinks.style.gap = "10px";
    supportLinks.style.flexWrap = "wrap";
    supportLinks.style.marginTop = "10px";
    const paypalBtn = supportLinks.createEl("a", {
      text: "\u{1F4B3} PayPal",
      href: "https://www.paypal.com/paypalme/VictorZenteno"
    });
    paypalBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600;";
    const cryptoBtn = supportLinks.createEl("button", {
      text: "\u{1FA99} USDC/USDT"
    });
    cryptoBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600; cursor: pointer; border: none;";
    cryptoBtn.onclick = () => {
      new SupportModal(this.app).open();
    };
    const coffeeBtn = supportLinks.createEl("a", {
      text: "\u2615 Coffee",
      href: "https://buymeacoffee.com/rvzen"
    });
    coffeeBtn.style.cssText = "padding: 8px 16px; background: var(--interactive-accent); color: var(--text-on-accent); border-radius: 4px; text-decoration: none; font-weight: 600;";
    const supportNote = supportSection.createEl("p", {
      text: "Your support helps maintain and improve this plugin. Thank you! \u{1F64F}"
    });
    supportNote.style.marginBottom = "0";
    supportNote.style.fontSize = "0.9em";
    supportNote.style.color = "var(--text-muted)";
    supportNote.style.marginTop = "10px";
    containerEl.createEl("hr", { cls: "expense-tracker-divider" });
    containerEl.createEl("h2", { text: "Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Monthly Notes Folder").setDesc("Folder where monthly expense notes will be created").addText((text) => text.setValue(this.plugin.settings.monthlyNotesFolder).onChange(async (value) => {
      this.plugin.settings.monthlyNotesFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Auto-create Monthly Notes").setDesc("Automatically create monthly notes when a new month begins").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoCreateMonthlyNotes).onChange(async (value) => {
      this.plugin.settings.autoCreateMonthlyNotes = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Show Status Bar").setDesc("Display unpaid expense count in status bar").addToggle((toggle) => toggle.setValue(this.plugin.settings.showStatusBar).onChange(async (value) => {
      this.plugin.settings.showStatusBar = value;
      await this.plugin.saveSettings();
      if (value && !this.plugin.statusBarItem) {
        this.plugin.statusBarItem = this.plugin.addStatusBarItem();
        this.plugin.updateStatusBar();
      } else if (!value && this.plugin.statusBarItem) {
        this.plugin.statusBarItem.remove();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("Monthly Note Template").setDesc("Template for monthly notes. Use {{month}} and {{expenses}} as placeholders.").addTextArea((text) => {
      text.setValue(this.plugin.settings.monthlyNoteTemplate);
      text.inputEl.rows = 10;
      text.inputEl.cols = 50;
      text.onChange(async (value) => {
        this.plugin.settings.monthlyNoteTemplate = value;
        await this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcbiAgICBBcHAsXG4gICAgUGx1Z2luLFxuICAgIFBsdWdpblNldHRpbmdUYWIsXG4gICAgU2V0dGluZyxcbiAgICBURmlsZSxcbiAgICBXb3Jrc3BhY2VMZWFmLFxuICAgIEl0ZW1WaWV3LFxuICAgIE5vdGljZSxcbiAgICBNb2RhbCxcbiAgICBtb21lbnQsXG4gICAgTWVudVxufSBmcm9tICdvYnNpZGlhbic7XG5cbmludGVyZmFjZSBSZWN1cnJpbmdFeHBlbnNlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBkdWVEYXk6IG51bWJlcjsgLy8gRGF5IG9mIG1vbnRoICgxLTMxKVxuICAgIHBheW1lbnRNZXRob2Q6IHN0cmluZztcbiAgICBzdGFydERhdGU6IHN0cmluZzsgLy8gWVlZWS1NTSBmb3JtYXRcbiAgICBlbmREYXRlPzogc3RyaW5nOyAvLyBZWVlZLU1NIGZvcm1hdCwgb3B0aW9uYWxcbiAgICBhcmNoaXZlZDogYm9vbGVhbjtcbiAgICBjYXRlZ29yeT86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE1vbnRobHlQYXltZW50IHtcbiAgICBleHBlbnNlSWQ6IHN0cmluZztcbiAgICBtb250aDogc3RyaW5nOyAvLyBZWVlZLU1NIGZvcm1hdFxuICAgIHBhaWQ6IGJvb2xlYW47XG4gICAgcGFpZERhdGU/OiBzdHJpbmc7XG4gICAgY29uZmlybWF0aW9uTnVtYmVyPzogc3RyaW5nO1xuICAgIG5vdGVzPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgRXhwZW5zZVRyYWNrZXJTZXR0aW5ncyB7XG4gICAgcmVjdXJyaW5nRXhwZW5zZXM6IFJlY3VycmluZ0V4cGVuc2VbXTtcbiAgICBtb250aGx5UGF5bWVudHM6IE1vbnRobHlQYXltZW50W107XG4gICAgbW9udGhseU5vdGVzRm9sZGVyOiBzdHJpbmc7XG4gICAgbW9udGhseU5vdGVUZW1wbGF0ZTogc3RyaW5nO1xuICAgIGF1dG9DcmVhdGVNb250aGx5Tm90ZXM6IGJvb2xlYW47XG4gICAgc2hvd1N0YXR1c0JhcjogYm9vbGVhbjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRXhwZW5zZVRyYWNrZXJTZXR0aW5ncyA9IHtcbiAgICByZWN1cnJpbmdFeHBlbnNlczogW10sXG4gICAgbW9udGhseVBheW1lbnRzOiBbXSxcbiAgICBtb250aGx5Tm90ZXNGb2xkZXI6ICdNb250aGx5IEV4cGVuc2VzJyxcbiAgICBtb250aGx5Tm90ZVRlbXBsYXRlOiAnIyB7e21vbnRofX0gLSBNb250aGx5IEV4cGVuc2VzXFxuXFxuIyMgRXhwZW5zZSBUcmFja2VyXFxuXFxue3tleHBlbnNlc319XFxuXFxuLS0tXFxuKkdlbmVyYXRlZCBieSBNb250aGx5IEV4cGVuc2UgVHJhY2tlcionLFxuICAgIGF1dG9DcmVhdGVNb250aGx5Tm90ZXM6IHRydWUsXG4gICAgc2hvd1N0YXR1c0JhcjogdHJ1ZVxufTtcblxuY29uc3QgVklFV19UWVBFX0RBU0hCT0FSRCA9ICdleHBlbnNlLXRyYWNrZXItZGFzaGJvYXJkJztcbmNvbnN0IFZJRVdfVFlQRV9DQUxFTkRBUiA9ICdleHBlbnNlLXRyYWNrZXItY2FsZW5kYXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBFeHBlbnNlVHJhY2tlclNldHRpbmdzO1xuICAgIHN0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHZpZXdzXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgICAgICAgVklFV19UWVBFX0RBU0hCT0FSRCxcbiAgICAgICAgICAgIChsZWFmKSA9PiBuZXcgRGFzaGJvYXJkVmlldyhsZWFmLCB0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ3dhbGxldCcsICdNb250aGx5IEV4cGVuc2UgVHJhY2tlcicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVEYXNoYm9hcmRWaWV3KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBjb21tYW5kc1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLWV4cGVuc2UtZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIG5hbWU6ICdPcGVuIEV4cGVuc2UgRGFzaGJvYXJkJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZURhc2hib2FyZFZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWRkLXJlY3VycmluZy1leHBlbnNlJyxcbiAgICAgICAgICAgIG5hbWU6ICdBZGQgUmVjdXJyaW5nIEV4cGVuc2UnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQWRkRXhwZW5zZU1vZGFsKHRoaXMuYXBwLCB0aGlzLCBudWxsKS5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2NyZWF0ZS1jdXJyZW50LW1vbnRoLW5vdGUnLFxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBDdXJyZW50IE1vbnRoIE5vdGUnLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TW9udGggPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU1vbnRobHlOb3RlKGN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2dlbmVyYXRlLWV4cGVuc2UtcmVwb3J0JyxcbiAgICAgICAgICAgIG5hbWU6ICdHZW5lcmF0ZSBFeHBlbnNlIFJlcG9ydCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBSZXBvcnRNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGF0dXMgYmFyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dTdGF0dXNCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF1dG8tY3JlYXRlIG1vbnRobHkgbm90ZSBpZiBuZWVkZWRcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXV0b0NyZWF0ZU1vbnRobHlOb3Rlcykge1xuICAgICAgICAgICAgdGhpcy5jaGVja0FuZENyZWF0ZU1vbnRobHlOb3RlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR0aW5ncyB0YWJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBFeHBlbnNlVHJhY2tlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnTW9udGhseSBFeHBlbnNlIFRyYWNrZXIgcGx1Z2luIGxvYWRlZCcpO1xuICAgIH1cblxuICAgIGFzeW5jIGFjdGl2YXRlRGFzaGJvYXJkVmlldygpIHtcbiAgICAgICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuICAgICAgICBcbiAgICAgICAgbGV0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9EQVNIQk9BUkQpWzBdO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdMZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xuICAgICAgICAgICAgaWYgKG5ld0xlYWYpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXdMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9EQVNIQk9BUkQsXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxlYWYgPSBuZXdMZWFmO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxlYWYpIHtcbiAgICAgICAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgY2hlY2tBbmRDcmVhdGVNb250aGx5Tm90ZSgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudE1vbnRoID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NJyk7XG4gICAgICAgIGNvbnN0IG1vbnRobHlOb3RlID0gYXdhaXQgdGhpcy5nZXRNb250aGx5Tm90ZUZpbGUoY3VycmVudE1vbnRoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghbW9udGhseU5vdGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTW9udGhseU5vdGUoY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZU1vbnRobHlOb3RlKG1vbnRoOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlPiB7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnNldHRpbmdzLm1vbnRobHlOb3Rlc0ZvbGRlcjtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHttb250aH0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcblxuICAgICAgICAvLyBFbnN1cmUgZm9sZGVyIGV4aXN0c1xuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBmaWxlIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGxldCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgTW9udGhseSBub3RlIGZvciAke21vbnRofSBhbHJlYWR5IGV4aXN0c2ApO1xuICAgICAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgZXhwZW5zZXMgZm9yIHRoaXMgbW9udGhcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSB0aGlzLmdldEV4cGVuc2VzRm9yTW9udGgobW9udGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29weSB1bnBhaWQgZXhwZW5zZXMgZnJvbSBwcmV2aW91cyBtb250aFxuICAgICAgICBjb25zdCBwcmV2TW9udGggPSBtb21lbnQobW9udGgsICdZWVlZLU1NJykuc3VidHJhY3QoMSwgJ21vbnRoJykuZm9ybWF0KCdZWVlZLU1NJyk7XG4gICAgICAgIGNvbnN0IHVucGFpZEZyb21QcmV2ID0gdGhpcy5nZXRVbnBhaWRFeHBlbnNlcyhwcmV2TW9udGgpO1xuXG4gICAgICAgIC8vIEdlbmVyYXRlIGV4cGVuc2UgbGlzdFxuICAgICAgICBsZXQgZXhwZW5zZUxpc3QgPSAnIyMgQ3VycmVudCBNb250aCBFeHBlbnNlc1xcblxcbic7XG4gICAgICAgIGV4cGVuc2VzLmZvckVhY2goZXhwZW5zZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50ID0gdGhpcy5nZXRQYXltZW50KGV4cGVuc2UuaWQsIG1vbnRoKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHBheW1lbnQ/LnBhaWQgPyAneCcgOiAnICc7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXNJY29uID0gcGF5bWVudD8ucGFpZCA/ICdcdTI3MDUnIDogJ1x1MkIxQyc7XG4gICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgLSBbJHtzdGF0dXN9XSAke3N0YXR1c0ljb259ICoqJHtleHBlbnNlLm5hbWV9KiogLSAkJHtleHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfSAtIER1ZTogJHtleHBlbnNlLmR1ZURheX0gLSBNZXRob2Q6ICR7ZXhwZW5zZS5wYXltZW50TWV0aG9kfVxcbmA7XG4gICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgICAtIElEOiBcXGAke2V4cGVuc2UuaWR9XFxgXFxuYDtcbiAgICAgICAgICAgIGlmIChwYXltZW50Py5jb25maXJtYXRpb25OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgICAtIENvbmZpcm1hdGlvbjogJHtwYXltZW50LmNvbmZpcm1hdGlvbk51bWJlcn1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gJ1xcbic7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh1bnBhaWRGcm9tUHJldi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBleHBlbnNlTGlzdCArPSAnXFxuIyMgVW5wYWlkIGZyb20gUHJldmlvdXMgTW9udGhcXG5cXG4nO1xuICAgICAgICAgICAgdW5wYWlkRnJvbVByZXYuZm9yRWFjaChleHBlbnNlID0+IHtcbiAgICAgICAgICAgICAgICBleHBlbnNlTGlzdCArPSBgLSBbIF0gXHUyNkEwXHVGRTBGICoqJHtleHBlbnNlLm5hbWV9KiogLSAkJHtleHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfSAtIE9WRVJEVUVcXG5gO1xuICAgICAgICAgICAgICAgIGV4cGVuc2VMaXN0ICs9IGAgIC0gSUQ6IFxcYCR7ZXhwZW5zZS5pZH1cXGBcXG5cXG5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIG5vIGV4cGVuc2VzLCBhZGQgYSBoZWxwZnVsIG1lc3NhZ2VcbiAgICAgICAgaWYgKGV4cGVuc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXhwZW5zZUxpc3QgKz0gJ1xcbipObyBleHBlbnNlcyBzZXQgdXAgZm9yIHRoaXMgbW9udGggeWV0LiBDbGljayBcIioqKyBBZGQgRXhwZW5zZSoqXCIgaW4gdGhlIGRhc2hib2FyZCB0byBhZGQgcmVjdXJyaW5nIGV4cGVuc2VzLipcXG5cXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgY29udGVudCBmcm9tIHRlbXBsYXRlXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLnNldHRpbmdzLm1vbnRobHlOb3RlVGVtcGxhdGVcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7e21vbnRofX0nLCBtb21lbnQobW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU1NIFlZWVknKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7e2V4cGVuc2VzfX0nLCBleHBlbnNlTGlzdCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGZpbGVcbiAgICAgICAgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYENyZWF0ZWQgbW9udGhseSBub3RlIGZvciAke21vbnRofWApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZpbGUgYXMgVEZpbGU7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0TW9udGhseU5vdGVGaWxlKG1vbnRoOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke3RoaXMuc2V0dGluZ3MubW9udGhseU5vdGVzRm9sZGVyfS8ke21vbnRofS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICByZXR1cm4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlID8gZmlsZSA6IG51bGw7XG4gICAgfVxuXG4gICAgZ2V0RXhwZW5zZXNGb3JNb250aChtb250aDogc3RyaW5nKTogUmVjdXJyaW5nRXhwZW5zZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucmVjdXJyaW5nRXhwZW5zZXMuZmlsdGVyKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgaWYgKGV4cGVuc2UuYXJjaGl2ZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZXhwZW5zZVN0YXJ0ID0gbW9tZW50KGV4cGVuc2Uuc3RhcnREYXRlLCAnWVlZWS1NTScpO1xuICAgICAgICAgICAgY29uc3QgZXhwZW5zZUVuZCA9IGV4cGVuc2UuZW5kRGF0ZSA/IG1vbWVudChleHBlbnNlLmVuZERhdGUsICdZWVlZLU1NJykgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tNb250aCA9IG1vbWVudChtb250aCwgJ1lZWVktTU0nKTtcblxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJTdGFydCA9IGNoZWNrTW9udGguaXNTYW1lT3JBZnRlcihleHBlbnNlU3RhcnQpO1xuICAgICAgICAgICAgY29uc3QgYmVmb3JlRW5kID0gIWV4cGVuc2VFbmQgfHwgY2hlY2tNb250aC5pc1NhbWVPckJlZm9yZShleHBlbnNlRW5kKTtcblxuICAgICAgICAgICAgcmV0dXJuIGFmdGVyU3RhcnQgJiYgYmVmb3JlRW5kO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRVbnBhaWRFeHBlbnNlcyhtb250aDogc3RyaW5nKTogUmVjdXJyaW5nRXhwZW5zZVtdIHtcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSB0aGlzLmdldEV4cGVuc2VzRm9yTW9udGgobW9udGgpO1xuICAgICAgICByZXR1cm4gZXhwZW5zZXMuZmlsdGVyKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudCA9IHRoaXMuZ2V0UGF5bWVudChleHBlbnNlLmlkLCBtb250aCk7XG4gICAgICAgICAgICByZXR1cm4gIXBheW1lbnQgfHwgIXBheW1lbnQucGFpZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0UGF5bWVudChleHBlbnNlSWQ6IHN0cmluZywgbW9udGg6IHN0cmluZyk6IE1vbnRobHlQYXltZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MubW9udGhseVBheW1lbnRzLmZpbmQoXG4gICAgICAgICAgICBwID0+IHAuZXhwZW5zZUlkID09PSBleHBlbnNlSWQgJiYgcC5tb250aCA9PT0gbW9udGhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBtYXJrRXhwZW5zZVBhaWQoZXhwZW5zZUlkOiBzdHJpbmcsIG1vbnRoOiBzdHJpbmcsIHBhaWQ6IGJvb2xlYW4sIGNvbmZpcm1hdGlvbk51bWJlcj86IHN0cmluZykge1xuICAgICAgICBjb25zdCBleGlzdGluZ1BheW1lbnQgPSB0aGlzLmdldFBheW1lbnQoZXhwZW5zZUlkLCBtb250aCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhpc3RpbmdQYXltZW50KSB7XG4gICAgICAgICAgICBleGlzdGluZ1BheW1lbnQucGFpZCA9IHBhaWQ7XG4gICAgICAgICAgICBleGlzdGluZ1BheW1lbnQucGFpZERhdGUgPSBwYWlkID8gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBleGlzdGluZ1BheW1lbnQuY29uZmlybWF0aW9uTnVtYmVyID0gY29uZmlybWF0aW9uTnVtYmVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5tb250aGx5UGF5bWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgZXhwZW5zZUlkLFxuICAgICAgICAgICAgICAgIG1vbnRoLFxuICAgICAgICAgICAgICAgIHBhaWQsXG4gICAgICAgICAgICAgICAgcGFpZERhdGU6IHBhaWQgPyBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb25maXJtYXRpb25OdW1iZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRSZWN1cnJpbmdFeHBlbnNlKGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5wdXNoKGV4cGVuc2UpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICBuZXcgTm90aWNlKGBBZGRlZCByZWN1cnJpbmcgZXhwZW5zZTogJHtleHBlbnNlLm5hbWV9YCk7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlUmVjdXJyaW5nRXhwZW5zZShleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maW5kSW5kZXgoZSA9PiBlLmlkID09PSBleHBlbnNlLmlkKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlc1tpbmRleF0gPSBleHBlbnNlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFVwZGF0ZWQgZXhwZW5zZTogJHtleHBlbnNlLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBhcmNoaXZlRXhwZW5zZShleHBlbnNlSWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBleHBlbnNlID0gdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maW5kKGUgPT4gZS5pZCA9PT0gZXhwZW5zZUlkKTtcbiAgICAgICAgaWYgKGV4cGVuc2UpIHtcbiAgICAgICAgICAgIGV4cGVuc2UuYXJjaGl2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEFyY2hpdmVkIGV4cGVuc2U6ICR7ZXhwZW5zZS5uYW1lfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlRXhwZW5zZShleHBlbnNlSWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJlY3VycmluZ0V4cGVuc2VzID0gdGhpcy5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maWx0ZXIoZSA9PiBlLmlkICE9PSBleHBlbnNlSWQpO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm1vbnRobHlQYXltZW50cyA9IHRoaXMuc2V0dGluZ3MubW9udGhseVBheW1lbnRzLmZpbHRlcihwID0+IHAuZXhwZW5zZUlkICE9PSBleHBlbnNlSWQpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICBuZXcgTm90aWNlKCdFeHBlbnNlIGRlbGV0ZWQnKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0dXNCYXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXJJdGVtKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY3VycmVudE1vbnRoID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NJyk7XG4gICAgICAgIGNvbnN0IHVucGFpZCA9IHRoaXMuZ2V0VW5wYWlkRXhwZW5zZXMoY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmdldEV4cGVuc2VzRm9yTW9udGgoY3VycmVudE1vbnRoKS5sZW5ndGg7XG5cbiAgICAgICAgaWYgKHVucGFpZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0udGV4dENvbnRlbnQgPSBgXHVEODNEXHVEQ0IzICR7dW5wYWlkLmxlbmd0aH0vJHt0b3RhbH0gdW5wYWlkYDtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5jbGFzc0xpc3QuYWRkKCdleHBlbnNlLXRyYWNrZXItdW5wYWlkJyk7XG4gICAgICAgIH0gZWxzZSBpZiAodG90YWwgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0udGV4dENvbnRlbnQgPSBgXHVEODNEXHVEQ0IzIEFsbCBwYWlkYDtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdleHBlbnNlLXRyYWNrZXItdW5wYWlkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0udGV4dENvbnRlbnQgPSAnXHVEODNEXHVEQ0IzJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVmcmVzaCBkYXNoYm9hcmQgaWYgb3BlblxuICAgICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9EQVNIQk9BUkQpO1xuICAgICAgICBsZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBEYXNoYm9hcmRWaWV3KSB7XG4gICAgICAgICAgICAgICAgbGVhZi52aWV3LnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb250aGx5IEV4cGVuc2UgVHJhY2tlciBwbHVnaW4gdW5sb2FkZWQnKTtcbiAgICB9XG59XG5cbi8vIERhc2hib2FyZCBWaWV3XG5jbGFzcyBEYXNoYm9hcmRWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luO1xuICAgIGN1cnJlbnRNb250aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBWSUVXX1RZUEVfREFTSEJPQVJEO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnRXhwZW5zZSBEYXNoYm9hcmQnO1xuICAgIH1cblxuICAgIGdldEljb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICd3YWxsZXQnO1xuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygnZXhwZW5zZS10cmFja2VyLWRhc2hib2FyZCcpO1xuXG4gICAgICAgIC8vIEhlYWRlclxuICAgICAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItaGVhZGVyJyk7XG4gICAgICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNb250aGx5IEV4cGVuc2UgVHJhY2tlcicgfSk7XG5cbiAgICAgICAgLy8gTW9udGggc2VsZWN0b3JcbiAgICAgICAgY29uc3QgbW9udGhTZWxlY3RvciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1tb250aC1zZWxlY3RvcicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJldkJ0biA9IG1vbnRoU2VsZWN0b3IuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1MjVDMCcgfSk7XG4gICAgICAgIHByZXZCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gbW9tZW50KHRoaXMuY3VycmVudE1vbnRoLCAnWVlZWS1NTScpLnN1YnRyYWN0KDEsICdtb250aCcpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgbW9udGhEaXNwbGF5ID0gbW9udGhTZWxlY3Rvci5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiBtb21lbnQodGhpcy5jdXJyZW50TW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU1NIFlZWVknKSxcbiAgICAgICAgICAgIGNsczogJ2V4cGVuc2UtdHJhY2tlci1tb250aC1kaXNwbGF5J1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBuZXh0QnRuID0gbW9udGhTZWxlY3Rvci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHUyNUI2JyB9KTtcbiAgICAgICAgbmV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9udGggPSBtb21lbnQodGhpcy5jdXJyZW50TW9udGgsICdZWVlZLU1NJykuYWRkKDEsICdtb250aCcpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdG9kYXlCdG4gPSBtb250aFNlbGVjdG9yLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdUb2RheScgfSk7XG4gICAgICAgIHRvZGF5QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU3VtbWFyeSBzdGF0c1xuICAgICAgICBjb25zdCBleHBlbnNlcyA9IHRoaXMucGx1Z2luLmdldEV4cGVuc2VzRm9yTW9udGgodGhpcy5jdXJyZW50TW9udGgpO1xuICAgICAgICBjb25zdCB1bnBhaWQgPSB0aGlzLnBsdWdpbi5nZXRVbnBhaWRFeHBlbnNlcyh0aGlzLmN1cnJlbnRNb250aCk7XG4gICAgICAgIGNvbnN0IHRvdGFsQW1vdW50ID0gZXhwZW5zZXMucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIGUuYW1vdW50LCAwKTtcbiAgICAgICAgY29uc3QgcGFpZEFtb3VudCA9IGV4cGVuc2VzXG4gICAgICAgICAgICAuZmlsdGVyKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLnBsdWdpbi5nZXRQYXltZW50KGUuaWQsIHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bWVudD8ucGFpZDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIGUuYW1vdW50LCAwKTtcblxuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gY29udGFpbmVyLmNyZWF0ZURpdignZXhwZW5zZS10cmFja2VyLXN1bW1hcnknKTtcbiAgICAgICAgc3VtbWFyeS5jcmVhdGVEaXYoJ3N1bW1hcnktaXRlbScpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1sYWJlbFwiPlRvdGFsIEV4cGVuc2VzOjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS12YWx1ZVwiPiR7ZXhwZW5zZXMubGVuZ3RofTwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgICAgc3VtbWFyeS5jcmVhdGVEaXYoJ3N1bW1hcnktaXRlbScpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1sYWJlbFwiPlVucGFpZDo8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktdmFsdWUgdW5wYWlkXCI+JHt1bnBhaWQubGVuZ3RofTwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgICAgc3VtbWFyeS5jcmVhdGVEaXYoJ3N1bW1hcnktaXRlbScpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1sYWJlbFwiPlRvdGFsIEFtb3VudDo8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktdmFsdWVcIj4kJHt0b3RhbEFtb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgICAgc3VtbWFyeS5jcmVhdGVEaXYoJ3N1bW1hcnktaXRlbScpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1sYWJlbFwiPlBhaWQ6PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdW1tYXJ5LXZhbHVlIHBhaWRcIj4kJHtwYWlkQW1vdW50LnRvRml4ZWQoMil9PC9zcGFuPlxuICAgICAgICBgO1xuXG4gICAgICAgIC8vIEFjdGlvbiBidXR0b25zXG4gICAgICAgIGNvbnN0IGFjdGlvbnMgPSBjb250YWluZXIuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItYWN0aW9ucycpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWRkQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnKyBBZGQgRXhwZW5zZScsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgICAgICBhZGRCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIG5ldyBBZGRFeHBlbnNlTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBudWxsKS5vcGVuKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY3JlYXRlTm90ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDgzRFx1RENDNCBDcmVhdGUgTW9udGhseSBOb3RlJyB9KTtcbiAgICAgICAgY3JlYXRlTm90ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uY3JlYXRlTW9udGhseU5vdGUodGhpcy5jdXJyZW50TW9udGgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcG9ydEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDgzRFx1RENDQSBHZW5lcmF0ZSBSZXBvcnQnIH0pO1xuICAgICAgICByZXBvcnRCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIG5ldyBSZXBvcnRNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzdXBwb3J0QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEODNEXHVEQzk5IFN1cHBvcnQgUGx1Z2luJyB9KTtcbiAgICAgICAgc3VwcG9ydEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgbmV3IFN1cHBvcnRNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuICAgICAgICB9O1xuICAgICAgICBzdXBwb3J0QnRuLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XG4gICAgICAgIHN1cHBvcnRCdG4uc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1vbi1hY2NlbnQpJztcblxuXG4gICAgICAgIC8vIEV4cGVuc2UgbGlzdFxuICAgICAgICBjb25zdCBleHBlbnNlTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleHBlbnNlLXRyYWNrZXItbGlzdCcgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhwZW5zZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBleHBlbnNlTGlzdC5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1lbXB0eScpLnNldFRleHQoJ05vIGV4cGVuc2VzIGZvciB0aGlzIG1vbnRoJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBHcm91cCBieSBwYWlkIHN0YXR1c1xuICAgICAgICAgICAgY29uc3QgcGFpZEV4cGVuc2VzID0gZXhwZW5zZXMuZmlsdGVyKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnQgPSB0aGlzLnBsdWdpbi5nZXRQYXltZW50KGUuaWQsIHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bWVudD8ucGFpZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdW5wYWlkRXhwZW5zZXMgPSBleHBlbnNlcy5maWx0ZXIoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudCA9IHRoaXMucGx1Z2luLmdldFBheW1lbnQoZS5pZCwgdGhpcy5jdXJyZW50TW9udGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhcGF5bWVudD8ucGFpZDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBTaG93IHVucGFpZCBmaXJzdFxuICAgICAgICAgICAgaWYgKHVucGFpZEV4cGVuc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBleHBlbnNlTGlzdC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdVbnBhaWQnIH0pO1xuICAgICAgICAgICAgICAgIHVucGFpZEV4cGVuc2VzLmZvckVhY2goZXhwZW5zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRXhwZW5zZUl0ZW0oZXhwZW5zZUxpc3QsIGV4cGVuc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUaGVuIHBhaWRcbiAgICAgICAgICAgIGlmIChwYWlkRXhwZW5zZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGV4cGVuc2VMaXN0LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1BhaWQnIH0pO1xuICAgICAgICAgICAgICAgIHBhaWRFeHBlbnNlcy5mb3JFYWNoKGV4cGVuc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckV4cGVuc2VJdGVtKGV4cGVuc2VMaXN0LCBleHBlbnNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFyY2hpdmVkIGV4cGVuc2VzIHNlY3Rpb25cbiAgICAgICAgY29uc3QgYXJjaGl2ZWRFeHBlbnNlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlY3VycmluZ0V4cGVuc2VzLmZpbHRlcihlID0+IGUuYXJjaGl2ZWQpO1xuICAgICAgICBpZiAoYXJjaGl2ZWRFeHBlbnNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBhcmNoaXZlZFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KCdleHBlbnNlLXRyYWNrZXItYXJjaGl2ZWQnKTtcbiAgICAgICAgICAgIGNvbnN0IGFyY2hpdmVkSGVhZGVyID0gYXJjaGl2ZWRTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FyY2hpdmVkIEV4cGVuc2VzJyB9KTtcbiAgICAgICAgICAgIGFyY2hpdmVkSGVhZGVyLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYXJjaGl2ZWRMaXN0ID0gYXJjaGl2ZWRTZWN0aW9uLmNyZWF0ZURpdignZXhwZW5zZS10cmFja2VyLWFyY2hpdmVkLWxpc3QnKTtcbiAgICAgICAgICAgIGFyY2hpdmVkTGlzdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhcmNoaXZlZEhlYWRlci5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFyY2hpdmVkTGlzdC5zdHlsZS5kaXNwbGF5ID0gYXJjaGl2ZWRMaXN0LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhcmNoaXZlZEV4cGVuc2VzLmZvckVhY2goZXhwZW5zZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGFyY2hpdmVkTGlzdC5jcmVhdGVEaXYoJ2V4cGVuc2UtaXRlbSBhcmNoaXZlZCcpO1xuICAgICAgICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXhwZW5zZS1uYW1lXCI+JHtleHBlbnNlLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJleHBlbnNlLWRldGFpbHNcIj4kJHtleHBlbnNlLmFtb3VudC50b0ZpeGVkKDIpfSAtICR7ZXhwZW5zZS5wYXltZW50TWV0aG9kfTwvZGl2PlxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaXRlbS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnVW5hcmNoaXZlJykub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZW5zZS5hcmNoaXZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdEZWxldGUnKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kZWxldGVFeHBlbnNlKGV4cGVuc2UuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQgYXMgTW91c2VFdmVudCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyRXhwZW5zZUl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSkge1xuICAgICAgICBjb25zdCBwYXltZW50ID0gdGhpcy5wbHVnaW4uZ2V0UGF5bWVudChleHBlbnNlLmlkLCB0aGlzLmN1cnJlbnRNb250aCk7XG4gICAgICAgIGNvbnN0IGlzUGFpZCA9IHBheW1lbnQ/LnBhaWQgfHwgZmFsc2U7XG4gICAgICAgIGNvbnN0IGlzT3ZlcmR1ZSA9IGV4cGVuc2UuZHVlRGF5IDwgcGFyc2VJbnQobW9tZW50KCkuZm9ybWF0KCdEJykpICYmICFpc1BhaWQgJiYgdGhpcy5jdXJyZW50TW9udGggPT09IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTScpO1xuXG4gICAgICAgIGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KCdleHBlbnNlLWl0ZW0nKTtcbiAgICAgICAgaWYgKGlzUGFpZCkgaXRlbS5hZGRDbGFzcygncGFpZCcpO1xuICAgICAgICBpZiAoaXNPdmVyZHVlKSBpdGVtLmFkZENsYXNzKCdvdmVyZHVlJyk7XG5cbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBpdGVtLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGlzUGFpZDtcbiAgICAgICAgY2hlY2tib3gub25jbGljayA9IGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaWYgKCFpc1BhaWQpIHtcbiAgICAgICAgICAgICAgICBuZXcgTWFya1BhaWRNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIGV4cGVuc2UsIHRoaXMuY3VycmVudE1vbnRoLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ubWFya0V4cGVuc2VQYWlkKGV4cGVuc2UuaWQsIHRoaXMuY3VycmVudE1vbnRoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY3JlYXRlRGl2KCdleHBlbnNlLWNvbnRlbnQnKTtcbiAgICAgICAgY29uc3QgbmFtZURpdiA9IGNvbnRlbnQuY3JlYXRlRGl2KCdleHBlbnNlLW5hbWUnKTtcbiAgICAgICAgbmFtZURpdi5zZXRUZXh0KGV4cGVuc2UubmFtZSk7XG4gICAgICAgIGlmIChpc092ZXJkdWUpIHtcbiAgICAgICAgICAgIG5hbWVEaXYuY3JlYXRlU3Bhbih7IHRleHQ6ICcgXHUyNkEwXHVGRTBGIE9WRVJEVUUnLCBjbHM6ICdvdmVyZHVlLWJhZGdlJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBjb250ZW50LmNyZWF0ZURpdignZXhwZW5zZS1kZXRhaWxzJyk7XG4gICAgICAgIGRldGFpbHMuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgJCR7ZXhwZW5zZS5hbW91bnQudG9GaXhlZCgyKX0gXHUyMDIyIER1ZTogJHtleHBlbnNlLmR1ZURheX0gXHUyMDIyICR7ZXhwZW5zZS5wYXltZW50TWV0aG9kfVxuICAgICAgICAgICAgJHtwYXltZW50Py5jb25maXJtYXRpb25OdW1iZXIgPyBgPGJyPkNvbmZpcm1hdGlvbjogJHtwYXltZW50LmNvbmZpcm1hdGlvbk51bWJlcn1gIDogJyd9XG4gICAgICAgICAgICAke3BheW1lbnQ/LnBhaWREYXRlID8gYDxicj5QYWlkOiAke3BheW1lbnQucGFpZERhdGV9YCA6ICcnfVxuICAgICAgICBgO1xuXG4gICAgICAgIGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdignZXhwZW5zZS1hY3Rpb25zJyk7XG4gICAgICAgIGNvbnN0IG1lbnVCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTIyRUUnIH0pO1xuICAgICAgICBtZW51QnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnRWRpdCcpLnNldEljb24oJ3BlbmNpbCcpLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXcgQWRkRXhwZW5zZU1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgZXhwZW5zZSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdWaWV3IEhpc3RvcnknKS5zZXRJY29uKCdoaXN0b3J5Jykub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBIaXN0b3J5TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBleHBlbnNlKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0FyY2hpdmUnKS5zZXRJY29uKCdhcmNoaXZlJykub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFyY2hpdmVFeHBlbnNlKGV4cGVuc2UuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnRGVsZXRlJykuc2V0SWNvbigndHJhc2gnKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGVsZXRlRXhwZW5zZShleHBlbnNlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGUgYXMgTW91c2VFdmVudCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAgICAgLy8gQ2xlYW51cFxuICAgIH1cbn1cblxuLy8gQWRkL0VkaXQgRXhwZW5zZSBNb2RhbFxuY2xhc3MgQWRkRXhwZW5zZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luO1xuICAgIGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UgfCBudWxsO1xuICAgIG9uU3VibWl0OiAoZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbiwgZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSB8IG51bGwpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZXhwZW5zZSA9IGV4cGVuc2U7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5leHBlbnNlID8gJ0VkaXQgRXhwZW5zZScgOiAnQWRkIFJlY3VycmluZyBFeHBlbnNlJyB9KTtcblxuICAgICAgICBjb25zdCBmb3JtID0gY29udGVudEVsLmNyZWF0ZURpdignZXhwZW5zZS1mb3JtJyk7XG5cbiAgICAgICAgLy8gTmFtZVxuICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0V4cGVuc2UgTmFtZScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8ubmFtZSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmlkID0gJ2V4cGVuc2UtbmFtZSc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbW91bnRcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdBbW91bnQnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLmV4cGVuc2U/LmFtb3VudC50b1N0cmluZygpIHx8ICcnKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9ICdudW1iZXInO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdGVwID0gJzAuMDEnO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLWFtb3VudCc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBEdWUgRGF5XG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnRHVlIERheSBvZiBNb250aCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnMS0zMScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8uZHVlRGF5LnRvU3RyaW5nKCkgfHwgJzEnKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9ICdudW1iZXInO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5taW4gPSAnMSc7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm1heCA9ICczMSc7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmlkID0gJ2V4cGVuc2UtZHVlLWRheSc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYXltZW50IE1ldGhvZFxuICAgICAgICBuZXcgU2V0dGluZyhmb3JtKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1BheW1lbnQgTWV0aG9kJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5leHBlbnNlPy5wYXltZW50TWV0aG9kIHx8ICcnKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuaWQgPSAnZXhwZW5zZS1wYXltZW50LW1ldGhvZCc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCBEYXRlXG4gICAgICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3RhcnQgTW9udGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0gZm9ybWF0JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5leHBlbnNlPy5zdGFydERhdGUgfHwgbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NJykpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdleHBlbnNlLXN0YXJ0LWRhdGUnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRW5kIERhdGVcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmQgTW9udGggKE9wdGlvbmFsKScpXG4gICAgICAgICAgICAuc2V0RGVzYygnWVlZWS1NTSBmb3JtYXQgLSBsZWF2ZSBlbXB0eSBmb3Igb25nb2luZycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMuZXhwZW5zZT8uZW5kRGF0ZSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmlkID0gJ2V4cGVuc2UtZW5kLWRhdGUnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2F0ZWdvcnlcbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdDYXRlZ29yeSAoT3B0aW9uYWwpJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5leHBlbnNlPy5jYXRlZ29yeSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmlkID0gJ2V4cGVuc2UtY2F0ZWdvcnknO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQnV0dG9uc1xuICAgICAgICBjb25zdCBidXR0b25EaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdtb2RhbC1idXR0b24tY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzYXZlQnRuID0gYnV0dG9uRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTYXZlJywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgICAgIHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlU3VibWl0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgICAgICBjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVTdWJtaXQoKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2UtbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1hbW91bnQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XG4gICAgICAgIGNvbnN0IGR1ZURheSA9IHBhcnNlSW50KChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1kdWUtZGF5JykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBlbnNlLXBheW1lbnQtbWV0aG9kJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwZW5zZS1zdGFydC1kYXRlJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgIGNvbnN0IGVuZERhdGUgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2UtZW5kLWRhdGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVuc2UtY2F0ZWdvcnknKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblxuICAgICAgICBpZiAoIW5hbWUgfHwgIWFtb3VudCB8fCAhZHVlRGF5IHx8ICFwYXltZW50TWV0aG9kIHx8ICFzdGFydERhdGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBmaWxsIGluIGFsbCByZXF1aXJlZCBmaWVsZHMnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV4cGVuc2U6IFJlY3VycmluZ0V4cGVuc2UgPSB7XG4gICAgICAgICAgICBpZDogdGhpcy5leHBlbnNlPy5pZCB8fCBgZXhwLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIGR1ZURheSxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBzdGFydERhdGUsXG4gICAgICAgICAgICBlbmREYXRlOiBlbmREYXRlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICBhcmNoaXZlZDogdGhpcy5leHBlbnNlPy5hcmNoaXZlZCB8fCBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLmV4cGVuc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnVwZGF0ZVJlY3VycmluZ0V4cGVuc2UoZXhwZW5zZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hZGRSZWN1cnJpbmdFeHBlbnNlKGV4cGVuc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIE1hcmsgUGFpZCBNb2RhbFxuY2xhc3MgTWFya1BhaWRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcbiAgICBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlO1xuICAgIG1vbnRoOiBzdHJpbmc7XG4gICAgb25Db21wbGV0ZTogKCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbiwgZXhwZW5zZTogUmVjdXJyaW5nRXhwZW5zZSwgbW9udGg6IHN0cmluZywgb25Db21wbGV0ZTogKCkgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5leHBlbnNlID0gZXhwZW5zZTtcbiAgICAgICAgdGhpcy5tb250aCA9IG1vbnRoO1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNYXJrIGFzIFBhaWQnIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGAke3RoaXMuZXhwZW5zZS5uYW1lfSAtICQke3RoaXMuZXhwZW5zZS5hbW91bnQudG9GaXhlZCgyKX1gIH0pO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdDb25maXJtYXRpb24gTnVtYmVyIChPcHRpb25hbCknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmlkID0gJ2NvbmZpcm1hdGlvbi1udW1iZXInO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uRGl2ID0gY29udGVudEVsLmNyZWF0ZURpdignbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnTWFyayBQYWlkJywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgICAgIHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbk51bWJlciA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybWF0aW9uLW51bWJlcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ubWFya0V4cGVuc2VQYWlkKHRoaXMuZXhwZW5zZS5pZCwgdGhpcy5tb250aCwgdHJ1ZSwgY29uZmlybWF0aW9uTnVtYmVyIHx8IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25EaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIEhpc3RvcnkgTW9kYWxcbmNsYXNzIEhpc3RvcnlNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcbiAgICBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTW9udGhseUV4cGVuc2VUcmFja2VyUGx1Z2luLCBleHBlbnNlOiBSZWN1cnJpbmdFeHBlbnNlKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmV4cGVuc2UgPSBleHBlbnNlO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IGBQYXltZW50IEhpc3Rvcnk6ICR7dGhpcy5leHBlbnNlLm5hbWV9YCB9KTtcblxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseVBheW1lbnRzXG4gICAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5leHBlbnNlSWQgPT09IHRoaXMuZXhwZW5zZS5pZClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLm1vbnRoLmxvY2FsZUNvbXBhcmUoYS5tb250aCkpO1xuXG4gICAgICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gcGF5bWVudCBoaXN0b3J5JyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gY29udGVudEVsLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnZXhwZW5zZS1oaXN0b3J5LXRhYmxlJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IHRleHQ6ICdNb250aCcgfSk7XG4gICAgICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiAnU3RhdHVzJyB9KTtcbiAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IHRleHQ6ICdQYWlkIERhdGUnIH0pO1xuICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogJ0NvbmZpcm1hdGlvbicgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG4gICAgICAgICAgICBoaXN0b3J5LmZvckVhY2gocGF5bWVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gdGJvZHkuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogbW9tZW50KHBheW1lbnQubW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU0gWVlZWScpIH0pO1xuICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHBheW1lbnQucGFpZCA/ICdcdTI3MDUgUGFpZCcgOiAnXHUyQjFDIFVucGFpZCcgfSk7XG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcGF5bWVudC5wYWlkRGF0ZSB8fCAnLScgfSk7XG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcGF5bWVudC5jb25maXJtYXRpb25OdW1iZXIgfHwgJy0nIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2xvc2UnIH0pO1xuICAgICAgICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFN1cHBvcnQgTW9kYWxcbmNsYXNzIFN1cHBvcnRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2V4cGVuc2UtdHJhY2tlci1zdXBwb3J0LW1vZGFsJyk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzRFx1REM5OSBTdXBwb3J0IE1vbnRobHkgRXhwZW5zZSBUcmFja2VyJyB9KTtcbiAgICAgICAgaGVhZGVyLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnVGhhbmsgeW91IGZvciBjb25zaWRlcmluZyBzdXBwb3J0aW5nIHRoaXMgcGx1Z2luISBZb3VyIHN1cHBvcnQgaGVscHMgbWFpbnRhaW4gYW5kIGltcHJvdmUgdGhpcyB0b29sLicgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFBheVBhbCBTZWN0aW9uXG4gICAgICAgIGNvbnN0IHBheXBhbFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KCdzdXBwb3J0LXNlY3Rpb24nKTtcbiAgICAgICAgcGF5cGFsU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQjMgUGF5UGFsJyB9KTtcbiAgICAgICAgcGF5cGFsU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ09uZS10aW1lIG9yIHJlY3VycmluZyBkb25hdGlvbnMgdmlhIFBheVBhbDonIH0pO1xuICAgICAgICBjb25zdCBwYXlwYWxCdG4gPSBwYXlwYWxTZWN0aW9uLmNyZWF0ZUVsKCdhJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdTIxOTIgRG9uYXRlIHZpYSBQYXlQYWwnLFxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vcGF5cGFsbWUvVmljdG9yWmVudGVubydcbiAgICAgICAgfSk7XG4gICAgICAgIHBheXBhbEJ0bi5hZGRDbGFzcygnc3VwcG9ydC1saW5rJyk7XG5cbiAgICAgICAgLy8gQ3J5cHRvIFNlY3Rpb25cbiAgICAgICAgY29uc3QgY3J5cHRvU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3N1cHBvcnQtc2VjdGlvbicpO1xuICAgICAgICBjcnlwdG9TZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1RDgzRVx1REU5OSBDcnlwdG9jdXJyZW5jeSAoVVNEQy9VU0RUKScgfSk7XG4gICAgICAgIGNyeXB0b1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdTdXBwb3J0IHdpdGggc3RhYmxlY29pbnMgb24gbXVsdGlwbGUgbmV0d29ya3M6JyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNyeXB0b0FkZHJlc3NlcyA9IGNyeXB0b1NlY3Rpb24uY3JlYXRlRGl2KCdjcnlwdG8tYWRkcmVzc2VzJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1c2RjRGl2ID0gY3J5cHRvQWRkcmVzc2VzLmNyZWF0ZURpdignY3J5cHRvLWFkZHJlc3MnKTtcbiAgICAgICAgdXNkY0Rpdi5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnVVNEQyAoQmFzZSBOZXR3b3JrIC0gTG93IEZlZXMpOicgfSk7XG4gICAgICAgIGNvbnN0IHVzZGNBZGRyZXNzID0gdXNkY0Rpdi5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJzB4MTAyMzE0MmQwNTQ4YjYzNTQyZjJhNDgwM2I2NzI0ZDRjMjZiOGJkYScgfSk7XG4gICAgICAgIHVzZGNBZGRyZXNzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB1c2RjQWRkcmVzcy5zdHlsZS5tYXJnaW5Ub3AgPSAnNXB4JztcbiAgICAgICAgdXNkY0FkZHJlc3Muc3R5bGUucGFkZGluZyA9ICc1cHgnO1xuICAgICAgICB1c2RjQWRkcmVzcy5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIHVzZGNBZGRyZXNzLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICB1c2RjQWRkcmVzcy5zdHlsZS5mb250U2l6ZSA9ICcwLjg1ZW0nO1xuICAgICAgICB1c2RjQWRkcmVzcy5zdHlsZS53b3JkQnJlYWsgPSAnYnJlYWstYWxsJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHVzZGNOb3RlID0gdXNkY0Rpdi5jcmVhdGVFbCgnc21hbGwnLCB7IHRleHQ6ICdBbHNvIHdvcmtzIG9uOiBFdGhlcmV1bSwgUG9seWdvbiwgQXJiaXRydW0sIE9wdGltaXNtJyB9KTtcbiAgICAgICAgdXNkY05vdGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHVzZGNOb3RlLnN0eWxlLm1hcmdpblRvcCA9ICczcHgnO1xuICAgICAgICB1c2RjTm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cbiAgICAgICAgY29uc3QgdXNkdERpdiA9IGNyeXB0b0FkZHJlc3Nlcy5jcmVhdGVEaXYoJ2NyeXB0by1hZGRyZXNzJyk7XG4gICAgICAgIHVzZHREaXYuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1VTRFQgKFRyb24gVFJDLTIwIC0gVWx0cmEgTG93IEZlZXMpOicgfSk7XG4gICAgICAgIGNvbnN0IHVzZHRBZGRyZXNzID0gdXNkdERpdi5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ1RBVjdxVEdndm44R25ZSmZYZmVzNzN0RDJkQVBRSjNMMlcnIH0pO1xuICAgICAgICB1c2R0QWRkcmVzcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUubWFyZ2luVG9wID0gJzVweCc7XG4gICAgICAgIHVzZHRBZGRyZXNzLnN0eWxlLnBhZGRpbmcgPSAnNXB4JztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICB1c2R0QWRkcmVzcy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUuZm9udFNpemUgPSAnMC44NWVtJztcbiAgICAgICAgdXNkdEFkZHJlc3Muc3R5bGUud29yZEJyZWFrID0gJ2JyZWFrLWFsbCc7XG5cbiAgICAgICAgY29uc3QgY3J5cHRvTm90ZSA9IGNyeXB0b1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI2QTBcdUZFMEYgSW1wb3J0YW50OiBEb3VibGUtY2hlY2sgdGhlIG5ldHdvcmsgYmVmb3JlIHNlbmRpbmchJyB9KTtcbiAgICAgICAgY3J5cHRvTm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWVycm9yKSc7XG4gICAgICAgIGNyeXB0b05vdGUuc3R5bGUuZm9udFNpemUgPSAnMC45ZW0nO1xuICAgICAgICBjcnlwdG9Ob3RlLnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNyeXB0b1RpcCA9IGNyeXB0b1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQTEgVGlwOiBVc2UgVHJvbiBmb3IgVVNEVCBvciBCYXNlIGZvciBVU0RDIHRvIG1pbmltaXplIGZlZXMhJyB9KTtcbiAgICAgICAgY3J5cHRvVGlwLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICAgICAgY3J5cHRvVGlwLnN0eWxlLm1hcmdpblRvcCA9ICc1cHgnO1xuICAgICAgICBjcnlwdG9UaXAuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXG4gICAgICAgIC8vIEJ1eSBNZSBhIENvZmZlZSBTZWN0aW9uXG4gICAgICAgIGNvbnN0IGNvZmZlZVNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KCdzdXBwb3J0LXNlY3Rpb24nKTtcbiAgICAgICAgY29mZmVlU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTI2MTUgQnV5IE1lIGEgQ29mZmVlJyB9KTtcbiAgICAgICAgY29mZmVlU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1NpbXBsZSwgZnJpZW5kbHkgd2F5IHRvIHN1cHBvcnQ6JyB9KTtcbiAgICAgICAgY29uc3QgY29mZmVlQnRuID0gY29mZmVlU2VjdGlvbi5jcmVhdGVFbCgnYScsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHUyMTkyIEJ1eSBNZSBhIENvZmZlZScsXG4gICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly9idXltZWFjb2ZmZWUuY29tL3J2emVuJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29mZmVlQnRuLmFkZENsYXNzKCdzdXBwb3J0LWxpbmsnKTtcblxuICAgICAgICAvLyBPdGhlciB3YXlzIHRvIHN1cHBvcnRcbiAgICAgICAgY29uc3Qgb3RoZXJTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIG90aGVyU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0NcdURGMUYgT3RoZXIgV2F5cyB0byBTdXBwb3J0JyB9KTtcbiAgICAgICAgY29uc3Qgb3RoZXJMaXN0ID0gb3RoZXJTZWN0aW9uLmNyZWF0ZUVsKCd1bCcpO1xuICAgICAgICBvdGhlckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnXHUyQjUwIFN0YXIgdGhlIEdpdEh1YiByZXBvc2l0b3J5JyB9KTtcbiAgICAgICAgb3RoZXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1x1RDgzRFx1REMxQiBSZXBvcnQgYnVncyBhbmQgaXNzdWVzJyB9KTtcbiAgICAgICAgb3RoZXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1x1RDgzRFx1RENBMSBTdWdnZXN0IG5ldyBmZWF0dXJlcycgfSk7XG4gICAgICAgIG90aGVyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdcdUQ4M0RcdURDREQgSW1wcm92ZSBkb2N1bWVudGF0aW9uJyB9KTtcbiAgICAgICAgb3RoZXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1x1RDgzRFx1RERFM1x1RkUwRiBUZWxsIG90aGVycyBhYm91dCB0aGUgcGx1Z2luJyB9KTtcblxuICAgICAgICAvLyBGb290ZXJcbiAgICAgICAgY29uc3QgZm9vdGVyID0gY29udGVudEVsLmNyZWF0ZURpdignc3VwcG9ydC1mb290ZXInKTtcbiAgICAgICAgZm9vdGVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgZm9vdGVyLnN0eWxlLnBhZGRpbmcgPSAnMTVweCc7XG4gICAgICAgIGZvb3Rlci5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIGZvb3Rlci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcbiAgICAgICAgZm9vdGVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICBmb290ZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUaGFuayB5b3UgZm9yIHlvdXIgc3VwcG9ydCEgXHVEODNEXHVERTRGJyB9KTtcbiAgICAgICAgZm9vdGVyLmNyZWF0ZUVsKCdzbWFsbCcsIHsgdGV4dDogJ0FsbCBkb25hdGlvbnMgaGVscCBtYWludGFpbiBhbmQgaW1wcm92ZSB0aGlzIHBsdWdpbicgfSk7XG5cbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDbG9zZScgfSk7XG4gICAgICAgIGNsb3NlQnRuLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgY2xvc2VCdG4uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLy8gUmVwb3J0IE1vZGFsXG5jbGFzcyBSZXBvcnRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1vbnRobHlFeHBlbnNlVHJhY2tlclBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRXhwZW5zZSBSZXBvcnQnIH0pO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdTdGFydCBNb250aCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnWVlZWS1NTSBmb3JtYXQnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZShtb21lbnQoKS5zdWJ0cmFjdCg1LCAnbW9udGhzJykuZm9ybWF0KCdZWVlZLU1NJykpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdyZXBvcnQtc3RhcnQnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoZm9ybSlcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmQgTW9udGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lZWVktTU0gZm9ybWF0JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUobW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NJykpO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5pZCA9ICdyZXBvcnQtZW5kJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ21vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlQnRuID0gYnV0dG9uRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHZW5lcmF0ZScsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgICAgICBnZW5lcmF0ZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcG9ydCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICAgICAgY2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgZ2VuZXJhdGVSZXBvcnQoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0TW9udGggPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcG9ydC1zdGFydCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBjb25zdCBlbmRNb250aCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwb3J0LWVuZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuXG4gICAgICAgIGNvbnN0IHJlcG9ydCA9IHRoaXMuYnVpbGRSZXBvcnQoc3RhcnRNb250aCwgZW5kTW9udGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHJlcG9ydCBpbiBNb250aGx5IEV4cGVuc2VzL0V4cGVuc2UgUmVwb3J0cyBmb2xkZXJcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRobHlOb3Rlc0ZvbGRlcn0vRXhwZW5zZSBSZXBvcnRzYDtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgRXhwZW5zZSBSZXBvcnQgJHtzdGFydE1vbnRofSB0byAke2VuZE1vbnRofS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7Zm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gRW5zdXJlIGZvbGRlciBleGlzdHNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhdGUgb3Igb3ZlcndyaXRlIHRoZSByZXBvcnRcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1JlcG9ydCB1cGRhdGVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdSZXBvcnQgZ2VuZXJhdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByZXBvcnQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgY3JlYXRpbmcgcmVwb3J0Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBidWlsZFJlcG9ydChzdGFydE1vbnRoOiBzdHJpbmcsIGVuZE1vbnRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVwb3J0ID0gYCMgRXhwZW5zZSBSZXBvcnRcXG5cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCoqUGVyaW9kOioqICR7bW9tZW50KHN0YXJ0TW9udGgsICdZWVlZLU1NJykuZm9ybWF0KCdNTU0gWVlZWScpfSAtICR7bW9tZW50KGVuZE1vbnRoLCAnWVlZWS1NTScpLmZvcm1hdCgnTU1NIFlZWVknKX1cXG5cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCoqR2VuZXJhdGVkOioqICR7bW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tJyl9XFxuXFxuLS0tXFxuXFxuYDtcblxuICAgICAgICBjb25zdCBzdGFydCA9IG1vbWVudChzdGFydE1vbnRoLCAnWVlZWS1NTScpO1xuICAgICAgICBjb25zdCBlbmQgPSBtb21lbnQoZW5kTW9udGgsICdZWVlZLU1NJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdG90YWxBbW91bnQgPSAwO1xuICAgICAgICBsZXQgdG90YWxQYWlkID0gMDtcbiAgICAgICAgbGV0IHRvdGFsVW5wYWlkID0gMDtcblxuICAgICAgICByZXBvcnQgKz0gYCMjIE1vbnRobHkgQnJlYWtkb3duXFxuXFxuYDtcblxuICAgICAgICBsZXQgY3VycmVudCA9IHN0YXJ0LmNsb25lKCk7XG4gICAgICAgIHdoaWxlIChjdXJyZW50LmlzU2FtZU9yQmVmb3JlKGVuZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gY3VycmVudC5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2VzID0gdGhpcy5wbHVnaW4uZ2V0RXhwZW5zZXNGb3JNb250aChtb250aCk7XG4gICAgICAgICAgICBjb25zdCB1bnBhaWQgPSB0aGlzLnBsdWdpbi5nZXRVbnBhaWRFeHBlbnNlcyhtb250aCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoVG90YWwgPSBleHBlbnNlcy5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgZS5hbW91bnQsIDApO1xuICAgICAgICAgICAgY29uc3QgbW9udGhQYWlkID0gZXhwZW5zZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50ID0gdGhpcy5wbHVnaW4uZ2V0UGF5bWVudChlLmlkLCBtb250aCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXltZW50Py5wYWlkO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlLmFtb3VudCwgMCk7XG4gICAgICAgICAgICBjb25zdCBtb250aFVucGFpZCA9IG1vbnRoVG90YWwgLSBtb250aFBhaWQ7XG5cbiAgICAgICAgICAgIHRvdGFsQW1vdW50ICs9IG1vbnRoVG90YWw7XG4gICAgICAgICAgICB0b3RhbFBhaWQgKz0gbW9udGhQYWlkO1xuICAgICAgICAgICAgdG90YWxVbnBhaWQgKz0gbW9udGhVbnBhaWQ7XG5cbiAgICAgICAgICAgIHJlcG9ydCArPSBgIyMjICR7Y3VycmVudC5mb3JtYXQoJ01NTU0gWVlZWScpfVxcblxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gVG90YWw6ICQke21vbnRoVG90YWwudG9GaXhlZCgyKX1cXG5gO1xuICAgICAgICAgICAgcmVwb3J0ICs9IGAtIFBhaWQ6ICQke21vbnRoUGFpZC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gVW5wYWlkOiAkJHttb250aFVucGFpZC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgICAgICByZXBvcnQgKz0gYC0gRXhwZW5zZXM6ICR7ZXhwZW5zZXMubGVuZ3RofSAoJHt1bnBhaWQubGVuZ3RofSB1bnBhaWQpXFxuXFxuYDtcblxuICAgICAgICAgICAgY3VycmVudC5hZGQoMSwgJ21vbnRoJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXBvcnQgKz0gYCMjIFN1bW1hcnlcXG5cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYC0gKipUb3RhbCBBbW91bnQ6KiogJCR7dG90YWxBbW91bnQudG9GaXhlZCgyKX1cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYC0gKipUb3RhbCBQYWlkOioqICQke3RvdGFsUGFpZC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgIHJlcG9ydCArPSBgLSAqKlRvdGFsIFVucGFpZDoqKiAkJHt0b3RhbFVucGFpZC50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgIHJlcG9ydCArPSBgLSAqKlBheW1lbnQgUmF0ZToqKiAke3RvdGFsQW1vdW50ID4gMCA/ICgodG90YWxQYWlkIC8gdG90YWxBbW91bnQpICogMTAwKS50b0ZpeGVkKDEpIDogMH0lXFxuXFxuYDtcblxuICAgICAgICAvLyBFeHBlbnNlIGJyZWFrZG93blxuICAgICAgICByZXBvcnQgKz0gYCMjIEV4cGVuc2UgQnJlYWtkb3duXFxuXFxuYDtcbiAgICAgICAgY29uc3QgYWxsRXhwZW5zZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWN1cnJpbmdFeHBlbnNlcy5maWx0ZXIoZSA9PiAhZS5hcmNoaXZlZCk7XG4gICAgICAgIGFsbEV4cGVuc2VzLmZvckVhY2goZXhwZW5zZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50cyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRobHlQYXltZW50cy5maWx0ZXIocCA9PiBcbiAgICAgICAgICAgICAgICBwLmV4cGVuc2VJZCA9PT0gZXhwZW5zZS5pZCAmJlxuICAgICAgICAgICAgICAgIG1vbWVudChwLm1vbnRoLCAnWVlZWS1NTScpLmlzQmV0d2VlbihzdGFydCwgZW5kLCBudWxsLCAnW10nKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHBhaWRDb3VudCA9IHBheW1lbnRzLmZpbHRlcihwID0+IHAucGFpZCkubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IHBheW1lbnRzLmxlbmd0aDtcblxuICAgICAgICAgICAgcmVwb3J0ICs9IGAjIyMgJHtleHBlbnNlLm5hbWV9XFxuXFxuYDtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgLSBBbW91bnQ6ICQke2V4cGVuc2UuYW1vdW50LnRvRml4ZWQoMil9XFxuYDtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgLSBQYXltZW50IE1ldGhvZDogJHtleHBlbnNlLnBheW1lbnRNZXRob2R9XFxuYDtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgLSBQYWlkOiAke3BhaWRDb3VudH0vJHt0b3RhbENvdW50fSBtb250aHNcXG5gO1xuICAgICAgICAgICAgcmVwb3J0ICs9IGAtIFRvdGFsIFBhaWQ6ICQkeyhwYWlkQ291bnQgKiBleHBlbnNlLmFtb3VudCkudG9GaXhlZCgyKX1cXG5cXG5gO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVwb3J0O1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFNldHRpbmdzIFRhYlxuY2xhc3MgRXhwZW5zZVRyYWNrZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNb250aGx5RXhwZW5zZVRyYWNrZXJQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01vbnRobHkgRXhwZW5zZSBUcmFja2VyIFNldHRpbmdzJyB9KTtcblxuICAgICAgICAvLyBTdXBwb3J0IFNlY3Rpb25cbiAgICAgICAgY29uc3Qgc3VwcG9ydFNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2V4cGVuc2UtdHJhY2tlci1zdXBwb3J0LXNlY3Rpb24nKTtcbiAgICAgICAgc3VwcG9ydFNlY3Rpb24uc3R5bGUucGFkZGluZyA9ICcyMHB4JztcbiAgICAgICAgc3VwcG9ydFNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICBzdXBwb3J0U2VjdGlvbi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIHN1cHBvcnRTZWN0aW9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xuICAgICAgICBzdXBwb3J0U2VjdGlvbi5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuXG4gICAgICAgIGNvbnN0IHN1cHBvcnRIZWFkZXIgPSBzdXBwb3J0U2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURDOTkgU3VwcG9ydCBUaGlzIFBsdWdpbicgfSk7XG4gICAgICAgIHN1cHBvcnRIZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gJzAnO1xuICAgICAgICBzdXBwb3J0SGVhZGVyLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuXG4gICAgICAgIHN1cHBvcnRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdJZiB5b3UgZmluZCB0aGlzIHBsdWdpbiBoZWxwZnVsLCBjb25zaWRlciBzdXBwb3J0aW5nIGl0cyBkZXZlbG9wbWVudCEnIFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzdXBwb3J0TGlua3MgPSBzdXBwb3J0U2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgICAgc3VwcG9ydExpbmtzLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIHN1cHBvcnRMaW5rcy5zdHlsZS5nYXAgPSAnMTBweCc7XG4gICAgICAgIHN1cHBvcnRMaW5rcy5zdHlsZS5mbGV4V3JhcCA9ICd3cmFwJztcbiAgICAgICAgc3VwcG9ydExpbmtzLnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JztcblxuICAgICAgICAvLyBQYXlQYWwgYnV0dG9uXG4gICAgICAgIGNvbnN0IHBheXBhbEJ0biA9IHN1cHBvcnRMaW5rcy5jcmVhdGVFbCgnYScsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0IzIFBheVBhbCcsXG4gICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9wYXlwYWxtZS9WaWN0b3JaZW50ZW5vJ1xuICAgICAgICB9KTtcbiAgICAgICAgcGF5cGFsQnRuLnN0eWxlLmNzc1RleHQgPSAncGFkZGluZzogOHB4IDE2cHg7IGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7IGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7IGJvcmRlci1yYWRpdXM6IDRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBmb250LXdlaWdodDogNjAwOyc7XG5cbiAgICAgICAgLy8gQ3J5cHRvIGJ1dHRvblxuICAgICAgICBjb25zdCBjcnlwdG9CdG4gPSBzdXBwb3J0TGlua3MuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVEODNFXHVERTk5IFVTREMvVVNEVCdcbiAgICAgICAgfSk7XG4gICAgICAgIGNyeXB0b0J0bi5zdHlsZS5jc3NUZXh0ID0gJ3BhZGRpbmc6IDhweCAxNnB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpOyBib3JkZXItcmFkaXVzOiA0cHg7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgZm9udC13ZWlnaHQ6IDYwMDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXI6IG5vbmU7JztcbiAgICAgICAgY3J5cHRvQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBuZXcgU3VwcG9ydE1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQnV5IE1lIGEgQ29mZmVlIGJ1dHRvblxuICAgICAgICBjb25zdCBjb2ZmZWVCdG4gPSBzdXBwb3J0TGlua3MuY3JlYXRlRWwoJ2EnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1MjYxNSBDb2ZmZWUnLFxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vYnV5bWVhY29mZmVlLmNvbS9ydnplbidcbiAgICAgICAgfSk7XG4gICAgICAgIGNvZmZlZUJ0bi5zdHlsZS5jc3NUZXh0ID0gJ3BhZGRpbmc6IDhweCAxNnB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpOyBib3JkZXItcmFkaXVzOiA0cHg7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgZm9udC13ZWlnaHQ6IDYwMDsnO1xuXG4gICAgICAgIGNvbnN0IHN1cHBvcnROb3RlID0gc3VwcG9ydFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1lvdXIgc3VwcG9ydCBoZWxwcyBtYWludGFpbiBhbmQgaW1wcm92ZSB0aGlzIHBsdWdpbi4gVGhhbmsgeW91ISBcdUQ4M0RcdURFNEYnXG4gICAgICAgIH0pO1xuICAgICAgICBzdXBwb3J0Tm90ZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMCc7XG4gICAgICAgIHN1cHBvcnROb3RlLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICAgICAgc3VwcG9ydE5vdGUuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgICAgICBzdXBwb3J0Tm90ZS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2hyJywgeyBjbHM6ICdleHBlbnNlLXRyYWNrZXItZGl2aWRlcicgfSk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1BsdWdpbiBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTW9udGhseSBOb3RlcyBGb2xkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0ZvbGRlciB3aGVyZSBtb250aGx5IGV4cGVuc2Ugbm90ZXMgd2lsbCBiZSBjcmVhdGVkJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5Tm90ZXNGb2xkZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5Tm90ZXNGb2xkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0F1dG8tY3JlYXRlIE1vbnRobHkgTm90ZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgY3JlYXRlIG1vbnRobHkgbm90ZXMgd2hlbiBhIG5ldyBtb250aCBiZWdpbnMnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGVNb250aGx5Tm90ZXMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ3JlYXRlTW9udGhseU5vdGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG93IFN0YXR1cyBCYXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Rpc3BsYXkgdW5wYWlkIGV4cGVuc2UgY291bnQgaW4gc3RhdHVzIGJhcicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0YXR1c0JhcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGF0dXNCYXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgIXRoaXMucGx1Z2luLnN0YXR1c0Jhckl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnN0YXR1c0Jhckl0ZW0gPSB0aGlzLnBsdWdpbi5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdmFsdWUgJiYgdGhpcy5wbHVnaW4uc3RhdHVzQmFySXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc3RhdHVzQmFySXRlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdNb250aGx5IE5vdGUgVGVtcGxhdGUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1RlbXBsYXRlIGZvciBtb250aGx5IG5vdGVzLiBVc2Uge3ttb250aH19IGFuZCB7e2V4cGVuc2VzfX0gYXMgcGxhY2Vob2xkZXJzLicpXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aGx5Tm90ZVRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDEwO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5jb2xzID0gNTA7XG4gICAgICAgICAgICAgICAgdGV4dC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhseU5vdGVUZW1wbGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBWU87QUFnQ1AsSUFBTSxtQkFBMkM7QUFBQSxFQUM3QyxtQkFBbUIsQ0FBQztBQUFBLEVBQ3BCLGlCQUFpQixDQUFDO0FBQUEsRUFDbEIsb0JBQW9CO0FBQUEsRUFDcEIscUJBQXFCO0FBQUEsRUFDckIsd0JBQXdCO0FBQUEsRUFDeEIsZUFBZTtBQUNuQjtBQUVBLElBQU0sc0JBQXNCO0FBRzVCLElBQXFCLDhCQUFyQixjQUF5RCx1QkFBTztBQUFBLEVBSTVELE1BQU0sU0FBUztBQUNYLFVBQU0sS0FBSyxhQUFhO0FBR3hCLFNBQUs7QUFBQSxNQUNEO0FBQUEsTUFDQSxDQUFDLFNBQVMsSUFBSSxjQUFjLE1BQU0sSUFBSTtBQUFBLElBQzFDO0FBR0EsU0FBSyxjQUFjLFVBQVUsMkJBQTJCLE1BQU07QUFDMUQsV0FBSyxzQkFBc0I7QUFBQSxJQUMvQixDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDWixhQUFLLHNCQUFzQjtBQUFBLE1BQy9CO0FBQUEsSUFDSixDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDWixZQUFJLGdCQUFnQixLQUFLLEtBQUssTUFBTSxJQUFJLEVBQUUsS0FBSztBQUFBLE1BQ25EO0FB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
